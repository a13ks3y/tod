(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return a}));var r=n("os0x"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:s,optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);try{var o=this.getOrInitializeService(i);if(!o){if(n)return null;throw Error("Service "+this.name+" is not available")}return o}catch(a){if(n)return null;throw a}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService(s)}catch(h){}try{for(var i=Object(r.h)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Object(r.e)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService(c);u.resolve(l)}catch(h){}}}catch(f){e={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,(function(){var t;return Object(r.d)(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})),t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()}))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return t===s?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n=!1,r=void 0;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.b{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.a(this),n=this.destination;n.add(e);const r=Object(o.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"6Uf2":function(t,e,n){"use strict";(function(t){var e,r=n("zIRd"),i=n("os0x"),o=n("qOnz"),s=n("q/0M"),a=n("/6Yf"),u=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(o.F)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(o.z)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),c=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(o.h)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),l=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new u(e)}}catch(n){}return new c},h=l("localStorage"),f=l("sessionStorage"),d=new s.b("@firebase/database"),p=(e=1,function(){return e++}),y=function(t){var e=Object(o.E)(t),n=new o.c;n.update(e);var r=n.digest();return o.f.encodeByteArray(r)},g=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=g.apply(null,i):n+="object"==typeof i?Object(o.F)(i):i,n+=" "}return n},v=null,m=!0,b=function(t,e){Object(o.d)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(d.logLevel=s.a.VERBOSE,v=d.log.bind(d),e&&f.set("logging_enabled",!0)):"function"==typeof t?v=t:(v=null,f.remove("logging_enabled"))},_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===m&&(m=!1,null===v&&!0===f.get("logging_enabled")&&b(!0)),v){var n=g.apply(null,t);v(n)}},w=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];_.apply(void 0,Object(i.f)([t],e))}},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+g.apply(void 0,Object(i.f)(t));d.error(n)},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+g.apply(void 0,Object(i.f)(t));throw d.error(n),new Error(n)},O=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+g.apply(void 0,Object(i.f)(t));d.warn(n)},T=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},I="[MIN_NAME]",S="[MAX_NAME]",x=function(t,e){if(t===e)return 0;if(t===I||e===S)return-1;if(e===I||t===S)return 1;var n=G(t),r=G(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},j=function(t,e){return t===e?0:t<e?-1:1},A=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(o.F)(e))},N=function(t){if("object"!=typeof t||null===t)return Object(o.F)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=Object(o.F)(e[i]),r+=":",r+=N(t[e[i]]);return r+"}"},k=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function R(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var P,D,L,F,M,U,V,q,H,B,z=function(t){var e,n,r,i,s;Object(o.d)(!T(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(s=0;s<64;s+=8){var l=parseInt(u.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},W=new RegExp("^-?(0*)\\d{1,10}$"),G=function(t){if(W.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},Q=function(t){try{t()}catch(e){setTimeout((function(){throw O("Exception was thrown by user callback.",e.stack||""),e}),Math.floor(0))}},$=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},K=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!1,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},t.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)e.push(this.pieces_[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(e instanceof t)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var r=e.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return t.relativePath(e.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")},t.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=x(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},t.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},t.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},t}(),Y=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(o.D)(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=Object(o.D)(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=Object(o.D)(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),J="firebaseio.com",X="websocket",Z="long_polling",tt=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=h.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&h.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(Object(o.d)("string"==typeof t,"typeof type must == string"),Object(o.d)("object"==typeof e,"typeof params must == object"),t===X)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==Z)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return R(e,(function(t,e){r.push(t+"="+e)})),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},t}(),et=function(t,e){var n=nt(t),r=n.namespace;return"firebase.com"===n.domain&&C(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||C("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&O("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new tt(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new K(n.pathString)}},nt=function(t){var e="",n="",r="",o="",s="",a=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var f=t.indexOf("?");-1===f&&(f=t.length),e=t.substring(0,Math.min(h,f)),h<f&&(o=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,f)));var d=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var o=Object(i.h)(t.split("&")),s=o.next();!s.done;s=o.next()){var a=s.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):O("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,f)));(l=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var y=e.indexOf(".");r=e.substring(0,y).toLowerCase(),n=e.substring(y+1),s=r}"ns"in d&&(s=d.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:o,namespace:s}},rt=/[\[\].#$\/\u0000-\u001F\u007F]/,it=/[\[\].#$\u0000-\u001F\u007F]/,ot=10485760,st=function(t){return"string"==typeof t&&0!==t.length&&!rt.test(t)},at=function(t){return"string"==typeof t&&0!==t.length&&!it.test(t)},ut=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!T(t)||t&&"object"==typeof t&&Object(o.h)(t,".sv")},ct=function(t,e,n,r,i){i&&void 0===n||lt(Object(o.l)(t,e,i),n,r)},lt=function(t,e,n){var r=n instanceof K?new Y(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+r.toErrorString());if("function"==typeof e)throw new Error(t+"contains a function "+r.toErrorString()+" with contents = "+e.toString());if(T(e))throw new Error(t+"contains "+e.toString()+" "+r.toErrorString());if("string"==typeof e&&e.length>ot/3&&Object(o.D)(e)>ot)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+r.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,s=!1;if(R(e,(function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!st(e)))throw new Error(t+" contains an invalid key ("+e+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(e),lt(t,n,r),r.pop()})),i&&s)throw new Error(t+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},ht=function(t,e,n,r,i){if(!i||void 0!==n){var s=Object(o.l)(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(s+" must be an object containing the children to replace.");var a=[];R(n,(function(t,e){var n=new K(t);if(lt(s,e,r.child(n)),".priority"===n.getBack()&&!ut(e))throw new Error(s+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)})),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=(r=e[n]).slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!st(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(K.comparePaths);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&s.contains(r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(s,a)}},ft=function(t,e,n,r){if(!r||void 0!==n){if(T(n))throw new Error(Object(o.l)(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ut(n))throw new Error(Object(o.l)(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},dt=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(o.l)(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},pt=function(t,e,n,r){if(!(r&&void 0===n||st(n)))throw new Error(Object(o.l)(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},yt=function(t,e,n,r){if(!(r&&void 0===n||at(n)))throw new Error(Object(o.l)(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},gt=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),yt(t,e,n,r)},vt=function(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")},mt=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!st(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),at(t)}(r))throw new Error(Object(o.l)(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},bt=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(o.l)(t,e,r)+"must be a boolean.")},_t=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){Object(o.G)("OnDisconnect.cancel",0,1,arguments.length),Object(o.H)("OnDisconnect.cancel",1,t,!0);var e=new o.a;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){Object(o.G)("OnDisconnect.remove",0,1,arguments.length),vt("OnDisconnect.remove",this.path_),Object(o.H)("OnDisconnect.remove",1,t,!0);var e=new o.a;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){Object(o.G)("OnDisconnect.set",1,2,arguments.length),vt("OnDisconnect.set",this.path_),ct("OnDisconnect.set",1,t,this.path_,!1),Object(o.H)("OnDisconnect.set",2,e,!0);var n=new o.a;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){Object(o.G)("OnDisconnect.setWithPriority",2,3,arguments.length),vt("OnDisconnect.setWithPriority",this.path_),ct("OnDisconnect.setWithPriority",1,t,this.path_,!1),ft("OnDisconnect.setWithPriority",2,e,!1),Object(o.H)("OnDisconnect.setWithPriority",3,n,!0);var r=new o.a;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(Object(o.G)("OnDisconnect.update",1,2,arguments.length),vt("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,O("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ht("OnDisconnect.update",1,t,this.path_,!1),Object(o.H)("OnDisconnect.update",2,e,!0);var i=new o.a;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),wt=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(o.G)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),Et=(P="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",D=0,L=[],function(t){var e,n=t===D;D=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=P.charAt(t%64),t=Math.floor(t/64);Object(o.d)(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===L[e];e--)L[e]=0;L[e]++}else for(e=0;e<12;e++)L[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=P.charAt(L[e]);return Object(o.d)(20===i.length,"nextPushId: Length should be 20."),i}),Ct=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Ot=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Ct(I,t),r=new Ct(I,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Ct.MIN},t}(),Tt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return F},set:function(t){F=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return x(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(o.e)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Ct.MIN},e.prototype.maxPost=function(){return new Ct(S,F)},e.prototype.makePost=function(t,e){return Object(o.d)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Ct(t,F)},e.prototype.toString=function(){return".key"},e}(Ot),It=new Tt,St=function(t){return"number"==typeof t?"number:"+z(t):"string:"+t},xt=function(t){if(t.isLeafNode()){var e=t.val();Object(o.d)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(o.h)(e,".sv"),"Priority must be a string or number.")}else Object(o.d)(t===M||t.isEmpty(),"priority of unexpected type.");Object(o.d)(t===M||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},jt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(o.d)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),xt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return U},set:function(t){U=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=e.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(o.d)(".priority"!==r||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+St(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?z(this.value_):this.value_,this.lazyHash_=y(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(o.d)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return Object(o.d)(i>=0,"Unknown leaf type: "+n),Object(o.d)(s>=0,"Unknown leaf type: "+r),i===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),At=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Ct.MIN},e.prototype.maxPost=function(){return new Ct(S,new jt("[PRIORITY-POST]",q))},e.prototype.makePost=function(t,e){var n=V(t);return new Ct(e,new jt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Ot)),Nt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),kt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Pt.EMPTY_NODE,this.right=null!=o?o:Pt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Pt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Pt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Rt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new kt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Pt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,kt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,kt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Nt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Nt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Nt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Nt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Rt,t}(),Dt=Math.log(2),Lt=function(){function t(t){this.count=parseInt(Math.log(t+1)/Dt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Ft=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new kt(s,o.node,kt.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new kt(s,o.node,kt.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new kt(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,kt.BLACK):(a(h,kt.BLACK),a(h,kt.RED))}return o}(new Lt(t.length));return new Pt(r||e,o)},Mt={},Ut=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(o.d)(Mt&&At,"ChildrenNode.ts has not been loaded"),H=H||new t({".priority":Mt},{".priority":At})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(o.C)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Pt?e:null},t.prototype.hasIndex=function(t){return Object(o.h)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(o.d)(e!==It,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,s=[],a=!1,u=n.getIterator(Ct.Wrap),c=u.getNext();c;)a=a||e.isDefinedOn(c.node),s.push(c),c=u.getNext();r=a?Ft(s,e.getCompare()):Mt;var l=e.toString(),h=Object(i.a)({},this.indexSet_);h[l]=e;var f=Object(i.a)({},this.indexes_);return f[l]=r,new t(f,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(o.A)(this.indexes_,(function(t,i){var s=Object(o.C)(r.indexSet_,i);if(Object(o.d)(s,"Missing index implementation for "+i),t===Mt){if(s.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(Ct.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),Ft(a,s.getCompare())}return Mt}var l=n.get(e.name),h=t;return l&&(h=h.remove(new Ct(e.name,l))),h.insert(e,e.node)})),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(o.A)(this.indexes_,(function(t){if(t===Mt)return t;var r=n.get(e.name);return r?t.remove(new Ct(e.name,r)):t})),this.indexSet_)},t}();function Vt(t,e){return x(t.name,e.name)}function qt(t,e){return x(t,e)}var Ht=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&xt(this.priorityNode_),this.children_.isEmpty()&&Object(o.d)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return B||(B=new t(new Pt(qt),null,Ut.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||B},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?B:e},t.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(o.d)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Ct(e,n),i=void 0,s=void 0;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?B:this.priorityNode_;return new t(i,a,s)},t.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;Object(o.d)(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(At,(function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1})),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+St(this.getPriority().val())+":"),this.forEachChild(At,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":y(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Ct(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Ct(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Ct(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,Ct.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,Ct.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Bt?-1:0},t.prototype.withIndex=function(e){if(e===It||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===It||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(At),r=e.getIterator(At),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===It?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),Bt=new(function(t){function e(){return t.call(this,new Pt(qt),Ht.EMPTY_NODE,Ut.Default)||this}return Object(i.c)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return Ht.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(Ht));function zt(t,e){if(void 0===e&&(e=null),null===t)return Ht.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(o.d)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new jt(t,zt(e));if(t instanceof Array){var n=Ht.EMPTY_NODE;return R(t,(function(e,r){if(Object(o.h)(t,e)&&"."!==e.substring(0,1)){var i=zt(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}})),n.updatePriority(zt(e))}var r=[],i=!1;if(R(t,(function(t,e){if("."!==t.substring(0,1)){var n=zt(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Ct(t,n)))}})),0===r.length)return Ht.EMPTY_NODE;var s=Ft(r,Vt,(function(t){return t.name}),qt);if(i){var a=Ft(r,At.getCompare());return new Ht(s,zt(e),new Ut({".priority":a},{".priority":At}))}return new Ht(s,zt(e),Ut.Default)}Object.defineProperties(Ct,{MIN:{value:new Ct(I,Ht.EMPTY_NODE)},MAX:{value:new Ct(S,Bt)}}),Tt.__EMPTY_NODE=Ht.EMPTY_NODE,jt.__childrenNodeConstructor=Ht,M=Bt,q=Bt,V=zt;var Wt,Gt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?x(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Ct.MIN},e.prototype.maxPost=function(){return Ct.MAX},e.prototype.makePost=function(t,e){var n=zt(t);return new Ct(e,n)},e.prototype.toString=function(){return".value"},e}(Ot)),Qt=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(o.d)(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return Object(i.c)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=zt(t),r=Ht.EMPTY_NODE.updateChild(this.indexPath_,n);return new Ct(e,r)},e.prototype.maxPost=function(){var t=Ht.EMPTY_NODE.updateChild(this.indexPath_,Bt);return new Ct(S,t)},e.prototype.toString=function(){return this.indexPath_.slice().join("/")},e}(Ot),$t=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return Object(o.G)("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return Object(o.G)("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return Object(o.G)("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return Object(o.G)("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){Object(o.G)("DataSnapshot.child",0,1,arguments.length),e=String(e),yt("DataSnapshot.child",1,e,!1);var n=new K(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,At)},t.prototype.hasChild=function(t){Object(o.G)("DataSnapshot.hasChild",1,1,arguments.length),yt("DataSnapshot.hasChild",1,t,!1);var e=new K(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return Object(o.G)("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(Object(o.G)("DataSnapshot.forEach",1,1,arguments.length),Object(o.H)("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,(function(r,i){return e(new t(i,n.ref_.child(r),At))}))},t.prototype.hasChildren=function(){return Object(o.G)("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(o.G)("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return Object(o.G)("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Kt=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(o.F)(this.snapshot.exportVal())},t}(),Yt=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Jt=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new Kt("value",this,new $t(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.d)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Yt(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),Xt=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,Object(o.h)(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Yt(this,t,e):null},t.prototype.createEvent=function(t,e){Object(o.d)(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new Kt(t.type,this,new $t(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.d)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var s=r[0],a=i[0];return!(a!==s||e.callbacks_[s]&&this.callbacks_[a]&&e.callbacks_[s]!==this.callbacks_[a])}return i.every((function(t){return e.callbacks_[t]===n.callbacks_[t]}))}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),Zt=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(o.d)(Wt,"Reference.ts has not been loaded"),Wt},set:function(t){Wt=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===It){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==I)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==S)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===At){if(null!=e&&!ut(e)||null!=n&&!ut(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(o.d)(t.getIndex()instanceof Qt||t.getIndex()===Gt,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return Object(o.G)("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){Object(o.G)("Query.on",2,4,arguments.length),dt("Query.on",1,e,!1),Object(o.H)("Query.on",2,n,!1);var s=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,s.cancel,s.context);else{var a={};a[e]=n,this.onChildEvent(a,s.cancel,s.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new Jt(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new Xt(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){Object(o.G)("Query.off",0,3,arguments.length),dt("Query.off",1,t,!0),Object(o.H)("Query.off",2,e,!0),Object(o.I)("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var s=e||null;r=new Jt(s,null,n||null)}else t&&(e&&((i={})[t]=e),r=new Xt(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},t.prototype.get=function(){return this.repo.getValue(this)},t.prototype.once=function(e,n,r,i){var s=this;Object(o.G)("Query.once",1,4,arguments.length),dt("Query.once",1,e,!1),Object(o.H)("Query.once",2,n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),u=!0,c=new o.a;c.promise.catch((function(){}));var l=function(t){u&&(u=!1,s.off(e,l),n&&n.bind(a.context)(t),c.resolve(t))};return this.on(e,l,(function(t){s.off(e,l),a.cancel&&a.cancel.bind(a.context)(t),c.reject(t)})),c.promise},t.prototype.limitToFirst=function(e){if(Object(o.G)("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(Object(o.G)("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(Object(o.G)("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');yt("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new K(e);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new Qt(n),i=this.queryParams_.orderBy(r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){Object(o.G)("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(It);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){Object(o.G)("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(At);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){Object(o.G)("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(Gt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),Object(o.G)("Query.startAt",0,2,arguments.length),ct("Query.startAt",1,e,this.path,!0),pt("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),Object(o.G)("Query.endAt",0,2,arguments.length),ct("Query.endAt",1,e,this.path,!0),pt("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(Object(o.G)("Query.equalTo",1,2,arguments.length),ct("Query.equalTo",1,t,this.path,!1),pt("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return Object(o.G)("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return Object(o.G)("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=N(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(Object(o.G)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=this.path.equals(e.path),s=this.queryIdentifier()===e.queryIdentifier();return r&&i&&s},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,Object(o.H)(t,3,r.cancel,!0),r.context=n,Object(o.I)(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Object(o.l)(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),te=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),ee=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=this.path_.child(e);return new t(this.syncTree_,n)},t.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},t}(),ne=function(t,e,n){return t&&"object"==typeof t?(Object(o.d)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?re(t[".sv"],e,n):"object"==typeof t[".sv"]?ie(t[".sv"],e):void Object(o.d)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},re=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(o.d)(!1,"Unexpected server value: "+t)}},ie=function(t,e,n){t.hasOwnProperty("increment")||Object(o.d)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Object(o.d)(!1,"Unexpected increment value: "+r);var i=e.node();if(Object(o.d)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var s=i.getValue();return"number"!=typeof s?r:s+r},oe=function(t,e,n,r){return ae(e,new ee(n,t),r)},se=function(t,e,n){return ae(t,new te(e),n)};function ae(t,e,n){var r,i=t.getPriority().val(),o=ne(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=ne(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new jt(a,zt(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new jt(o))),u.forEachChild(At,(function(t,i){var o=ae(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))})),r}var ue,ce,le=function(){function t(){this.value=null,this.children=new Map}return t.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&this.children.size>0){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},t.prototype.remember=function(e,n){if(e.isEmpty())this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(e,n);else{var r=e.getFront();this.children.has(r)||this.children.set(r,new t);var i=this.children.get(r);e=e.popFront(),i.remember(e,n)}},t.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(At,(function(t,e){n.remember(new K(t),e)})),this.forget(t)}if(this.children.size>0){var r=t.getFront();return t=t.popFront(),this.children.has(r)&&this.children.get(r).forget(t)&&this.children.delete(r),0===this.children.size}return!0},t.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild((function(n,r){var i=new K(t.toString()+"/"+n);r.forEachTree(i,e)}))},t.prototype.forEachChild=function(t){this.children.forEach((function(e,n){t(n,e)}))},t}(),he=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({}),fe=function(){function t(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,Object(o.d)(!r||e,"Tagged queries must be from server.")}return t.User=new t(!0,!1,null,!1),t.Server=new t(!1,!0,null,!1),t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}(),de=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=he.ACK_USER_WRITE,this.source=fe.User}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return Object(o.d)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new K(e));return new t(K.Empty,n,this.revert)}return Object(o.d)(this.path.getFront()===e,"operationForChild called for unrelated child."),new t(this.path.popFront(),this.affectedTree,this.revert)},t}(),pe=function(){function t(t,e){void 0===e&&(ue||(ue=new Pt(j)),e=ue),this.value=t,this.children=e}return t.fromObject=function(e){var n=t.Empty;return R(e,(function(t,e){n=n.set(new K(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:K.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null!=i?{path:new K(n).child(i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),r=this.children.get(n);return null!==r?r.subtree(e.popFront()):t.Empty},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var r=e.getFront(),i=(this.children.get(r)||t.Empty).set(e.popFront(),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?t.Empty:new t(null,this.children);var n=e.getFront(),r=this.children.get(n);if(r){var i=r.remove(e.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?t.Empty:new t(this.value,o)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var r,i=e.getFront(),o=(this.children.get(i)||t.Empty).setTree(e.popFront(),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(K.Empty,t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(t.child(r),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,K.Empty,e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,K.Empty,e)},t.prototype.foreachOnPath_=function(e,n,r){if(e.isEmpty())return this;this.value&&r(n,this.value);var i=e.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(e.popFront(),n.child(i),r):t.Empty},t.prototype.foreach=function(t){this.foreach_(K.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(t.child(n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t.Empty=new t(null),t}(),ye=function(){function t(t,e){this.source=t,this.path=e,this.type=he.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,K.Empty):new t(this.source,this.path.popFront())},t}(),ge=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=he.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,K.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}(),ve=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=he.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new K(e));return n.isEmpty()?null:n.value?new ge(this.source,K.Empty,n.value):new t(this.source,K.Empty,n)}return Object(o.d)(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),me=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),be=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new me(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new me(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t.Empty=new t(new me(Ht.EMPTY_NODE,!1,!1),new me(Ht.EMPTY_NODE,!1,!1)),t}(),_e=function(){function t(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}return t.valueChange=function(e){return new t(t.VALUE,e)},t.childAddedChange=function(e,n){return new t(t.CHILD_ADDED,n,e)},t.childRemovedChange=function(e,n){return new t(t.CHILD_REMOVED,n,e)},t.childChangedChange=function(e,n,r){return new t(t.CHILD_CHANGED,n,e,r)},t.childMovedChange=function(e,n){return new t(t.CHILD_MOVED,n,e)},t.CHILD_ADDED="child_added",t.CHILD_REMOVED="child_removed",t.CHILD_CHANGED="child_changed",t.CHILD_MOVED="child_moved",t.VALUE="value",t}(),we=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,s){Object(o.d)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(_e.childRemovedChange(e,a)):Object(o.d)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(_e.childAddedChange(e,n)):s.trackChildChange(_e.childChangedChange(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(At,(function(t,r){e.hasChild(t)||n.trackChildChange(_e.childRemovedChange(t,r))})),e.isLeafNode()||e.forEachChild(At,(function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(_e.childChangedChange(e,r,i))}else n.trackChildChange(_e.childAddedChange(e,r))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?Ht.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),Ee=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(o.d)(e===_e.CHILD_ADDED||e===_e.CHILD_CHANGED||e===_e.CHILD_REMOVED,"Only child changes supported for tracking"),Object(o.d)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(e===_e.CHILD_ADDED&&i===_e.CHILD_REMOVED)this.changeMap.set(n,_e.childChangedChange(n,t.snapshotNode,r.snapshotNode));else if(e===_e.CHILD_REMOVED&&i===_e.CHILD_ADDED)this.changeMap.delete(n);else if(e===_e.CHILD_REMOVED&&i===_e.CHILD_CHANGED)this.changeMap.set(n,_e.childRemovedChange(n,r.oldSnap));else if(e===_e.CHILD_CHANGED&&i===_e.CHILD_ADDED)this.changeMap.set(n,_e.childAddedChange(n,t.snapshotNode));else{if(e!==_e.CHILD_CHANGED||i!==_e.CHILD_CHANGED)throw Object(o.e)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,_e.childChangedChange(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),Ce=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Oe=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new me(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),Te=function(){return function(t,e){this.viewCache=t,this.changes=e}}(),Ie=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){Object(o.d)(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),Object(o.d)(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,i){var s,a,u=new Ee;if(n.type===he.OVERWRITE){var c=n;c.source.fromUser?s=this.applyUserOverwrite_(e,c.path,c.snap,r,i,u):(Object(o.d)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.getServerCache().isFiltered()&&!c.path.isEmpty(),s=this.applyServerOverwrite_(e,c.path,c.snap,r,i,a,u))}else if(n.type===he.MERGE){var l=n;l.source.fromUser?s=this.applyUserMerge_(e,l.path,l.children,r,i,u):(Object(o.d)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.getServerCache().isFiltered(),s=this.applyServerMerge_(e,l.path,l.children,r,i,a,u))}else if(n.type===he.ACK_USER_WRITE){var h=n;s=h.revert?this.revertUserWrite_(e,h.path,r,i,u):this.ackUserWrite_(e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==he.LISTEN_COMPLETE)throw Object(o.e)("Unknown operation type: "+n.type);s=this.listenComplete_(e,n.path,r,u)}var f=u.getChanges();return t.maybeAddValueEvent_(e,s,f),new Te(s,f)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(_e.valueChange(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var s=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var a=void 0,u=void 0;if(e.isEmpty())if(Object(o.d)(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var c=t.getCompleteServerSnap(),l=n.calcCompleteEventChildren(c instanceof Ht?c:Ht.EMPTY_NODE);a=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var h=n.calcCompleteEventCache(t.getCompleteServerSnap());a=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var f=e.getFront();if(".priority"===f){Object(o.d)(1===e.getLength(),"Can't have a priority with additional path components");var d=s.getNode();u=t.getServerCache().getNode();var p=n.calcEventCacheAfterServerOverwrite(e,d,u);a=null!=p?this.filter_.updatePriority(d,p):s.getNode()}else{var y=e.popFront(),g=void 0;if(s.isCompleteForChild(f)){u=t.getServerCache().getNode();var v=n.calcEventCacheAfterServerOverwrite(e,s.getNode(),u);g=null!=v?s.getNode().getImmediateChild(f).updateChild(y,v):s.getNode().getImmediateChild(f)}else g=n.calcCompleteChild(f,t.getServerCache());a=null!=g?this.filter_.updateChild(s.getNode(),f,g,y,r,i):s.getNode()}}return t.updateEventSnap(a,s.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())a=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(e,n);a=c.updateFullNode(u.getNode(),l,null)}else{var h=e.getFront();if(!u.isCompleteForPath(e)&&e.getLength()>1)return t;var f=e.popFront(),d=u.getNode().getImmediateChild(h).updateChild(f,n);a=".priority"===h?c.updatePriority(u.getNode(),d):c.updateChild(u.getNode(),h,d,f,Ce,null)}var p=t.updateServerSnap(a,u.isFullyInitialized()||e.isEmpty(),c.filtersNodes()),y=new Oe(r,p,i);return this.generateEventCacheAfterServerEvent_(p,e,r,y,s)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u=t.getEventCache(),c=new Oe(r,t,i);if(e.isEmpty())a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),s=t.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var l=e.getFront();if(".priority"===l)a=this.filter_.updatePriority(t.getEventCache().getNode(),n),s=t.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered());else{var h=e.popFront(),f=u.getNode().getImmediateChild(l),d=void 0;if(h.isEmpty())d=n;else{var p=c.getCompleteChild(l);d=null!=p?".priority"===h.getBack()&&p.getChild(h.parent()).isEmpty()?p:p.updateChild(h,n):Ht.EMPTY_NODE}if(f.equals(d))s=t;else{var y=this.filter_.updateChild(u.getNode(),l,d,h,c,o);s=t.updateEventSnap(y,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,s){var a=this,u=e;return r.foreach((function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())&&(u=a.applyUserOverwrite_(u,l,c,i,o,s))})),r.foreach((function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())||(u=a.applyUserOverwrite_(u,l,c,i,o,s))})),u},t.prototype.applyMerge_=function(t,e){return e.foreach((function(e,n){t=t.updateChild(e,n)})),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,s){var a=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,c=t;u=e.isEmpty()?n:pe.Empty.setTree(e,n);var l=t.getServerCache().getNode();return u.children.inorderTraversal((function(e,n){if(l.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),h=a.applyMerge_(u,n);c=a.applyServerOverwrite_(c,new K(e),h,r,i,o,s)}})),u.children.inorderTraversal((function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!l.hasChild(e)&&!u){var h=t.getServerCache().getNode().getImmediateChild(e),f=a.applyMerge_(h,n);c=a.applyServerOverwrite_(c,new K(e),f,r,i,o,s)}})),c},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,a.getNode().getChild(e),r,i,s,o);if(e.isEmpty()){var u=pe.Empty;return a.getNode().forEachChild(It,(function(t,e){u=u.set(new K(t),e)})),this.applyServerMerge_(t,e,u,r,i,s,o)}return t}var c=pe.Empty;return n.foreach((function(t,n){var r=e.child(t);a.isCompleteForPath(r)&&(c=c.set(t,a.getNode().getChild(r)))})),this.applyServerMerge_(t,e,c,r,i,s,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,Ce,r)},t.prototype.revertUserWrite_=function(t,e,n,r,i){var s;if(null!=n.shadowingWrite(e))return t;var a=new Oe(n,t,r),u=t.getEventCache().getNode(),c=void 0;if(e.isEmpty()||".priority"===e.getFront()){var l=void 0;if(t.getServerCache().isFullyInitialized())l=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var h=t.getServerCache().getNode();Object(o.d)(h instanceof Ht,"serverChildren would be complete if leaf node"),l=n.calcCompleteEventChildren(h)}c=this.filter_.updateFullNode(u,l=l,i)}else{var f=e.getFront(),d=n.calcCompleteChild(f,t.getServerCache());null==d&&t.getServerCache().isCompleteForChild(f)&&(d=u.getImmediateChild(f)),(c=null!=d?this.filter_.updateChild(u,f,d,e.popFront(),a,i):t.getEventCache().getNode().hasChild(f)?this.filter_.updateChild(u,f,Ht.EMPTY_NODE,e.popFront(),a,i):u).isEmpty()&&t.getServerCache().isFullyInitialized()&&(s=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(c=this.filter_.updateFullNode(c,s,i))}return s=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(K.Empty),t.updateEventSnap(c,s,this.filter_.filtersNodes())},t}(),Se=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach((function(t){t.type===_e.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(_e.childMovedChange(t.childName,t.snapshotNode))})),this.generateEventsForType_(i,_e.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,_e.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,_e.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,_e.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,_e.VALUE,t,n,e),i},t.prototype.generateEventsForType_=function(t,e,n,r,i){var o=this,s=n.filter((function(t){return t.type===e}));s.sort(this.compareChanges_.bind(this)),s.forEach((function(e){var n=o.materializeSingleChange_(e,i);r.forEach((function(r){r.respondsTo(e.type)&&t.push(r.createEvent(n,o.query_))}))}))},t.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw Object(o.e)("Should only compare child_ events.");var n=new Ct(t.childName,t.snapshotNode),r=new Ct(e.childName,e.snapshotNode);return this.index_.compare(n,r)},t}(),xe=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new we(n.getIndex()),i=n.getNodeFilter();this.processor_=new Ie(i);var o=e.getServerCache(),s=e.getEventCache(),a=r.updateFullNode(Ht.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(Ht.EMPTY_NODE,s.getNode(),null),c=new me(a,o.isFullyInitialized(),r.filtersNodes()),l=new me(u,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=new be(l,c),this.eventGenerator_=new Se(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){Object(o.d)(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach((function(t){var i=t.createCancelEvent(e=e,r);i&&n.push(i)}))}if(t){for(var i=[],s=0;s<this.eventRegistrations_.length;++s){var a=this.eventRegistrations_[s];if(a.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(s+1));break}}else i.push(a)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===he.MERGE&&null!==t.source.queryId&&(Object(o.d)(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),Object(o.d)(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),Object(o.d)(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(At,(function(t,e){n.push(_e.childAddedChange(t,e))})),e.isFullyInitialized()&&n.push(_e.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){return this.eventGenerator_.generateEventsForChanges(t,e,n?[n]:this.eventRegistrations_)},t}(),je=function(){function t(){this.views=new Map}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(o.d)(ce,"Reference.ts has not been loaded"),ce},set:function(t){Object(o.d)(!ce,"__referenceConstructor has already been defined"),ce=t},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.views.size},t.prototype.applyOperation=function(t,e,n){var r,s,a=t.source.queryId;if(null!==a){var u=this.views.get(a);return Object(o.d)(null!=u,"SyncTree gave us an op for an invalid query."),u.applyOperation(t,e,n)}var c=[];try{for(var l=Object(i.h)(this.views.values()),h=l.next();!h.done;h=l.next())c=c.concat((u=h.value).applyOperation(t,e,n))}catch(f){r={error:f}}finally{try{h&&!h.done&&(s=l.return)&&s.call(l)}finally{if(r)throw r.error}}return c},t.prototype.addEventRegistration=function(t,e,n,r,i){var o=t.queryIdentifier(),s=this.views.get(o);if(!s){var a=n.calcCompleteEventCache(i?r:null),u=!1;a?u=!0:r instanceof Ht?(a=n.calcCompleteEventChildren(r),u=!1):(a=Ht.EMPTY_NODE,u=!1);var c=new be(new me(a,u,!1),new me(r,i,!1));s=new xe(t,c),this.views.set(o,s)}return s.addEventRegistration(e),s.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var o,s,a=e.queryIdentifier(),u=[],c=[],l=this.hasCompleteView();if("default"===a)try{for(var h=Object(i.h)(this.views.entries()),f=h.next();!f.done;f=h.next()){var d,p=Object(i.e)(f.value,2),y=p[0];c=c.concat((d=p[1]).removeEventRegistration(n,r)),d.isEmpty()&&(this.views.delete(y),d.getQuery().getQueryParams().loadsAllData()||u.push(d.getQuery()))}}catch(g){o={error:g}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(o)throw o.error}}else(d=this.views.get(a))&&(c=c.concat(d.removeEventRegistration(n,r)),d.isEmpty()&&(this.views.delete(a),d.getQuery().getQueryParams().loadsAllData()||u.push(d.getQuery())));return l&&!this.hasCompleteView()&&u.push(new t.__referenceConstructor(e.repo,e.path)),{removed:u,events:c}},t.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=Object(i.h)(this.views.values()),o=r.next();!o.done;o=r.next()){var s=o.value;s.getQuery().getQueryParams().loadsAllData()||n.push(s)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var o=Object(i.h)(this.views.values()),s=o.next();!s.done;s=o.next())r=r||s.value.getCompleteServerCache(t)}catch(a){e={error:a}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t,e;try{for(var n=Object(i.h)(this.views.values()),r=n.next();!r.done;r=n.next()){var o=r.value;if(o.getQuery().getQueryParams().loadsAllData())return o}}catch(s){t={error:s}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},t}(),Ae=function(){function t(t){this.writeTree_=t}return t.prototype.addWrite=function(e,n){if(e.isEmpty())return new t(new pe(n));var r=this.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=K.relativePath(i,e);return o=o.updateChild(s,n),new t(this.writeTree_.set(i,o))}var a=new pe(n);return new t(this.writeTree_.setTree(e,a))},t.prototype.addWrites=function(t,e){var n=this;return R(e,(function(e,r){n=n.addWrite(t.child(e),r)})),n},t.prototype.removeWrite=function(e){return e.isEmpty()?t.Empty:new t(this.writeTree_.setTree(e,pe.Empty))},t.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},t.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(K.relativePath(e.path,t)):null},t.prototype.getCompleteChildren=function(){var t=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(At,(function(e,n){t.push(new Ct(e,n))})):this.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new Ct(e,n.value))})),t},t.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var n=this.getCompleteNode(e);return new t(null!=n?new pe(n):this.writeTree_.subtree(e))},t.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},t.prototype.apply=function(t){return function t(e,n,r){if(null!=n.value)return r.updateChild(e,n.value);var i=null;return n.children.inorderTraversal((function(n,s){".priority"===n?(Object(o.d)(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):r=t(e.child(n),s,r)})),r.getChild(e).isEmpty()||null===i||(r=r.updateChild(e.child(".priority"),i)),r}(K.Empty,this.writeTree_,t)},t.Empty=new t(new pe(null)),t}(),Ne=function(){function t(){this.visibleWrites_=Ae.Empty,this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new ke(t,this)},t.prototype.addOverwrite=function(t,e,n,r){Object(o.d)(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){Object(o.d)(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex((function(e){return e.writeId===t}));Object(o.d)(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,s=!1,a=this.allWrites_.length-1;i&&a>=0;){var u=this.allWrites_[a];u.visible&&(a>=n&&this.recordContainsPath_(u,r.path)?i=!1:r.path.contains(u.path)&&(s=!0)),a--}return!!i&&(s?(this.resetTree_(),!0):(r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):R(r.children,(function(t){e.visibleWrites_=e.visibleWrites_.removeWrite(r.path.child(t))})),!0))},t.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var o=this.visibleWrites_.childCompoundWrite(e);return!i&&o.isEmpty()?n:i||null!=n||o.hasCompleteWrite(K.Empty)?t.layerTree_(this.allWrites_,(function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))}),e).apply(n||Ht.EMPTY_NODE):null}var s=this.visibleWrites_.getCompleteNode(e);if(null!=s)return s;var a=this.visibleWrites_.childCompoundWrite(e);return a.isEmpty()?n:null!=n||a.hasCompleteWrite(K.Empty)?a.apply(n||Ht.EMPTY_NODE):null},t.prototype.calcCompleteEventChildren=function(t,e){var n=Ht.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(t);if(r)return r.isLeafNode()||r.forEachChild(At,(function(t,e){n=n.updateImmediateChild(t,e)})),n;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(At,(function(t,e){var r=i.childCompoundWrite(new K(t)).apply(e);n=n.updateImmediateChild(t,r)})),i.getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){Object(o.d)(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var s=this.visibleWrites_.childCompoundWrite(i);return s.isEmpty()?r.getChild(e):s.apply(r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=this.visibleWrites_.childCompoundWrite(t),u=a.getCompleteNode(K.Empty);if(null!=u)s=u;else{if(null==e)return[];s=a.apply(e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],l=o.getCompare(),h=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),f=h.getNext();f&&c.length<r;)0!==l(f,n)&&c.push(f),f=h.getNext();return c},t.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,K.Empty),this.lastWriteId_=this.allWrites_.length>0?this.allWrites_[this.allWrites_.length-1].writeId:-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var r=Ae.Empty,i=0;i<t.length;++i){var s=t[i];if(e(s)){var a=s.path,u=void 0;if(s.snap)n.contains(a)?(u=K.relativePath(n,a),r=r.addWrite(u,s.snap)):a.contains(n)&&(u=K.relativePath(a,n),r=r.addWrite(K.Empty,s.snap.getChild(u)));else{if(!s.children)throw Object(o.e)("WriteRecord should have .snap or .children");if(n.contains(a))u=K.relativePath(n,a),r=r.addWrites(u,s.children);else if(a.contains(n))if((u=K.relativePath(a,n)).isEmpty())r=r.addWrites(K.Empty,s.children);else{var c=Object(o.C)(s.children,u.getFront());if(c){var l=c.getChild(u.popFront());r=r.addWrite(K.Empty,l)}}}}}return r},t}(),ke=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}(),Re=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=pe.Empty,this.pendingWriteTree_=new Ne,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new ge(fe.User,t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=pe.fromObject(e);return this.applyOperationToSyncPoints_(new ve(fe.User,t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=pe.Empty;return null!=n.snap?r=r.set(K.Empty,!0):R(n.children,(function(t,e){r=r.set(new K(t),e)})),this.applyOperationToSyncPoints_(new de(n.path,r,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new ge(fe.Server,t,e))},t.prototype.applyServerMerge=function(t,e){var n=pe.fromObject(e);return this.applyOperationToSyncPoints_(new ve(fe.Server,t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new ye(fe.Server,t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=K.relativePath(s,e),c=new ge(fe.forServerTaggedQuery(a),u,n);return this.applyTaggedOperation_(s,c)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=K.relativePath(s,e),c=pe.fromObject(n),l=new ve(fe.forServerTaggedQuery(a),u,c);return this.applyTaggedOperation_(s,l)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,s=i.queryId,a=K.relativePath(o,e),u=new ye(fe.forServerTaggedQuery(s),a);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,i=null,s=!1;this.syncPointTree_.foreachOnPath(r,(function(t,e){var n=K.relativePath(t,r);i=i||e.getCompleteServerCache(n),s=s||e.hasCompleteView()}));var a,u=this.syncPointTree_.get(r);u?(s=s||u.hasCompleteView(),i=i||u.getCompleteServerCache(K.Empty)):(u=new je,this.syncPointTree_=this.syncPointTree_.set(r,u)),null!=i?a=!0:(a=!1,i=Ht.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild((function(t,e){var n=e.getCompleteServerCache(K.Empty);n&&(i=i.updateImmediateChild(t,n))})));var c=u.viewExistsForQuery(e);if(!c&&!e.getQueryParams().loadsAllData()){var l=t.makeQueryKey_(e);Object(o.d)(!this.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=t.getNextQueryTag_();this.queryToTagMap.set(l,h),this.tagToQueryMap.set(h,l)}var f=this.pendingWriteTree_.childWrites(r),d=u.addEventRegistration(e,n,f,i,a);if(!c&&!s){var p=u.viewForQuery(e);d=d.concat(this.setupListener_(e,p))}return d},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,s=this.syncPointTree_.get(o),a=[];if(s&&("default"===e.queryIdentifier()||s.viewExistsForQuery(e))){var u=s.removeEventRegistration(e,n,r);s.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;a=u.events;var l=-1!==c.findIndex((function(t){return t.getQueryParams().loadsAllData()})),h=this.syncPointTree_.findOnPath(o,(function(t,e){return e.hasCompleteView()}));if(l&&!h){var f=this.syncPointTree_.subtree(o);if(!f.isEmpty())for(var d=this.collectDistinctViewsForSubTree_(f),p=0;p<d.length;++p){var y=d[p],g=y.getQuery(),v=this.createListenerForView_(y);this.listenProvider_.startListening(t.queryForListening_(g),this.tagForQuery_(g),v.hashFn,v.onComplete)}}!h&&c.length>0&&!r&&(l?this.listenProvider_.stopListening(t.queryForListening_(e),null):c.forEach((function(e){var n=i.queryToTagMap.get(t.makeQueryKey_(e));i.listenProvider_.stopListening(t.queryForListening_(e),n)}))),this.removeTags_(c)}return a},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(t,(function(e,n){var r=K.relativePath(e,t),i=n.getCompleteServerCache(r);if(i)return i}));return n.calcCompleteEventCache(t,r,e,!0)},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold((function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),R(n,(function(t,e){r=r.concat(e)})),r}))},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(o)}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var r=e.path,i=this.tagForQuery_(e),s=this.createListenerForView_(n),a=this.listenProvider_.startListening(t.queryForListening_(e),i,s.hashFn,s.onComplete),u=this.syncPointTree_.subtree(r);if(i)Object(o.d)(!u.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold((function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map((function(t){return t.getQuery()})))),R(n,(function(t,e){r=r.concat(e)})),r})),l=0;l<c.length;++l){var h=c[l];this.listenProvider_.stopListening(t.queryForListening_(h),this.tagForQuery_(h))}return a},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||Ht.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,n);return e.removeEventRegistration(n,null,i)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return Object(o.d)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new K(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return this.queryToTagMap.get(n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);Object(o.d)(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(K.Empty))},t.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(K.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(K.Empty));var o=[],s=t.path.getFront(),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=r.child(s);o=o.concat(this.applyOperationHelper_(a,u,c,l))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get(K.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(K.Empty));var s=[];return e.children.inorderTraversal((function(e,o){var a=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(s=s.concat(i.applyOperationDescendantsHelper_(c,o,a,u)))})),o&&(s=s.concat(o.applyOperation(t,r,n))),s},t.nextQueryTag_=1,t}(),Pe=function(){function t(){this.rootNode_=Ht.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),De=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(o.h)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(o.j)(this.counters_)},t}(),Le=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new De),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),Fe=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(i.a)({},t);return this.last_&&R(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),Me=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Fe(t);var n=1e4+2e4*Math.random();$(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;R(e,(function(e,i){i>0&&Object(o.h)(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),$(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Ue=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new Ve(i)),e.add(r)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.equals(t)}))},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.contains(t)||t.contains(e)}))},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},t}(),Ve=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();v&&_("event: "+e.toString()),Q(n)}}},t.prototype.getPath=function(){return this.path_},t}(),qe=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(o.d)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(i.f)(this.listeners_[t]),o=0;o<r.length;o++)r[o].callback.apply(r[o].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(o.d)(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),He=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))}),!1),r}return Object(i.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.d)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(qe),Be=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(o.t)()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return Object(i.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.d)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(qe),ze=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&Q((function(){n.onMessage_(t[e])}))},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),We="start",Ge="close",Qe=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=w(t),this.stats_=Le.getCollection(e),this.urlFn=function(t){return e.connectionURL(Z,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new ze(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if(Object(o.v)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new $e((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(i.e)(t,5),o=r[0],s=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,o===We)n.id=s,n.password=a;else{if(o!==Ge)throw new Error("Unrecognized command received: "+o);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(i.e)(t,2),o=r[0],s=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(o,s)}),(function(){n.onClosed_()}),n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(J)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(Object(o.v)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(o.F)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(o.g)(e),r=k(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(o.v)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(o.F)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),$e=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(o.v)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=p(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){_("frame writing exception"),u.stack&&_(u.stack),_(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||_("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(i),r()}))},t.prototype.addTag=function(t,e){var n=this;Object(o.v)()?this.doNodeLongPoll(t,e):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){_("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))},t}(),Ke="";function Ye(t){Ke=t}var Je=null;"undefined"!=typeof MozWebSocket?Je=MozWebSocket:"undefined"!=typeof WebSocket&&(Je=WebSocket);var Xe=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=w(this.connId),this.stats_=Le.getCollection(n),this.connURL=t.connectionURL_(n,i,o),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n){var r={v:"5"};return!Object(o.v)()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(J)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL(X,r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,h.set("previous_websocket_failure",!0);try{if(Object(o.v)()){var r={headers:{"User-Agent":"Firebase/5/"+Ke+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}},i=process.env,s=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;s&&(r.proxy={origin:s}),this.mySock=new Je(this.connURL,[],r)}else this.mySock=new Je(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||""}})}catch(u){this.log_("Error instantiating WebSocket.");var a=u.message||u.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Je&&!t.forceDisallow_},t.previouslyFailed=function(){return h.isInMemoryStorage||!0===h.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){h.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(o.z)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Object(o.d)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Object(o.F)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=k(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),Ze=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[Qe,Xe]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,o=Xe&&Xe.isAvailable(),s=o&&!Xe.previouslyFailed();if(e.webSocketOnly&&(o||O("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Xe];else{var a=this.transports_=[];try{for(var u=Object(i.h)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),tn=function(){function t(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=w("c:"+this.id+":"),this.transportManager_=new Ze(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=$((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=A("t",t),n=A("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=A("t",t),n=A("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=A("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?E("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):E("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&O("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),$((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):$((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(h.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),en=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),nn=1e3,rn=function(t){function e(n,r,i,s,a,u,c){var l=t.call(this)||this;if(l.repoInfo_=n,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=s,l.onServerInfoUpdate_=a,l.authTokenProvider_=u,l.authOverride_=c,l.id=e.nextPersistentConnectionId_++,l.log_=w("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=nn,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Object(o.v)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return l.scheduleConnect_(0),He.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&Be.getInstance().on("online",l.onOnline_,l),l}return Object(i.c)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(Object(o.F)(i)),Object(o.d)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this,n=new o.a,r={p:t.path.toString(),q:t.queryObject()},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var t=e.outstandingGets_[s];void 0!==t&&i===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),s=t.path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),Object(o.d)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Object(o.d)(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,(function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r.queryObject(),s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,(function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(o.h)(t,"w")){var n=Object(o.C)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();O("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(o.n)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(o.y)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))}))}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),Object(o.d)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t.s,t.d)}),Math.floor(0))}))},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(o.F)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):E("Unrecognized action received from server: "+Object(o.F)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(o.d)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=nn,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=nn,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=nn),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){var t=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+e.nextConnectionId_++,a=this,u=this.lastSessionId,c=!1,l=null,h=function(){l?l.close():(c=!0,i())};this.realtime_={close:h,sendRequest:function(t){Object(o.d)(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(t)}};var f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(f).then((function(t){c?_("getToken() completed but was canceled"):(_("getToken() completed. Creating connection."),a.authToken_=t&&t.accessToken,l=new tn(s,a.repoInfo_,a.applicationId_,n,r,i,(function(t){O(t+" ("+a.repoInfo_.toString()+")"),a.interrupt("server_kill")}),u))})).then(null,(function(e){a.log_("Failed to get token: "+e),c||(t.repoInfo_.nodeAdmin&&O(e),h())}))}},e.prototype.interrupt=function(t){_("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){_("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(o.r)(this.interruptReasons_)&&(this.reconnectDelay_=nn,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return N(t)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new K(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){_("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var o=Object(i.h)(this.listens.values()),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(f){n={error:f}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(d){t={error:d}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(o.v)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+Ke.replace(/\./g,"-")]=1,Object(o.t)()?t["framework.cordova"]=1:Object(o.w)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=Be.getInstance().currentlyOnline();return Object(o.r)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(en),on=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=w("p:rest:"),i.listens_={},i}return Object(i.c)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(o.d)(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var s=this,a=t.path.toString();this.log_("Listen called for "+a+" "+t.queryIdentifier());var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(a+".json",l,(function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,r),Object(o.C)(s.listens_,u)===c&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=t.getQueryParams().toRestQueryStringParameters(),r=t.path.toString(),i=new o.a;return this.restRequest_(r+".json",n,(function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))})),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then((function(i){var s=i&&i.accessToken;s&&(e.auth=s);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(o.B)(e);r.log_("Sending REST request for "+a);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_("REST Response for "+a+" received. status:",u.status,"response:",u.responseText);var t=null;if(u.status>=200&&u.status<300){try{t=Object(o.z)(u.responseText)}catch(e){O("Failed to parse JSON response for "+a+": "+u.responseText)}n(null,t)}else 401!==u.status&&404!==u.status&&O("Got unsuccessful REST response for "+a+" Status: "+u.status),n(u.status);n=null}},u.open("GET",a,!0),u.send()}))},e}(en),sn="repo_interrupt",an=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ue,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new le,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.start=function(){var t=this;if(this.stats_=Le.getCollection(this.repoInfo_),this.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new on(this.repoInfo_,this.onDataUpdate_.bind(this),this.authTokenProvider_),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var e=this.app.options.databaseAuthVariableOverride;if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(o.F)(e)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}this.persistentConnection_=new rn(this.repoInfo_,this.app.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),this.authTokenProvider_,e),this.server_=this.persistentConnection_}this.authTokenProvider_.addTokenChangeListener((function(e){t.server_.refreshAuthToken(e)})),this.statsReporter_=Le.getOrCreateReporter(this.repoInfo_,(function(){return new Me(t.stats_,t.server_)})),this.transactionsInit_(),this.infoData_=new Pe,this.infoSyncTree_=new Re({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e.path);return s.isEmpty()||(o=t.infoSyncTree_.applyServerOverwrite(e.path,s),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new Re({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,(function(n,r){var o=i(n,r);t.eventQueue_.raiseEventsForChangedPath(e.path,o)})),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})},t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new K(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new K(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var s=[];if(r)if(n){var a=Object(o.A)(e,(function(t){return zt(t)}));s=this.serverSyncTree_.applyTaggedQueryMerge(i,a,r)}else{var u=zt(e);s=this.serverSyncTree_.applyTaggedQueryOverwrite(i,u,r)}else if(n){var c=Object(o.A)(e,(function(t){return zt(t)}));s=this.serverSyncTree_.applyServerMerge(i,c)}else{var l=zt(e);s=this.serverSyncTree_.applyServerOverwrite(i,l)}var h=i;s.length>0&&(h=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(h,s)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;R(t,(function(t,n){e.updateInfo_(t,n)}))},t.prototype.updateInfo_=function(t,e){var n=new K("/.info/"+t),r=zt(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.getValue=function(t){var e=this;return this.server_.get(t).then((function(n){var r=zt(n),i=e.serverSyncTree_.applyServerOverwrite(t.path,r);return e.eventQueue_.raiseEventsAtPath(t.path,i),Promise.resolve(new $t(r,t.getRef(),t.getQueryParams().getIndex()))}),(function(n){e.log_("get for query "+Object(o.F)(t)+" falling back to cache after error: "+n);var r=e.serverSyncTree_.calcCompleteEventCache(t.path);return r.isEmpty()?Promise.reject(new Error(n)):Promise.resolve(new $t(r,t.getRef(),t.getQueryParams().getIndex()))}))},t.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),s=zt(e,n),a=this.serverSyncTree_.calcCompleteEventCache(t),u=se(s,a,o),c=this.getNextWriteId_(),l=this.serverSyncTree_.applyUserOverwrite(t,u,c,!0);this.eventQueue_.queueEvents(l),this.server_.put(t.toString(),s.val(!0),(function(e,n){var o="ok"===e;o||O("set at "+t+" failed: "+e);var s=i.serverSyncTree_.ackUserWrite(c,!o);i.eventQueue_.raiseEventsForChangedPath(t,s),i.callOnCompleteCallback(r,e,n)}));var h=this.abortTransactions_(t);this.rerunTransactions_(h),this.eventQueue_.raiseEventsForChangedPath(h,[])},t.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),s={};if(R(e,(function(e,n){i=!1,s[e]=oe(t.child(e),zt(n),r.serverSyncTree_,o)})),i)_("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var a=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,s,a);this.eventQueue_.queueEvents(u),this.server_.merge(t.toString(),e,(function(e,i){var o="ok"===e;o||O("update at "+t+" failed: "+e);var s=r.serverSyncTree_.ackUserWrite(a,!o),u=s.length>0?r.rerunTransactions_(t):t;r.eventQueue_.raiseEventsForChangedPath(u,s),r.callOnCompleteCallback(n,e,i)})),R(e,(function(e){var n=r.abortTransactions_(t.child(e));r.rerunTransactions_(n)})),this.eventQueue_.raiseEventsForChangedPath(t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=new le;this.onDisconnect_.forEachTree(K.Empty,(function(r,i){var o=oe(r,i,t.serverSyncTree_,e);n.remember(r,o)}));var r=[];n.forEachTree(K.Empty,(function(e,n){r=r.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var i=t.abortTransactions_(e);t.rerunTransactions_(i)})),this.onDisconnect_=new le,this.eventQueue_.raiseEventsForChangedPath(K.Empty,r)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)}))},t.prototype.onDisconnectSet=function(t,e,n){var r=this,i=zt(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),(function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)}))},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=zt(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),(function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)}))},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if(Object(o.r)(e))return _("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,(function(i,o){"ok"===i&&R(e,(function(e,n){var i=zt(n);r.onDisconnect_.remember(t.child(e),i)})),r.callOnCompleteCallback(n,i,o)}))},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(sn)},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(sn)},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new Fe(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce((function(t,e){return Math.max(e.length,t)}),0);R(e,(function(t,e){for(var r=t,i=t.length;i<n+2;i++)r+=" ";console.log(r+e)}))}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),_.apply(void 0,Object(i.f)([n],t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&Q((function(){if("ok"===e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}}))},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new bn(this))},enumerable:!1,configurable:!0}),t}(),un=function(){function t(e){this.indexedFilter_=new we(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Ct(e,n))||(n=Ht.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Ht.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(Ht.EMPTY_NODE);var i=this;return e.forEachChild(At,(function(t,e){i.matches(new Ct(t,e))||(r=r.updateImmediateChild(t,Ht.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),cn=function(){function t(t){this.rangedFilter_=new un(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Ct(e,n))||(n=Ht.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=Ht.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=Ht.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(Ht.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,Ht.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var u=t;Object(o.d)(u.numChildren()===this.limit_,"");var c=new Ct(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var f=u.getImmediateChild(e),d=r.getChildAfterChild(this.index_,l,this.reverse_);null!=d&&(d.name===e||u.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);var p=null==d?1:s(d,c);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(_e.childChangedChange(e,n,f)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(_e.childRemovedChange(e,f));var y=u.updateImmediateChild(e,Ht.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=i&&i.trackChildChange(_e.childAddedChange(d.name,d.node)),y.updateImmediateChild(d.name,d.node)):y}return n.isEmpty()?t:h&&s(l,c)>=0?(null!=i&&(i.trackChildChange(_e.childRemovedChange(l.name,l.node)),i.trackChildChange(_e.childAddedChange(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,Ht.EMPTY_NODE)):t},t}(),ln=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=At}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return Object(o.d)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(o.d)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:I},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(o.d)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(o.d)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:S},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(o.d)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},t.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},t.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=r}return this.index_!==At&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===At},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new we(this.getIndex()):this.hasLimit()?new cn(this):new un(this)},t.prototype.toRestQueryStringParameters=function(){var e,n=t.REST_QUERY_CONSTANTS_,r={};return this.isDefault()||(this.index_===At?e=n.PRIORITY_INDEX:this.index_===Gt?e=n.VALUE_INDEX:this.index_===It?e=n.KEY_INDEX:(Object(o.d)(this.index_ instanceof Qt,"Unrecognized index type!"),e=this.index_.toString()),r[n.ORDER_BY]=Object(o.F)(e),this.startSet_&&(r[n.START_AT]=Object(o.F)(this.indexStartValue_),this.startNameSet_&&(r[n.START_AT]+=","+Object(o.F)(this.indexStartName_))),this.endSet_&&(r[n.END_AT]=Object(o.F)(this.indexEndValue_),this.endNameSet_&&(r[n.END_AT]+=","+Object(o.F)(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?r[n.LIMIT_TO_FIRST]=this.limit_:r[n.LIMIT_TO_LAST]=this.limit_)),r},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},t.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},t.DEFAULT=new t,t}(),hn=function(t){function e(e,n){if(!(e instanceof an))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,ln.DEFAULT,!1)||this}return Object(i.c)(e,t),e.prototype.getKey=function(){return Object(o.G)("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return Object(o.G)("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof K||(null===this.path.getFront()?gt("Reference.child",1,t,!1):yt("Reference.child",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){Object(o.G)("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){Object(o.G)("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){Object(o.G)("Reference.set",1,2,arguments.length),vt("Reference.set",this.path),ct("Reference.set",1,t,this.path,!1),Object(o.H)("Reference.set",2,e,!0);var n=new o.a;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(Object(o.G)("Reference.update",1,2,arguments.length),vt("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,O("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ht("Reference.update",1,t,this.path,!1),Object(o.H)("Reference.update",2,e,!0);var i=new o.a;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(Object(o.G)("Reference.setWithPriority",2,3,arguments.length),vt("Reference.setWithPriority",this.path),ct("Reference.setWithPriority",1,t,this.path,!1),ft("Reference.setWithPriority",2,e,!1),Object(o.H)("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new o.a;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return Object(o.G)("Reference.remove",0,1,arguments.length),vt("Reference.remove",this.path),Object(o.H)("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(Object(o.G)("Reference.transaction",1,3,arguments.length),vt("Reference.transaction",this.path),Object(o.H)("Reference.transaction",1,t,!1),Object(o.H)("Reference.transaction",2,e,!0),bt("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new o.a;"function"==typeof e&&r.promise.catch((function(){}));var i=function(t,n,i){t?r.reject(t):r.resolve(new wt(n,i)),"function"==typeof e&&e(t,n,i)};return this.repo.startTransaction(this.path,t,i,n),r.promise},e.prototype.setPriority=function(t,e){Object(o.G)("Reference.setPriority",1,2,arguments.length),vt("Reference.setPriority",this.path),ft("Reference.setPriority",1,t,!1),Object(o.H)("Reference.setPriority",2,e,!0);var n=new o.a;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){Object(o.G)("Reference.push",0,2,arguments.length),vt("Reference.push",this.path),ct("Reference.push",1,t,this.path,!0),Object(o.H)("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=Et(r),s=this.child(i),a=this.child(i);return n=null!=t?s.set(t,e).then((function(){return a})):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch((function(){})),s},e.prototype.onDisconnect=function(){return vt("Reference.onDisconnect",this.path),new _t(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Zt);Zt.__referenceConstructor=hn,je.__referenceConstructor=hn;var fn=function(){return function(){this.children={},this.childCount=0,this.value=null}}(),dn=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new fn),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n=e instanceof K?e:new K(e),r=this,i=n.getFront();null!==i;)r=new t(i,r,Object(o.C)(r.node_.children,i)||new fn),i=(n=n.popFront()).getFront();return r},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){Object(o.d)(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;R(this.node_.children,(function(r,i){e(new t(r,n,i))}))},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild((function(e){e.forEachDescendant(t,!0,n)})),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild((function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)}))},t.prototype.path=function(){return new K(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=Object(o.h)(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}(),pn=function(t){return t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT",t}({});an.MAX_TRANSACTION_RETRIES_=25,an.prototype.transactionsInit_=function(){this.transactionQueueTree_=new dn},an.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},s=new hn(this,t);s.on("value",i);var a={path:t,update:e,onComplete:n,status:null,order:p(),applyLocally:r,retryCount:0,unwatcher:function(){s.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=this.getLatestState_(t);a.currentInputSnapshot=u;var c=a.update(u.val());if(void 0===c){if(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete){var l=new $t(a.currentInputSnapshot,new hn(this,a.path),At);a.onComplete(null,!1,l)}}else{lt("transaction failed: Data returned ",c,a.path),a.status=pn.RUN;var h=this.transactionQueueTree_.subTree(t),f=h.getValue()||[];f.push(a),h.setValue(f);var d=void 0;"object"==typeof c&&null!==c&&Object(o.h)(c,".priority")?(d=Object(o.C)(c,".priority"),Object(o.d)(ut(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):d=(this.serverSyncTree_.calcCompleteEventCache(t)||Ht.EMPTY_NODE).getPriority().val(),d=d;var y=this.generateServerValues(),g=zt(c,d),v=se(g,u,y);a.currentOutputSnapshotRaw=g,a.currentOutputSnapshotResolved=v,a.currentWriteId=this.getNextWriteId_();var m=this.serverSyncTree_.applyUserOverwrite(t,v,a.currentWriteId,a.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,m),this.sendReadyTransactions_()}},an.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||Ht.EMPTY_NODE},an.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);Object(o.d)(n.length>0,"Sending zero length transaction queue"),n.every((function(t){return t.status===pn.RUN}))&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild((function(t){e.sendReadyTransactions_(t)}))},an.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map((function(t){return t.currentWriteId})),i=this.getLatestState_(t,r),s=i,a=i.hash(),u=0;u<e.length;u++){var c=e[u];Object(o.d)(c.status===pn.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=pn.SENT,c.retryCount++;var l=K.relativePath(t,c.path);s=s.updateChild(l,c.currentOutputSnapshotRaw)}var h=s.val(!0),f=t;this.server_.put(f.toString(),h,(function(r){n.log_("transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=0;s<e.length;s++){if(e[s].status=pn.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[s].currentWriteId)),e[s].onComplete){var a=e[s].currentOutputSnapshotResolved,u=new hn(n,e[s].path),c=new $t(a,u,At);o.push(e[s].onComplete.bind(null,null,!0,c))}e[s].unwatcher()}for(n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,i),s=0;s<o.length;s++)Q(o[s])}else{if("datastale"===r)for(s=0;s<e.length;s++)e[s].status=e[s].status===pn.SENT_NEEDS_ABORT?pn.NEEDS_ABORT:pn.RUN;else for(O("transaction at "+f.toString()+" failed: "+r),s=0;s<e.length;s++)e[s].status=pn.NEEDS_ABORT,e[s].abortReason=r;n.rerunTransactions_(t)}}),a)},an.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},an.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n=[],r=[],i=t.filter((function(t){return t.status===pn.RUN})).map((function(t){return t.currentWriteId})),s=0;s<t.length;s++){var a=t[s],u=K.relativePath(e,a.path),c=!1,l=void 0;if(Object(o.d)(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===pn.NEEDS_ABORT)c=!0,l=a.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else if(a.status===pn.RUN)if(a.retryCount>=an.MAX_TRANSACTION_RETRIES_)c=!0,l="maxretry",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else{var h=this.getLatestState_(a.path,i);a.currentInputSnapshot=h;var f=t[s].update(h.val());if(void 0!==f){lt("transaction failed: Data returned ",f,a.path);var d=zt(f);"object"==typeof f&&null!=f&&Object(o.h)(f,".priority")||(d=d.updatePriority(h.getPriority()));var p=a.currentWriteId,y=this.generateServerValues(),g=se(d,h,y);a.currentOutputSnapshotRaw=d,a.currentOutputSnapshotResolved=g,a.currentWriteId=this.getNextWriteId_(),i.splice(i.indexOf(p),1),r=(r=r.concat(this.serverSyncTree_.applyUserOverwrite(a.path,g,a.currentWriteId,a.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(p,!0))}else c=!0,l="nodata",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,r),r=[],c&&(t[s].status=pn.COMPLETED,setTimeout(t[s].unwatcher,Math.floor(0)),t[s].onComplete))if("nodata"===l){var v=new hn(this,t[s].path),m=new $t(t[s].currentInputSnapshot,v,At);n.push(t[s].onComplete.bind(null,null,!1,m))}else n.push(t[s].onComplete.bind(null,new Error(l),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),s=0;s<n.length;s++)Q(n[s]);this.sendReadyTransactions_()}},an.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=t.getFront();null!==e&&null===n.getValue();)n=n.subTree(e),e=(t=t.popFront()).getFront();return n},an.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort((function(t,e){return t.order-e.order})),e},an.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild((function(t){n.aggregateTransactionQueuesForNode_(t,e)}))},an.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==pn.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild((function(t){e.pruneCompletedTransactionsBelowNode_(t)}))},an.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor((function(t){e.abortTransactionsOnNode_(t)})),this.abortTransactionsOnNode_(r),r.forEachDescendant((function(t){e.abortTransactionsOnNode_(t)})),n},an.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,s=0;s<e.length;s++)e[s].status===pn.SENT_NEEDS_ABORT||(e[s].status===pn.SENT?(Object(o.d)(i===s-1,"All SENT items should be at beginning of queue."),i=s,e[s].status=pn.SENT_NEEDS_ABORT,e[s].abortReason="set"):(Object(o.d)(e[s].status===pn.RUN,"Unexpected transaction status in abort"),e[s].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[s].currentWriteId,!0)),e[s].onComplete&&n.push(e[s].onComplete.bind(null,new Error("set"),!1,null))));for(-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r),s=0;s<n.length;s++)Q(n[s])}};var yn,gn=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then((function(t){return n.auth_=t}))}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(_("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout((function(){return t(null)}),0),this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)})))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';O(t+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),vn=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),mn=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return yn||(yn=new t),yn},t.prototype.interrupt=function(){var t,e,n,r;try{for(var o=Object(i.h)(Object.keys(this.repos_)),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(Object.keys(this.repos_[a]))),c=u.next();!c.done;c=u.next())this.repos_[a][c.value].interrupt()}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.resume=function(){var t,e,n,r;try{for(var o=Object(i.h)(Object.keys(this.repos_)),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(Object.keys(this.repos_[a]))),c=u.next();!c.done;c=u.next())this.repos_[a][c.value].resume()}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.applyEmulatorSettings=function(t,e,n){t.repoInfo_=new tt(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new vn)},t.prototype.databaseFromApp=function(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||C("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var o,s=et(i,r),a=s.repoInfo,u=void 0;"undefined"!=typeof process&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(o=!0,a=(s=et(i="http://"+u+"?ns="+a.namespace,r)).repoInfo):o=!s.repoInfo.secure;var c=r&&o?new vn:new gn(t,e);return mt("Invalid Firebase Database URL",1,s),s.path.isEmpty()||C("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(a,t,c).database},t.prototype.deleteRepo=function(t){var e=Object(o.C)(this.repos_,t.app.name);e&&Object(o.C)(e,t.key)===t||C("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.key]},t.prototype.createRepo=function(t,e,n){var r=Object(o.C)(this.repos_,e.name);r||(this.repos_[e.name]=r={});var i=Object(o.C)(r,t.toURLString());return i&&C("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new an(t,this.useRestClient_,e,n),r[t.toURLString()]=i,i},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),bn=function(){function t(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return Object(i.b)(e,void 0,void 0,(function(){return Object(i.d)(this,(function(t){return this.checkDeleted_("delete"),mn.getInstance().deleteRepo(this.repo_),this.repoInternal_=null,this.rootInternal_=null,[2]}))}))}},t instanceof an||C("Don't call new Database() directly - please use firebase.database().")}return Object.defineProperty(t.prototype,"repo_",{get:function(){return this.instanceStarted_||(this.repoInternal_.start(),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new hn(this.repo_,K.Empty)),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.useEmulator=function(t,e){this.checkDeleted_("useEmulator"),this.instanceStarted_?C("Cannot call useEmulator() after instance has already been initialized."):mn.getInstance().applyEmulatorSettings(this.repoInternal_,t,e)},t.prototype.ref=function(t){return this.checkDeleted_("ref"),Object(o.G)("database.ref",0,1,arguments.length),t instanceof hn?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),Object(o.G)(e,1,1,arguments.length);var n=et(t,this.repo_.repoInfo_.nodeAdmin);mt(e,1,n);var r=n.repoInfo;return r.isCustomHost()||r.host===this.repo_.repoInfo_.host||C(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repoInternal_&&C("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){Object(o.G)("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){Object(o.G)("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}(),_n=Object.freeze({__proto__:null,forceLongPolling:function(){Xe.forceDisallow(),Qe.forceAllow()},forceWebSockets:function(){Qe.forceDisallow()},isWebSocketsAvailable:function(){return Xe.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.customAuthImpl,i=t.namespace,o=t.nodeAdmin,s=void 0!==o&&o;Ye(t.version);var u=new a.c("auth-internal",new a.b("database-standalone"));return u.setComponent(new a.a("auth-internal",(function(){return r}),"PRIVATE")),{instance:mn.getInstance().databaseFromApp(e,u,n,s),namespace:i}}}),wn=rn;rn.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},rn.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var En=Object.freeze({__proto__:null,DataConnection:wn,RealTimeConnection:tn,hijackHash:function(t){var e=rn.prototype.put;return rn.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){rn.prototype.put=e}},ConnectionTarget:tt,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){mn.getInstance().forceRestClient(t)}}),Cn=bn.ServerValue;!function(e){Ye(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new a.a("database",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return mn.getInstance().databaseFromApp(n,r,e)}),"PUBLIC").setServiceProps({Reference:hn,Query:Zt,Database:bn,DataSnapshot:$t,enableLogging:b,INTERNAL:_n,ServerValue:Cn,TEST_ACCESS:En}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.8.1"),Object(o.v)()&&(t.exports=n)}(r.a)}).call(this,n("3UD+")(t))},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.a](),r.add(e.schedule((function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())})))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("3N8a");const i=new(n("IjjT").a)(r.a)},DH7j:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EY2u:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("SpAZ"),u=n("2fFW");let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.a:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",(function(){return r.a})),r.a.registerVersion("firebase","8.2.0","app")},LRne:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",(function(){return i}));const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",(function(){return r}))},SeVD:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",(function(){return r}))},VRyK:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},XNiG:function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return l}));var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",(function(){return r}))},Ylt2:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},bHdf:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",(function(){return r}))},fXoL:function(t,e,n){"use strict";n.d(e,"a",(function(){return Bi})),n.d(e,"b",(function(){return Ds})),n.d(e,"c",(function(){return As})),n.d(e,"d",(function(){return xs})),n.d(e,"e",(function(){return js})),n.d(e,"f",(function(){return Ta})),n.d(e,"g",(function(){return ya})),n.d(e,"h",(function(){return Ii})),n.d(e,"i",(function(){return Gs})),n.d(e,"j",(function(){return yo})),n.d(e,"k",(function(){return Ms})),n.d(e,"l",(function(){return go})),n.d(e,"m",(function(){return fn})),n.d(e,"n",(function(){return fs})),n.d(e,"o",(function(){return W})),n.d(e,"p",(function(){return h})),n.d(e,"q",(function(){return z})),n.d(e,"r",(function(){return Hi})),n.d(e,"s",(function(){return Do})),n.d(e,"t",(function(){return Lo})),n.d(e,"u",(function(){return Fs})),n.d(e,"v",(function(){return st})),n.d(e,"w",(function(){return va})),n.d(e,"x",(function(){return ot})),n.d(e,"y",(function(){return la})),n.d(e,"z",(function(){return Ks})),n.d(e,"A",(function(){return f})),n.d(e,"B",(function(){return Ps})),n.d(e,"C",(function(){return Rs})),n.d(e,"D",(function(){return _o})),n.d(e,"E",(function(){return mo})),n.d(e,"F",(function(){return bo})),n.d(e,"G",(function(){return Eo})),n.d(e,"H",(function(){return tr})),n.d(e,"I",(function(){return p})),n.d(e,"J",(function(){return _a})),n.d(e,"K",(function(){return Vo})),n.d(e,"L",(function(){return ra})),n.d(e,"M",(function(){return xi})),n.d(e,"N",(function(){return Oo})),n.d(e,"O",(function(){return Co})),n.d(e,"P",(function(){return Ho})),n.d(e,"Q",(function(){return ht})),n.d(e,"R",(function(){return ha})),n.d(e,"S",(function(){return An})),n.d(e,"T",(function(){return jn})),n.d(e,"U",(function(){return Ca})),n.d(e,"V",(function(){return sa})),n.d(e,"W",(function(){return Ls})),n.d(e,"X",(function(){return ji})),n.d(e,"Y",(function(){return is})),n.d(e,"Z",(function(){return Xn})),n.d(e,"ab",(function(){return Dn})),n.d(e,"bb",(function(){return _n})),n.d(e,"cb",(function(){return En})),n.d(e,"db",(function(){return In})),n.d(e,"eb",(function(){return On})),n.d(e,"fb",(function(){return Cn})),n.d(e,"gb",(function(){return Tn})),n.d(e,"hb",(function(){return ts})),n.d(e,"ib",(function(){return Ea})),n.d(e,"jb",(function(){return es})),n.d(e,"kb",(function(){return ns})),n.d(e,"lb",(function(){return wn})),n.d(e,"mb",(function(){return L})),n.d(e,"nb",(function(){return $i})),n.d(e,"ob",(function(){return so})),n.d(e,"pb",(function(){return oo})),n.d(e,"qb",(function(){return Zo})),n.d(e,"rb",(function(){return Bt})),n.d(e,"sb",(function(){return S})),n.d(e,"tb",(function(){return bn})),n.d(e,"ub",(function(){return Ft})),n.d(e,"vb",(function(){return br})),n.d(e,"wb",(function(){return Ji})),n.d(e,"xb",(function(){return Os})),n.d(e,"yb",(function(){return yt})),n.d(e,"zb",(function(){return Et})),n.d(e,"Ab",(function(){return v})),n.d(e,"Bb",(function(){return m})),n.d(e,"Cb",(function(){return bt})),n.d(e,"Db",(function(){return Ct})),n.d(e,"Eb",(function(){return Xi})),n.d(e,"Fb",(function(){return io})),n.d(e,"Gb",(function(){return ro})),n.d(e,"Hb",(function(){return no})),n.d(e,"Ib",(function(){return ho})),n.d(e,"Jb",(function(){return et})),n.d(e,"Kb",(function(){return Zi})),n.d(e,"Lb",(function(){return Ss})),n.d(e,"Mb",(function(){return ao})),n.d(e,"Nb",(function(){return Ts})),n.d(e,"Ob",(function(){return to})),n.d(e,"Pb",(function(){return hs})),n.d(e,"Qb",(function(){return Cs})),n.d(e,"Rb",(function(){return er})),n.d(e,"Sb",(function(){return _t})),n.d(e,"Tb",(function(){return lo}));var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("w1tV");function u(t){return{toString:t}.toString()}const c="__parameters__";function l(t,e,n){return u(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(c)?t[c]:Object.defineProperty(t,c,{value:[]})[c];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}const h=l("Inject",t=>({token:t})),f=l("Optional"),d=l("Self"),p=l("SkipSelf");var y=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function g(t){for(let e in t)if(t[e]===g)return e;throw Error("Could not find renamed property on target object.")}function v(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function m(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function b(t){return _(t,t[E])||_(t,t[T])}function _(t,e){return e&&e.token===t?e:null}function w(t){return t&&(t.hasOwnProperty(C)||t.hasOwnProperty(I))?t[C]:null}const E=g({"\u0275prov":g}),C=g({"\u0275inj":g}),O=g({"\u0275provFallback":g}),T=g({ngInjectableDef:g}),I=g({ngInjectorDef:g});function S(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(S).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function x(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const j=g({__forward_ref__:g});function A(t){return t.__forward_ref__=A,t.toString=function(){return S(this())},t}function N(t){return"function"==typeof(e=t)&&e.hasOwnProperty(j)&&e.__forward_ref__===A?t():t;var e}const k="undefined"!=typeof globalThis&&globalThis,R="undefined"!=typeof window&&window,P="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,D="undefined"!=typeof global&&global,L=k||D||R||P,F=g({"\u0275cmp":g}),M=g({"\u0275dir":g}),U=g({"\u0275pipe":g}),V=g({"\u0275mod":g}),q=g({"\u0275loc":g}),H=g({"\u0275fac":g}),B=g({__NG_ELEMENT_ID__:g});class z{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=v({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return"InjectionToken "+this._desc}}const W=new z("INJECTOR",-1),G={},Q=/\n/gm,$="__source",K=g({provide:String,useValue:g});let Y,J=void 0;function X(t){const e=J;return J=t,e}function Z(t){const e=Y;return Y=t,e}function tt(t,e=y.Default){if(void 0===J)throw new Error("inject() must be called from an injection context");return null===J?nt(t,void 0,e):J.get(t,e&y.Optional?null:void 0,e)}function et(t,e=y.Default){return(Y||tt)(N(t),e)}function nt(t,e,n){const r=b(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&y.Optional)return null;if(void 0!==e)return e;throw new Error(`Injector: NOT_FOUND [${S(t)}]`)}function rt(t){const e=[];for(let n=0;n<t.length;n++){const r=N(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t=void 0,n=y.Default;for(let e=0;e<r.length;e++){const i=r[e];i instanceof f||"Optional"===i.ngMetadataName||i===f?n|=y.Optional:i instanceof p||"SkipSelf"===i.ngMetadataName||i===p?n|=y.SkipSelf:i instanceof d||"Self"===i.ngMetadataName||i===d?n|=y.Self:t=i instanceof h||i===h?i.token:i}e.push(et(t,n))}else e.push(et(r))}return e}class it{get(t,e=G){if(e===G){const e=new Error(`NullInjectorError: No provider for ${S(t)}!`);throw e.name="NullInjectorError",e}return e}}class ot{}class st{}function at(t,e){t.forEach(t=>Array.isArray(t)?at(t,e):e(t))}function ut(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function ct(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}var lt=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),ht=function(t){return t[t.Emulated=0]="Emulated",t[t.Native=1]="Native",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const ft={},dt=[];let pt=0;function yt(t){return u(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===lt.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||dt,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||ht.Emulated,id:"c",styles:t.styles||dt,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=pt++,n.inputs=wt(t.inputs,e),n.outputs=wt(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(gt):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(vt):null,n})}function gt(t){return Ot(t)||function(t){return t[M]||null}(t)}function vt(t){return function(t){return t[U]||null}(t)}const mt={};function bt(t){const e={type:t.type,bootstrap:t.bootstrap||dt,declarations:t.declarations||dt,imports:t.imports||dt,exports:t.exports||dt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&u(()=>{mt[t.id]=t.type}),e}function _t(t,e){return u(()=>{const n=It(t,!0);n.declarations=e.declarations||dt,n.imports=e.imports||dt,n.exports=e.exports||dt})}function wt(t,e){if(null==t)return ft;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const Et=yt;function Ct(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function Ot(t){return t[F]||null}function Tt(t,e){return t.hasOwnProperty(H)?t[H]:null}function It(t,e){const n=t[V]||null;if(!n&&!0===e)throw new Error(`Type ${S(t)} does not have '\u0275mod' property.`);return n}const St=20,xt=10;function jt(t){return Array.isArray(t)&&"object"==typeof t[1]}function At(t){return Array.isArray(t)&&!0===t[1]}function Nt(t){return 0!=(8&t.flags)}function kt(t){return 2==(2&t.flags)}function Rt(t){return 1==(1&t.flags)}function Pt(t){return null!==t.template}function Dt(t){return 0!=(512&t[2])}class Lt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function Ft(){return Mt}function Mt(t){return t.type.prototype.ngOnChanges&&(t.setInput=Vt),Ut}function Ut(){const t=qt(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===ft)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function Vt(t,e,n,r){const i=qt(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:ft,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new Lt(u&&u.currentValue,e,s===ft),t[r]=e}function qt(t){return t.__ngSimpleChanges__||null}Ft.ngInherit=!0;let Ht=void 0;function Bt(t){Ht=t}function zt(t){return!!t.listen}const Wt={createRenderer:(t,e)=>void 0!==Ht?Ht:"undefined"!=typeof document?document:void 0};function Gt(t){for(;Array.isArray(t);)t=t[0];return t}function Qt(t,e){return Gt(e[t.index])}function $t(t,e){return t.data[e+St]}function Kt(t,e){const n=e[t];return jt(n)?n:n[0]}function Yt(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Jt(t){return 4==(4&t[2])}function Xt(t){return 128==(128&t[2])}function Zt(t,e){return null===t||null==e?null:t[e]}function te(t){t[18]=0}function ee(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const ne={lFrame:be(null),bindingsEnabled:!0,checkNoChangesMode:!1};function re(){return ne.bindingsEnabled}function ie(){return ne.lFrame.lView}function oe(){return ne.lFrame.tView}function se(){return ne.lFrame.currentTNode}function ae(t,e){ne.lFrame.currentTNode=t,ne.lFrame.isParent=e}function ue(){return ne.lFrame.isParent}function ce(){return ne.checkNoChangesMode}function le(t){ne.checkNoChangesMode=t}function he(){return ne.lFrame.bindingIndex++}function fe(t,e){const n=ne.lFrame;n.bindingIndex=n.bindingRootIndex=t,de(e)}function de(t){ne.lFrame.currentDirectiveIndex=t}function pe(){return ne.lFrame.currentQueryIndex}function ye(t){ne.lFrame.currentQueryIndex=t}function ge(t,e){const n=me();ne.lFrame=n,n.currentTNode=e,n.lView=t}function ve(t){const e=me(),n=t[1];ne.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex}function me(){const t=ne.lFrame,e=null===t?null:t.child;return null===e?be(t):e}function be(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:0,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null};return null!==t&&(t.child=e),e}function _e(){const t=ne.lFrame;return ne.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const we=_e;function Ee(){const t=_e();t.isParent=!0,t.tView=null,t.selectedIndex=0,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Ce(){return ne.lFrame.selectedIndex}function Oe(t){ne.lFrame.selectedIndex=t}function Te(){const t=ne.lFrame;return $t(t.tView,t.selectedIndex)}function Ie(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function Se(t,e,n){Ae(t,e,3,n)}function xe(t,e,n,r){(3&t[2])===n&&Ae(t,e,n,r)}function je(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function Ae(t,e,n,r){const i=null!=r?r:-1;let o=0;for(let s=void 0!==r?65535&t[18]:0;s<e.length;s++)if("number"==typeof e[s+1]){if(o=e[s],null!=r&&o>=r)break}else e[s]<0&&(t[18]+=65536),(o<i||-1==i)&&(Ne(t,n,e,s),t[18]=(4294901760&t[18])+s+2),s++}function Ne(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(s)):o.call(s)}const ke=-1;class Re{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Pe(t,e,n){const r=zt(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];Le(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function De(t){return 3===t||4===t||6===t}function Le(t){return 64===t.charCodeAt(0)}function Fe(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Me(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Me(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Ue(t){return t!==ke}function Ve(t){return 32767&t}function qe(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}function He(t){return"string"==typeof t?t:null==t?"":""+t}function Be(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():He(t)}const ze=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(L))();function We(t){return t instanceof Function?t():t}let Ge=!0;function Qe(t){const e=Ge;return Ge=t,e}let $e=0;function Ke(t,e){const n=Je(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Ye(r.data,t),Ye(e,null),Ye(r.blueprint,null));const i=Xe(t,e),o=t.injectorIndex;if(Ue(i)){const t=Ve(i),n=qe(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function Ye(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Je(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Xe(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return ke;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return ke}function Ze(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(B)&&(r=n[B]),null==r&&(r=n[B]=$e++);const i=255&r,o=1<<i,s=64&i,a=32&i,u=e.data;128&i?s?a?u[t+7]|=o:u[t+6]|=o:a?u[t+5]|=o:u[t+4]|=o:s?a?u[t+3]|=o:u[t+2]|=o:a?u[t+1]|=o:u[t]|=o}(t,e,n)}function tn(t,e,n,r=y.Default,i){if(null!==t){const i=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(B)?t[B]:void 0;return"number"==typeof e&&e>0?255&e:e}(n);if("function"==typeof i){ge(e,t);try{const t=i();if(null!=t||r&y.Optional)return t;throw new Error(`No provider for ${Be(n)}!`)}finally{we()}}else if("number"==typeof i){if(-1===i)return new un(t,e);let o=null,s=Je(t,e),a=ke,u=r&y.Host?e[16][6]:null;for((-1===s||r&y.SkipSelf)&&(a=-1===s?Xe(t,e):e[s+8],a!==ke&&an(r,!1)?(o=e[1],s=Ve(a),e=qe(a,e)):s=-1);-1!==s;){const t=e[1];if(sn(i,s,t.data)){const t=nn(s,e,n,o,r,u);if(t!==en)return t}a=e[s+8],a!==ke&&an(r,e[1].data[s+8]===u)&&sn(i,s,e)?(o=t,s=Ve(a),e=qe(a,e)):s=-1}}}if(r&y.Optional&&void 0===i&&(i=null),0==(r&(y.Self|y.Host))){const t=e[9],o=Z(void 0);try{return t?t.get(n,i,r&y.Optional):nt(n,i,r&y.Optional)}finally{Z(o)}}if(r&y.Optional)return i;throw new Error(`NodeInjector: NOT_FOUND [${Be(n)}]`)}const en={};function nn(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=rn(a,s,n,null==r?kt(a)&&Ge:r!=s&&2===a.type,i&y.Host&&o===a);return null!==u?on(e,s,u,a):en}function rn(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&Pt(t)&&t.type===n)return u}return null}function on(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof Re){const s=i;if(s.resolving)throw new Error("Circular dep for "+Be(o[n]));const a=Qe(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?Z(s.injectImpl):null;ge(t,r);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=Mt(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&Z(u),Qe(a),s.resolving=!1,we()}}return i}function sn(t,e,n){const r=64&t,i=32&t;let o;return o=128&t?r?i?n[e+7]:n[e+6]:i?n[e+5]:n[e+4]:r?i?n[e+3]:n[e+2]:i?n[e+1]:n[e],!!(o&1<<t)}function an(t,e){return!(t&y.Self||t&y.Host&&e)}class un{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return tn(this._tNode,this._lView,t,void 0,e)}}function cn(t){return t.ngDebugContext}function ln(t){return t.ngOriginalError}function hn(t,...e){t.error(...e)}class fn{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||hn}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?cn(t)?cn(t):this._findContext(ln(t)):null}_findOriginalError(t){let e=ln(t);for(;e&&ln(e);)e=ln(e);return e}}class dn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"}}class pn extends dn{getTypeName(){return"HTML"}}class yn extends dn{getTypeName(){return"Style"}}class gn extends dn{getTypeName(){return"Script"}}class vn extends dn{getTypeName(){return"URL"}}class mn extends dn{getTypeName(){return"ResourceURL"}}function bn(t){return t instanceof dn?t.changingThisBreaksApplicationSecurity:t}function _n(t,e){const n=wn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see http://g.co/ng/security#xss)`)}return n===e}function wn(t){return t instanceof dn&&t.getTypeName()||null}function En(t){return new pn(t)}function Cn(t){return new yn(t)}function On(t){return new gn(t)}function Tn(t){return new vn(t)}function In(t){return new mn(t)}let Sn=!0,xn=!1;function jn(){return xn=!0,Sn}function An(){if(xn)throw new Error("Cannot enable prod mode after platform setup.");Sn=!1}class Nn{getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(t,"text/html").body;return e.removeChild(e.firstChild),e}catch(e){return null}}}class kn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=t,e;const n=this.inertDocument.createElement("body");return n.innerHTML=t,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Rn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Pn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Dn(t){return(t=String(t)).match(Rn)||t.match(Pn)?t:(jn()&&console.warn(`WARNING: sanitizing unsafe URL value ${t} (see http://g.co/ng/security#xss)`),"unsafe:"+t)}function Ln(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Fn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Mn=Ln("area,br,col,hr,img,wbr"),Un=Ln("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Vn=Ln("rp,rt"),qn=Fn(Vn,Un),Hn=Fn(Mn,Fn(Un,Ln("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Fn(Vn,Ln("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),qn),Bn=Ln("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),zn=Ln("srcset"),Wn=Fn(Bn,zn,Ln("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ln("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Gn=Ln("script,style,template");class Qn{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Hn.hasOwnProperty(e))return this.sanitizedSomething=!0,!Gn.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!Wn.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;Bn[o]&&(s=Dn(s)),zn[o]&&(r=s,s=(r=String(r)).split(",").map(t=>Dn(t.trim())).join(", ")),this.buf.push(" ",e,'="',Yn(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Hn.hasOwnProperty(e)&&!Mn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(Yn(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+t.outerHTML);return e}}const $n=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Kn=/([^\#-~ |!])/g;function Yn(t){return t.replace(/&/g,"&amp;").replace($n,(function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"})).replace(Kn,(function(t){return"&#"+t.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Jn;function Xn(t,e){let n=null;try{Jn=Jn||function(t){return function(){try{return!!(new window.DOMParser).parseFromString("","text/html")}catch(t){return!1}}()?new Nn:new kn(t)}(t);let r=e?String(e):"";n=Jn.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=Jn.getInertBodyElement(r)}while(r!==o);const s=new Qn,a=s.sanitizeChildren(Zn(n)||n);return jn()&&s.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),a}finally{if(n){const t=Zn(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function Zn(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var tr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function er(t){const e=function(){const t=ie();return t&&t[12]}();return e?e.sanitize(tr.URL,t)||"":_n(t,"URL")?bn(t):Dn(He(t))}function nr(t,e){t.__ngContext__=e}function rr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const ir="ng-template";function or(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==rr(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function sr(t){return 0===t.type&&t.tagName!==ir}function ar(t,e,n){return e===(0!==t.type||n?t.tagName:ir)}function ur(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(De(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!ar(t,u,n)||""===u&&1===e.length){if(cr(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!or(t.attrs,c,n)){if(cr(r))return!1;s=!0}continue}const l=lr(8&r?"class":u,i,sr(t),n);if(-1===l){if(cr(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==rr(e,c,0)||2&r&&c!==t){if(cr(r))return!1;s=!0}}}}else{if(!s&&!cr(r)&&!cr(u))return!1;if(s&&cr(u))continue;s=!1,r=u|1&r}}return cr(r)||s}function cr(t){return 0==(1&t)}function lr(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function hr(t,e,n=!1){for(let r=0;r<e.length;r++)if(ur(t,e[r],n))return!0;return!1}function fr(t,e){return t?":not("+e.trim()+")":e}function dr(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||cr(s)||(e+=fr(o,i),i=""),r=s,o=o||!cr(r);n++}return""!==i&&(e+=fr(o,i)),e}const pr={};function yr(t){const e=t[3];return At(e)?e[3]:e}function gr(t){return mr(t[13])}function vr(t){return mr(t[4])}function mr(t){for(;null!==t&&!At(t);)t=t[4];return t}function br(t){_r(oe(),ie(),Ce()+t,ce())}function _r(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&Se(e,r,n)}else{const r=t.preOrderHooks;null!==r&&xe(e,r,0,n)}Oe(n)}function wr(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];ye(i),n.contentQueries(2,e[o],o)}}}function Er(t,e,n){return zt(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function Cr(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,te(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function Or(t,e,n,r,i){const o=e+St,s=t.data[o]||function(t,e,n,r,i){const o=se(),s=ue(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,tagName:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s&&null==o.child&&null!==a.parent?o.child=a:s||(o.next=a)),a}(t,o,n,r,i);return ae(s,!0),s}function Tr(t,e,n){ve(e);try{const r=t.viewQuery;null!==r&&Jr(1,r,n);const i=t.template;null!==i&&xr(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&wr(t,e),t.staticViewQueries&&Jr(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)Gr(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,Ee()}}function Ir(t,e,n,r){const i=e[2];if(256==(256&i))return;ve(e);const o=ce();try{te(e),ne.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&xr(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&Se(e,n,null)}else{const n=t.preOrderHooks;null!==n&&xe(e,n,0,null),je(e,0)}if(function(t){for(let e=gr(t);null!==e;e=vr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&ee(r,1),n[2]|=1024}}}(e),function(t){for(let e=gr(t);null!==e;e=vr(e))for(let t=xt;t<e.length;t++){const n=e[t],r=n[1];Xt(n)&&Ir(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&wr(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&Se(e,n)}else{const n=t.contentHooks;null!==n&&xe(e,n,1),je(e,1)}!function(t,e){try{const n=t.expandoInstructions;if(null!==n){let r=t.expandoStartIndex,i=-1,o=-1;for(let t=0;t<n.length;t++){const s=n[t];"number"==typeof s?s<=0?(o=0-s,Oe(o),r+=9+n[++t],i=r):r+=s:(null!==s&&(fe(r,i),s(2,e[i])),i++)}}}finally{Oe(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Wr(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&Jr(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&Se(e,n)}else{const n=t.viewHooks;null!==n&&xe(e,n,2),je(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,ee(e[3],-1))}finally{Ee()}}function Sr(t,e,n,r){const i=e[10],o=!ce(),s=Jt(e);try{o&&!s&&i.begin&&i.begin(),s&&Tr(t,e,r),Ir(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function xr(t,e,n,r,i){const o=Ce();try{Oe(-1),2&r&&e.length>St&&_r(t,e,0,ce()),n(r,i)}finally{Oe(o)}}function jr(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Ar(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Ar(t,e,n,r,i,o,s,a,u,c){const l=St+r,h=l+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:pr);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,expandoInstructions:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function Nr(t,e,n,r){const i=Zr(e);i.push(n),t.firstCreatePass&&function(t){return t.cleanup||(t.cleanup=[])}(t).push(r,i.length-1)}function kr(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Rr(t,e,n,r,i,o,s,a){const u=Qt(e,n);let c,l=e.inputs;!a&&null!=l&&(c=l[r])?(ei(t,n,c,r,i),kt(e)&&function(t,e){const n=Kt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):2===e.type&&(r=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=s?s(i,e.tagName||"",r):i,zt(o)?o.setProperty(u,r,i):Le(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Pr(t,e){const n=t.expandoInstructions;n.push(e.hostBindings),0!==e.hostVars&&n.push(e.hostVars)}function Dr(t,e,n){for(let r=0;r<n;r++)e.push(pr),t.blueprint.push(pr),t.data.push(null)}function Lr(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Fr(t,e,n){const r=St-e.index,i=t.data.length-(1048575&e.providerIndexes);(t.expandoInstructions||(t.expandoInstructions=[])).push(r,i,n)}function Mr(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Ur(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Pt(e)&&(n[""]=t)}}function Vr(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function qr(t,e,n){t.data.push(n);const r=n.factory||(n.factory=Tt(n.type)),i=new Re(r,Pt(n),null);t.blueprint.push(i),e.push(i)}function Hr(t,e,n){const r=Qt(e,t),i=jr(n),o=t[10],s=Qr(t,Cr(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function Br(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function zr(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Wr(t,e){const n=Kt(e,t);if(Xt(n)){const t=n[1];80&n[2]?Ir(t,n,t.template,n[8]):n[5]>0&&function t(e){for(let r=gr(e);null!==r;r=vr(r))for(let e=xt;e<r.length;e++){const n=r[e];if(1024&n[2]){const t=n[1];Ir(t,n,t.template,n[8])}else n[5]>0&&t(n)}const n=e[1].components;if(null!==n)for(let r=0;r<n.length;r++){const i=Kt(n[r],e);Xt(i)&&i[5]>0&&t(i)}}(n)}}function Gr(t,e){const n=Kt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),Tr(r,n,n[8])}function Qr(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function $r(t){for(;t;){t[2]|=64;const e=yr(t);if(Dt(t)&&!e)return t;t=e}return null}function Kr(t,e,n){const r=e[10];r.begin&&r.begin();try{Ir(t,e,t.template,n)}catch(i){throw ti(e,i),i}finally{r.end&&r.end()}}function Yr(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Yt(n),i=r[1];Sr(i,r,i.template,n)}}(t[8])}function Jr(t,e,n){ye(0),e(t,n)}const Xr=(()=>Promise.resolve(null))();function Zr(t){return t[7]||(t[7]=[])}function ti(t,e){const n=t[9],r=n?n.get(fn,null):null;r&&r.handleError(e)}function ei(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function ni(t,e,n,r,i){if(null!=r){let o,s=!1;At(r)?o=r:jt(r)&&(s=!0,r=r[0]);const a=Gt(r);0===t&&null!==n?null==i?ui(e,n,a):ai(e,n,a,i||null):1===t&&null!==n?ai(e,n,a,i||null):2===t?function(t,e,n){const r=li(t,e);r&&function(t,e,n,r){zt(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==Gt(n)&&ni(e,t,r,o,i);for(let s=xt;s<n.length;s++){const i=n[s];di(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function ri(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,ee(i,-1)),n.splice(r,1)}function ii(t,e){if(t.length<=xt)return;const n=xt+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&ri(o,r),e>0&&(t[n-1][4]=r[4]);const s=ct(t,xt+e);di(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function oi(t,e){if(!(256&e[2])){const n=e[11];zt(n)&&n.destroyNode&&di(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return si(t[1],t);for(;e;){let n=null;if(jt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)jt(e)&&si(e[1],e),e=e[3];null===e&&(e=t),jt(e)&&si(e[1],e),n=e&&e[4]}e=n}}(e)}}function si(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof Re)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup;if(null!==n){const t=e[7];for(let r=0;r<n.length-1;r+=2)if("string"==typeof n[r]){const i=n[r+1],o="function"==typeof i?i(e):Gt(e[i]),s=t[n[r+2]],a=n[r+3];"boolean"==typeof a?o.removeEventListener(n[r],s,a):a>=0?t[a]():t[-a].unsubscribe(),r+=2}else n[r].call(t[n[r+1]]);e[7]=null}}(t,e),1===e[1].type&&zt(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&At(e[3])){n!==e[3]&&ri(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function ai(t,e,n,r){zt(t)?t.insertBefore(e,n,r):e.insertBefore(n,r,!0)}function ui(t,e,n){zt(t)?t.appendChild(e,n):e.appendChild(n)}function ci(t,e,n,r){null!==r?ai(t,e,n,r):ui(t,e,n)}function li(t,e){return zt(t)?t.parentNode(e):e.parentNode}function hi(t,e,n,r){const i=function(t,e,n){let r=e.parent;for(;null!=r&&(3===r.type||4===r.type);)r=(e=r).parent;if(null===r)return n[0];if(e&&4===e.type&&4&e.flags)return Qt(e,n).parentNode;if(2&r.flags){const e=t.data,n=e[e[r.index].directiveStart].encapsulation;if(n!==ht.ShadowDom&&n!==ht.Native)return null}return Qt(r,n)}(t,r,e);if(null!=i){const t=e[11],o=function(t,e){return 3===t.type||4===t.type?Qt(t,e):null}(r.parent||e[6],e);if(Array.isArray(n))for(let e=0;e<n.length;e++)ci(t,i,n[e],o);else ci(t,i,n,o)}}function fi(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;s&&0===e&&(a&&nr(Gt(a),r),n.flags|=4),64!=(64&n.flags)&&(3===u||4===u?(fi(t,e,n.child,r,i,o,!1),ni(e,t,i,a,o)):1===u?pi(t,e,r,n,i,o):ni(e,t,i,a,o)),n=s?n.projectionNext:n.next}}function di(t,e,n,r,i,o){fi(n,r,t.firstChild,e,i,o,!1)}function pi(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)ni(e,t,i,a[u],o);else fi(t,e,a,s[3],i,o,!0)}function yi(t,e,n){zt(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function gi(t,e,n){zt(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}class vi{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._viewContainerRef=null}get rootNodes(){const t=this._lView,e=t[1];return function t(e,n,r,i,o=!1){for(;null!==r;){const s=n[r.index];if(null!==s&&i.push(Gt(s)),At(s))for(let e=xt;e<s.length;e++){const n=s[e],r=n[1].firstChild;null!==r&&t(n[1],n,r,i)}const a=r.type;if(3===a||4===a)t(e,n,r.child,i);else if(1===a){const e=n[16],o=e[6].projection[r.projection];if(Array.isArray(o))i.push(...o);else{const n=yr(e);t(n[1],n,o,i,!0)}}r=o?r.projectionNext:r.next}return i}(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){const t=this._viewContainerRef.indexOf(this);t>-1&&this._viewContainerRef.detach(t),this._viewContainerRef=null}oi(this._lView[1],this._lView)}onDestroy(t){Nr(this._lView[1],this._lView,null,t)}markForCheck(){$r(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Kr(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){le(!0);try{Kr(t,e,n)}finally{le(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}detachFromAppRef(){var t;this._appRef=null,di(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class mi extends vi{constructor(t){super(t),this._view=t}detectChanges(){Yr(this._view)}checkNoChanges(){!function(t){le(!0);try{Yr(t)}finally{le(!1)}}(this._view)}get context(){return null}}let bi,_i,wi;function Ei(t,e,n){return bi||(bi=class extends t{}),new bi(Qt(e,n))}function Ci(t,e,n,r){return _i||(_i=class extends t{constructor(t,e,n){super(),this._declarationView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=Cr(this._declarationView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationView[this._declarationTContainer.index];const r=this._declarationView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),Tr(e,n,t),new vi(n)}}),0===n.type?new _i(r,n,Ei(e,n,r)):null}function Oi(t,e,n,r){let i;wi||(wi=class extends t{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostView=n}get element(){return Ei(e,this._hostTNode,this._hostView)}get injector(){return new un(this._hostTNode,this._hostView)}get parentInjector(){const t=Xe(this._hostTNode,this._hostView);if(Ue(t)){const e=qe(t,this._hostView),n=Ve(t);return new un(e[1].data[n+8],e)}return new un(null,this._hostView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){return null!==this._lContainer[8]&&this._lContainer[8][t]||null}get length(){return this._lContainer.length-xt}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(ot,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");if(this.allocateContainerIfNeeded(),At(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new wi(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=xt+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-xt?(e[4]=n[i],ut(n,xt+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=function t(e,n){const r=xt+e+1;if(r<n.length){const e=n[r],i=e[1].firstChild;if(null!==i)return function e(n,r){if(null!==r){const i=r.type;if(2===i)return Qt(r,n);if(0===i)return t(-1,n[r.index]);if(3===i||4===i){const i=r.child;if(null!==i)return e(n,i);{const e=n[r.index];return At(e)?t(-1,e):Gt(e)}}{const t=n[16],i=t[6],o=yr(t),s=i.projection[r.projection];return null!=s?e(o,s):e(n,r.next)}}return null}(e,i)}return n[7]}(i,o),a=n[11],u=li(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,di(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(this),ut(o[8],i,t),t}move(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");return this.insert(t,e)}indexOf(t){const e=this._lContainer[8];return null!==e?e.indexOf(t):-1}remove(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1),n=ii(this._lContainer,e);n&&(ct(this._lContainer[8],e),oi(n[1],n))}detach(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1),n=ii(this._lContainer,e);return n&&null!=ct(this._lContainer[8],e)?new vi(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}allocateContainerIfNeeded(){null===this._lContainer[8]&&(this._lContainer[8]=[])}});const o=r[n.index];if(At(o))i=o;else{let t;if(3===n.type)t=Gt(o);else if(t=r[11].createComment(""),Dt(r)){const e=r[11],i=Qt(n,r);ai(e,li(e,i),t,function(t,e){return zt(t)?t.nextSibling(e):e.nextSibling}(e,i))}else hi(r[1],r,t,n);r[n.index]=i=new Array(o,!0,!1,r,null,0,n,t,null,null),Qr(r,i)}return new wi(i,n,r)}function Ti(t=!1){return function(t,e,n){if(!n&&kt(t)){const n=Kt(t.index,e);return new vi(n,n)}return 2===t.type||0===t.type||3===t.type||4===t.type?new vi(e[16],e):null}(se(),ie(),t)}let Ii=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Si(),t})();const Si=Ti,xi=Function,ji=new z("Set Injector scope."),Ai={},Ni={},ki=[];let Ri=void 0;function Pi(){return void 0===Ri&&(Ri=new it),Ri}function Di(t,e=null,n=null,r){return new Li(t,n,e||Pi(),r)}class Li{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&at(e,n=>this.processProvider(n,t,e)),at([t],t=>this.processInjectorType(t,[],i)),this.records.set(W,Mi(void 0,this));const o=this.records.get(ji);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:S(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=G,n=y.Default){this.assertNotDestroyed();const r=X(this);try{if(!(n&y.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof z)&&b(t);e=n&&this.injectableDefInScope(n)?Mi(Fi(t),Ai):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&y.Self?Pi():this.parent).get(t,e=n&y.Optional&&e===G?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(S(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[$]&&i.unshift(e[$]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=S(e);if(Array.isArray(e))i=e.map(S).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):S(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(Q,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{X(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(S(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=N(t)))return!1;let r=w(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=w(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{at(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];at(r,t=>this.processProvider(t,n,r||ki))}}this.injectorDefTypes.add(o),this.records.set(o,Mi(r.factory,Ai));const a=r.providers;if(null!=a&&!s){const e=t;at(a,t=>this.processProvider(t,e,a))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=Vi(t=N(t))?t:N(t&&t.provide);const i=function(t,e,n){return Ui(t)?Mi(void 0,t.useValue):Mi(function(t,e,n){let r=void 0;if(Vi(t)){const e=N(t);return Tt(e)||Fi(e)}if(Ui(t))r=()=>N(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...rt(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>et(N(t.useExisting));else{const e=N(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return Tt(e)||Fi(e);r=()=>new e(...rt(t.deps))}var i;return r}(t),Ai)}(t);if(Vi(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=Mi(void 0,Ai,!0),e.factory=()=>rt(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===Ai&&(e.value=Ni,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function Fi(t){const e=b(t),n=null!==e?e.factory:Tt(t);if(null!==n)return n;const r=w(t);if(null!==r)return r.factory;if(t instanceof z)throw new Error(`Token ${S(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${S(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[E]||t[T]||t[O]&&t[O]());if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function Mi(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Ui(t){return null!==t&&"object"==typeof t&&K in t}function Vi(t){return"function"==typeof t}const qi=function(t,e,n){return function(t,e=null,n=null,r){const i=Di(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let Hi=(()=>{class t{static create(t,e){return Array.isArray(t)?qi(t,e,""):qi(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=G,t.NULL=new it,t.\u0275prov=v({token:t,providedIn:"any",factory:()=>et(W)}),t.__NG_ELEMENT_ID__=-1,t})();const Bi=new z("AnalyzeForEntryComponents");function zi(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=x(i,t):2==o&&(r=x(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function Wi(t,e){const n=Yt(t)[1],r=n.data.length-1;Ie(n,{directiveStart:r,directiveEnd:r+1})}let Gi=null;function Qi(){if(!Gi){const t=L.Symbol;if(t&&t.iterator)Gi=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Gi=n)}}}return Gi}function $i(t){return!!Ki(t)&&(Array.isArray(t)||!(t instanceof Map)&&Qi()in t)}function Ki(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Yi(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Ji(t,e,n,r){const i=ie();return Yi(i,he(),e)&&(oe(),function(t,e,n,r,i,o){const s=Qt(t,e),a=e[11];if(null==r)zt(a)?a.removeAttribute(s,n,o):s.removeAttribute(n);else{const e=null==i?He(r):i(r,t.tagName||"",n);zt(a)?a.setAttribute(s,n,e,o):o?s.setAttributeNS(o,n,e):s.setAttribute(n,e)}}(Te(),i,t,e,n,r)),Ji}function Xi(t,e=y.Default){const n=ie();return null===n?et(t,e):tn(se(),n,N(t),e)}function Zi(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(De(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(se(),t)}function to(t,e,n){const r=ie();return Yi(r,he(),e)&&Rr(oe(),Te(),r,t,e,r[11],n,!1),to}function eo(t,e,n,r,i){const o=i?"class":"style";ei(t,n,e.inputs[o],o,r)}function no(t,e,n,r){const i=ie(),o=oe(),s=St+t,a=i[11],u=i[s]=Er(e,a,ne.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=Or(e,t,2,i,Zt(a,o));return function(t,e,n,r){let i=!1;if(re()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];hr(n,s.selectors,!1)&&(i||(i=[]),Ze(Ke(n,e),t,s.type),Pt(s)?(Mr(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){let r=0;i=!0,Vr(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}Fr(t,n,o.length);let a=!1,u=!1;for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=Fe(n.mergedAttrs,c.hostAttrs),qr(t,e,c),Ur(t.data.length-1,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!a&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index-St),a=!0),u||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index-St),u=!0),Pr(t,c),r+=c.hostVars}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||sr(e)?null:zr(n,i);o.push(c),s=kr(n,u,s),a=kr(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n),Dr(t,e,r)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new Error(`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}n.mergedAttrs=Fe(n.mergedAttrs,n.attrs)}(e,n,u,Zt(a,s)),null!==u.attrs&&zi(u,u.attrs,!1),null!==u.mergedAttrs&&zi(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(t,o,i,0,e,n,r):o.data[s];ae(c,!0);const l=c.mergedAttrs;null!==l&&Pe(a,u,l);const h=c.classes;null!==h&&gi(a,u,h);const f=c.styles;null!==f&&yi(a,u,f),hi(o,i,u,c),0===ne.lFrame.elementDepthCount&&nr(u,i),ne.lFrame.elementDepthCount++,Rt(c)&&(function(t,e,n){re()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Ke(n,e),nr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=Pt(r);o&&Hr(e,n,r);const u=on(e,t,a,n);nr(u,e),null!==s&&Br(0,a-i,u,r,0,s),o&&(Kt(n.index,e)[8]=u)}}(t,e,n,Qt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=t.expandoInstructions,s=t.firstCreatePass,a=n.index-St,u=ne.lFrame.currentDirectiveIndex;try{Oe(a);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];de(n),null!==r.hostBindings||0!==r.hostVars||null!==r.hostAttrs?Lr(r,i):s&&o.push(null)}}finally{Oe(-1),de(u)}}(t,e,n))}(o,i,c),function(t,e,n){if(Nt(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(o,c,i)),null!==r&&function(t,e,n=Qt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}(i,c)}function ro(){let t=se();ue()?ne.lFrame.isParent=!1:(t=t.parent,ae(t,!1));const e=t;ne.lFrame.elementDepthCount--;const n=oe();n.firstCreatePass&&(Ie(n,t),Nt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&eo(n,e,ie(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&eo(n,e,ie(),e.stylesWithoutHost,!1)}function io(t,e,n,r){no(t,e,n,r),ro()}function oo(t){return!!t&&"function"==typeof t.then}function so(t){return!!t&&"function"==typeof t.subscribe}function ao(t,e,n=!1,r){const i=ie(),o=oe(),s=se();return function(t,e,n,r,i,o,s=!1,a){const u=Rt(r),c=t.firstCreatePass&&(t.cleanup||(t.cleanup=[])),l=Zr(e);let h=!0;if(2===r.type){const f=Qt(r,e),d=a?a(f):ft,p=d.target||f,y=l.length,g=a?t=>a(Gt(t[r.index])).target:r.index;if(zt(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=co(r,e,o,!1);const t=n.listen(d.name||p,i,o);l.push(o,t),c&&c.push(i,g,y,y+1)}}else o=co(r,e,o,!0),p.addEventListener(i,o,s),l.push(o),c&&c.push(i,g,y,s)}const f=r.outputs;let d;if(h&&null!==f&&(d=f[i])){const t=d.length;if(t)for(let n=0;n<t;n+=2){const t=e[d[n]][d[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),ao}function uo(t,e,n){try{return!1!==e(n)}catch(r){return ti(t,r),!1}}function co(t,e,n,r){return function i(o){if(o===Function)return n;const s=2&t.flags?Kt(t.index,e):e;0==(32&e[2])&&$r(s);let a=uo(e,n,o),u=i.__ngNextListenerFn__;for(;u;)a=uo(e,u,o)&&a,u=u.__ngNextListenerFn__;return r&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function lo(t,e=""){const n=ie(),r=oe(),i=t+St,o=r.firstCreatePass?Or(r,t,2,null,null):r.data[i],s=n[i]=function(t,e){return zt(e)?e.createText(t):e.createTextNode(t)}(e,n[11]);hi(r,n,s,o),ae(o,!1)}function ho(t,e,n){const r=ie();return Yi(r,he(),e)&&Rr(oe(),Te(),r,t,e,r[11],n,!0),ho}class fo{}class po{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${S(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let yo=(()=>{class t{}return t.NULL=new po,t})(),go=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=()=>vo(t),t})();const vo=function(t){return Ei(t,se(),ie())};class mo{}var bo=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});let _o=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>wo(),t})();const wo=function(){const t=ie(),e=Kt(se().index,t);return function(t){const e=t[11];if(zt(e))return e;throw new Error("Cannot inject Renderer2 when the application uses Renderer3!")}(jt(e)?e:t)};let Eo=(()=>{class t{}return t.\u0275prov=v({token:t,providedIn:"root",factory:()=>null}),t})();class Co{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Oo=new Co("10.1.6");class To{constructor(){}supports(t){return $i(t)}create(t){return new So(t)}}const Io=(t,e)=>e;class So{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Io}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<No(n,r,i)?e:n,s=No(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!$i(t))throw new Error(`Error trying to diff '${S(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Qi()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new xo(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Ao),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ao),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class xo{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class jo{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Ao{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new jo,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function No(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class ko{constructor(){}supports(t){return t instanceof Map||Ki(t)}create(){return new Ro}}class Ro{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Ki(t)))throw new Error(`Error trying to diff '${S(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Po(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Po{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let Do=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new p,new f]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=v({token:t,providedIn:"root",factory:()=>new t([new To])}),t})(),Lo=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new p,new f]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=v({token:t,providedIn:"root",factory:()=>new t([new ko])}),t})();const Fo=[new ko],Mo=new Do([new To]),Uo=new Lo(Fo);let Vo=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>qo(t,go),t})();const qo=function(t,e){return Ci(t,e,se(),ie())};let Ho=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Bo(t,go),t})();const Bo=function(t,e){return Oi(t,e,se(),ie())},zo={};class Wo extends yo{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=Ot(t);return new $o(e,this.ngModule)}}function Go(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const Qo=new z("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>ze});class $o extends fo{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(dr).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Go(this.componentDef.inputs)}get outputs(){return Go(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,zo,i);return o!==zo||r===zo?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(mo,Wt),s=i.get(Eo,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(zt(t))return t.selectRootElement(e,n===ht.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Er(u,o.createRenderer(null,this.componentDef),function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:ze,clean:Xr,playerHandler:null,flags:0},f=Ar(0,null,null,1,0,null,null,null,null,null),d=Cr(null,f,h,l,null,null,o,a,s,i);let p,y;ve(d);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=Or(s,0,2,null,null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(zi(a,u,!0),null!==t&&(Pe(i,t,u),null!==a.classes&&gi(i,t,a.classes),null!==a.styles&&yi(i,t,a.styles)));const c=r.createRenderer(t,e),l=Cr(n,jr(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(Ze(Ke(a,n),s,e.type),Mr(s,a),Vr(a,n.length,1)),Qr(n,l),n[20]=l}(c,this.componentDef,d,o,a);if(c)if(n)Pe(a,c,["ng-version",Oo.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!cr(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&Pe(a,c,t),e&&e.length>0&&gi(a,c,e.join(" "))}if(y=$t(f,0),void 0!==e){const t=y.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=se();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Fr(t,r,1),qr(t,e,n));const i=on(e,t,e.length-1,r);nr(i,e);const o=Qt(r,e);return o&&nr(o,e),i}(o,n,e);r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries&&e.contentQueries(1,s,n.length-1);const a=se();if(o.firstCreatePass&&(null!==e.hostBindings||null!==e.hostAttrs)){Oe(a.index-St);const t=n[1];Pr(t,e),Dr(t,n,e.hostVars),Lr(e,s)}return s}(t,this.componentDef,d,h,[Wi]),Tr(f,d,null)}finally{Ee()}return new Ko(this.componentType,p,Ei(go,y,d),d,y)}}class Ko extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.destroyCbs=[],this.instance=e,this.hostView=this.changeDetectorRef=new mi(r),this.componentType=t}get injector(){return new un(this._tNode,this._rootLView)}destroy(){this.destroyCbs&&(this.destroyCbs.forEach(t=>t()),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}onDestroy(t){this.destroyCbs&&this.destroyCbs.push(t)}}const Yo=void 0;var Jo=["en",[["a","p"],["AM","PM"],Yo],[["AM","PM"],Yo,Yo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Yo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Yo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Yo,"{1} 'at' {0}",Yo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let Xo={};function Zo(t,e,n){"string"!=typeof e&&(n=e,e=t[is.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),Xo[e]=t,n&&(Xo[e][is.ExtraData]=n)}function ts(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=rs(e);if(n)return n;const r=e.split("-")[0];if(n=rs(r),n)return n;if("en"===r)return Jo;throw new Error(`Missing locale data for the locale "${t}".`)}function es(t){return ts(t)[is.CurrencyCode]||null}function ns(t){return ts(t)[is.PluralCase]}function rs(t){return t in Xo||(Xo[t]=L.ng&&L.ng.common&&L.ng.common.locales&&L.ng.common.locales[t]),Xo[t]}var is=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const os="en-US";let ss=os;function as(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error("ASSERTION ERROR: "+t+` [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(ss=t.toLowerCase().replace(/_/g,"-"))}const us=new Map;class cs extends ot{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Wo(this);const n=It(t),r=t[q]||null;r&&as(r),this._bootstrapComponents=We(n.bootstrap),this._r3Injector=Di(t,e,[{provide:ot,useValue:this},{provide:yo,useValue:this.componentFactoryResolver}],S(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=Hi.THROW_IF_NOT_FOUND,n=y.Default){return t===Hi||t===ot||t===W?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class ls extends st{constructor(t){super(),this.moduleType=t,null!==It(t)&&function t(e){if(null!==e.\u0275mod.id){const t=e.\u0275mod.id;(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${S(e)} vs ${S(e.name)}`)})(t,us.get(t),e),us.set(t,e)}let n=e.\u0275mod.imports;n instanceof Function&&(n=n()),n&&n.forEach(e=>t(e))}(t)}create(t){return new cs(this.moduleType,t)}}function hs(t,e,n,r){return function(t,e,n,r,i,o){const s=e+n;return Yi(t,s,i)?function(t,e,n){return t[e]=n}(t,s+1,o?r.call(o,i):r(i)):function(t,e){const n=t[e];return n===pr?void 0:n}(t,s+1)}(ie(),function(){const t=ne.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}(),t,e,n,r)}const fs=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,o=t=>null,s=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(o=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(s=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(o=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const a=super.subscribe(r,o,s);return t instanceof i.a&&t.add(a),a}};function ds(){return this._results[Qi()]()}class ps{constructor(){this.dirty=!0,this._results=[],this.changes=new fs,this.length=0;const t=Qi(),e=ps.prototype;e[t]||(e[t]=ds)}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t){this._results=function t(e,n){void 0===n&&(n=e);for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?(n===e&&(n=e.slice(0,r)),t(i,n)):n!==e&&n.push(i)}return n}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class ys{constructor(t){this.queryList=t,this.matches=null}clone(){return new ys(this.queryList)}setDirty(){this.queryList.setDirty()}}class gs{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new gs(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Is(t,e).matches&&this.queries[e].setDirty()}}class vs{constructor(t,e,n,r=null){this.predicate=t,this.descendants=e,this.isStatic=n,this.read=r}}class ms{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new ms(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class bs{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new bs(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&!1===this.metadata.descendants){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&3===n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,_s(e,i)),this.matchTNodeWithReadOption(t,e,rn(e,t,i,!1,!1))}else n===Vo?0===e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,rn(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===go||r===Ho||r===Vo&&0===e.type)this.addMatch(e.index,-2);else{const n=rn(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function _s(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function ws(t,e,n,r){return-1===n?function(t,e){return 2===t.type||3===t.type?Ei(go,t,e):0===t.type?Ci(Vo,go,t,e):null}(e,t):-2===n?function(t,e,n){return n===go?Ei(go,e,t):n===Vo?Ci(Vo,go,e,t):n===Ho?Oi(Ho,go,e,t):void 0}(t,e,r):on(t,t[1],n,e)}function Es(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:ws(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function Cs(t){const e=ie(),n=oe(),r=pe();ye(r+1);const i=Is(n,r);if(t.dirty&&Jt(e)===i.metadata.isStatic){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?function t(e,n,r,i){const o=e.queries.getByIndex(r),s=o.matches;if(null!==s){const a=Es(e,n,o,r);for(let e=0;e<s.length;e+=2){const r=s[e];if(r>0)i.push(a[e/2]);else{const o=s[e+1],a=n[-r];for(let e=xt;e<a.length;e++){const n=a[e];n[17]===n[3]&&t(n[1],n,o,i)}if(null!==a[9]){const e=a[9];for(let n=0;n<e.length;n++){const r=e[n];t(r[1],r,o,i)}}}}}return i}(n,e,r,[]):Es(n,e,i,r);t.reset(o),t.notifyOnChanges()}return!0}return!1}function Os(t,e,n,r){!function(t,e,n,r,i,o,s,a){t.firstCreatePass&&(function(t,e,n){null===t.queries&&(t.queries=new ms),t.queries.track(new bs(e,n))}(t,new vs(n,r,false,i),s.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(t.contentQueries.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(t,a)),function(t,e){const n=new ps;Nr(t,e,n,n.destroy),null===e[19]&&(e[19]=new gs),e[19].queries.push(new ys(n))}(t,e)}(oe(),ie(),e,n,r,0,se(),t)}function Ts(){return t=ie(),e=pe(),t[19].queries[e].queryList;var t,e}function Is(t,e){return t.queries.getByIndex(e)}function Ss(t=y.Default){const e=Ti(!0);if(null!=e||t&y.Optional)return e;throw new Error("No provider for ChangeDetectorRef!")}const xs=new z("Application Initializer");let js=(()=>{class t{constructor(t){this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();oo(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(et(xs,8))},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})();const As=new z("AppId"),Ns={provide:As,useFactory:function(){return`${ks()}${ks()}${ks()}`},deps:[]};function ks(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Rs=new z("Platform Initializer"),Ps=new z("Platform ID"),Ds=new z("appBootstrapListener");let Ls=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})();const Fs=new z("LocaleId"),Ms=new z("DefaultCurrencyCode");class Us{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const Vs=function(t){return new ls(t)},qs=Vs,Hs=function(t){return Promise.resolve(Vs(t))},Bs=function(t){const e=Vs(t),n=We(It(t).declarations).reduce((t,e)=>{const n=Ot(e);return n&&t.push(new $o(n)),t},[]);return new Us(e,n)},zs=Bs,Ws=function(t){return Promise.resolve(Bs(t))};let Gs=(()=>{class t{constructor(){this.compileModuleSync=qs,this.compileModuleAsync=Hs,this.compileModuleAndAllComponentsSync=zs,this.compileModuleAndAllComponentsAsync=Ws}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})();const Qs=(()=>Promise.resolve(0))();function $s(t){"undefined"==typeof Zone?Qs.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Ks{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new fs(!1),this.onMicrotaskEmpty=new fs(!1),this.onStable=new fs(!1),this.onError=new fs(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const n=this;n._nesting=0,n._outer=n._inner=Zone.current,Zone.wtfZoneSpec&&(n._inner=n._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(n._inner=n._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(n._inner=n._inner.fork(Zone.longStackTraceZoneSpec)),n.shouldCoalesceEventChangeDetection=e,n.lastRequestAnimationFrameId=-1,n.nativeRequestAnimationFrame=function(){let t=L.requestAnimationFrame,e=L.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=!!t.shouldCoalesceEventChangeDetection&&t.nativeRequestAnimationFrame&&(()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(L,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Zs(t),Xs(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Zs(t))}(t)});t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:e},onInvokeTask:(n,r,i,o,s,a)=>{try{return ta(t),n.invokeTask(i,o,s,a)}finally{e&&"eventTask"===o.type&&e(),ea(t)}},onInvoke:(e,n,r,i,o,s,a)=>{try{return ta(t),e.invoke(r,i,o,s,a)}finally{ea(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,Zs(t),Xs(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(n)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ks.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ks.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,Js,Ys,Ys);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}function Ys(){}const Js={};function Xs(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Zs(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||t.shouldCoalesceEventChangeDetection&&-1!==t.lastRequestAnimationFrameId)}function ta(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function ea(t){t._nesting--,Xs(t)}class na{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new fs,this.onMicrotaskEmpty=new fs,this.onStable=new fs,this.onError=new fs}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let ra=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ks.assertNotInAngularZone(),$s(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())$s(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(et(Ks))},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})(),ia=(()=>{class t{constructor(){this._applications=new Map,ua.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return ua.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})();class oa{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function sa(t){ua=t}let aa,ua=new oa;const ca=new z("AllowMultipleToken");class la{constructor(t,e){this.name=t,this.token=e}}function ha(t,e,n=[]){const r="Platform: "+e,i=new z(r);return(e=[])=>{let o=fa();if(!o||o.injector.get(ca,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:ji,useValue:"platform"});!function(t){if(aa&&!aa.destroyed&&!aa.injector.get(ca,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");aa=t.get(da);const e=t.get(Rs,null);e&&e.forEach(t=>t())}(Hi.create({providers:t,name:r}))}return function(t){const e=fa();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function fa(){return aa&&!aa.destroyed?aa:null}let da=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new na:("zone.js"===t?void 0:t)||new Ks({enableLongStackTrace:jn(),shouldCoalesceEventChangeDetection:e}),n}(e?e.ngZone:void 0,e&&e.ngZoneEventCoalescing||!1),r=[{provide:Ks,useValue:n}];return n.run(()=>{const e=Hi.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(fn,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return i.onDestroy(()=>ga(this._modules,i)),n.runOutsideAngular(()=>n.onError.subscribe({next:t=>{o.handleError(t)}})),function(t,e,n){try{const r=n();return oo(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(js);return t.runInitializers(),t.donePromise.then(()=>(as(i.injector.get(Fs,os)||os),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=pa({},e);return function(t,e,n){const r=new ls(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(ya);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${S(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(et(Hi))},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})();function pa(t,e){return Array.isArray(e)?e.reduce(pa,t):Object.assign(Object.assign({},t),e)}let ya=(()=>{class t{constructor(t,e,n,r,i,u){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=u,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=jn(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const c=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),l=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{Ks.assertNotInAngularZone(),$s(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Ks.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(c,l.pipe(Object(a.a)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof fo?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(ot),i=n.create(Hi.NULL,[],e||n.selector,r);i.onDestroy(()=>{this._unloadComponent(i)});const o=i.injector.get(ra,null);return o&&i.injector.get(ia).registerApplication(i.location.nativeElement,o),this._loadComponent(i),jn()&&this._console.log("Angular is running in development mode. Call enableProdMode() to enable production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges();if(this._enforceNoNewChanges)for(let t of this._views)t.checkNoChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;ga(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Ds,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}_unloadComponent(t){this.detachView(t.hostView),ga(this.components,t)}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy())}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(et(Ks),et(Ls),et(Hi),et(fn),et(yo),et(js))},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})();function ga(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class va{}class ma{}const ba={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let _a=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||ba}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>wa(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>wa(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(et(Gs),et(ma,8))},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})();function wa(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const Ea=function(t){return null},Ca=ha(null,"core",[{provide:Ps,useValue:"unknown"},{provide:da,deps:[Hi]},{provide:ia,deps:[]},{provide:Ls,deps:[]}]),Oa=[{provide:ya,useClass:ya,deps:[Ks,Ls,Hi,fn,yo,js]},{provide:Qo,deps:[Ks],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:js,useClass:js,deps:[[new f,xs]]},{provide:Gs,useClass:Gs,deps:[]},Ns,{provide:Do,useFactory:function(){return Mo},deps:[]},{provide:Lo,useFactory:function(){return Uo},deps:[]},{provide:Fs,useFactory:function(t){return as(t=t||"undefined"!=typeof $localize&&$localize.locale||os),t},deps:[[new h(Fs),new f,new p]]},{provide:Ms,useValue:"USD"}];let Ta=(()=>{class t{constructor(t){}}return t.\u0275mod=bt({type:t}),t.\u0275inj=m({factory:function(e){return new(e||t)(et(ya))},providers:Oa}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule((function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()}))),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},lJxs:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",(function(){return r}))},ngJS:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},os0x:function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"d",(function(){return a})),n.d(e,"h",(function(){return u})),n.d(e,"e",(function(){return c})),n.d(e,"f",(function(){return l})),n.d(e,"g",(function(){return h}));var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(c(arguments[e]));return t}function h(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return l}));var r=n("7o/Q"),i=n("EY2u"),o=n("LRne"),s=n("HDdC");let a=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(o.a)(this.value);case"E":return t=this.error,new s.a(e=>e.error(t));case"C":return Object(i.b)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function u(t,e=0){return function(n){return n.lift(new c(t,e))}}class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return f})),n.d(e,"d",(function(){return d}));var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function f(t){o.forEach((function(e){e.setLogLevel(t)}))}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return O})),n.d(e,"c",(function(){return F})),n.d(e,"d",(function(){return i})),n.d(e,"e",(function(){return o})),n.d(e,"f",(function(){return a})),n.d(e,"g",(function(){return u})),n.d(e,"h",(function(){return k})),n.d(e,"i",(function(){return M})),n.d(e,"j",(function(){return l})),n.d(e,"k",(function(){return h})),n.d(e,"l",(function(){return H})),n.d(e,"m",(function(){return d})),n.d(e,"n",(function(){return N})),n.d(e,"o",(function(){return g})),n.d(e,"p",(function(){return v})),n.d(e,"q",(function(){return b})),n.d(e,"r",(function(){return P})),n.d(e,"s",(function(){return _})),n.d(e,"t",(function(){return p})),n.d(e,"u",(function(){return y})),n.d(e,"v",(function(){return E})),n.d(e,"w",(function(){return m})),n.d(e,"x",(function(){return w})),n.d(e,"y",(function(){return A})),n.d(e,"z",(function(){return S})),n.d(e,"A",(function(){return D})),n.d(e,"B",(function(){return L})),n.d(e,"C",(function(){return R})),n.d(e,"D",(function(){return G})),n.d(e,"E",(function(){return W})),n.d(e,"F",(function(){return x})),n.d(e,"G",(function(){return q})),n.d(e,"H",(function(){return B})),n.d(e,"I",(function(){return z}));var r=n("os0x"),i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=s(t);return a.encodeByteArray(e,!0)},c=function(t){try{return a.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}var f=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function d(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function p(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(d())}function y(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function g(){return"object"==typeof self&&self.self===self}function v(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function m(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function b(){return d().indexOf("Electron/")>=0}function _(){var t=d();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function w(){return d().indexOf("MSAppHost/")>=0}function E(){return!1}var C=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,O.prototype.create),o}return Object(r.c)(e,t),e}(Error),O=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?T(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new C(i,a,r);return u},t}();function T(t,e){return t.replace(I,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var I=/\{\$([^}]+)}/g;function S(t){return JSON.parse(t)}function x(t){return JSON.stringify(t)}var j=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=S(c(o[0])||""),n=S(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},A=function(t){var e=j(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},N=function(t){var e=j(t).claims;return"object"==typeof e&&!0===e.admin};function k(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function R(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function P(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function D(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function L(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var F=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function M(t,e){var n=new U(t,e);return n.subscribe.bind(n)}var U=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=V),void 0===r.error&&(r.error=V),void 0===r.complete&&(r.complete=V);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function V(){}var q=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function H(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}function B(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(H(t,e,r)+"must be a valid function.")}function z(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(H(t,e,r)+"must be a valid context object.")}var W=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var s=o-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(s<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},G=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e}},qgXg:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return u}));var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i),u=a},quSY:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof s?u(h.errors):[h]}}if(Object(r.a)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return I})),n.d(e,"b",(function(){return b})),n.d(e,"c",(function(){return m})),n.d(e,"d",(function(){return d})),n.d(e,"e",(function(){return v})),n.d(e,"f",(function(){return O})),n.d(e,"g",(function(){return w})),n.d(e,"h",(function(){return p})),n.d(e,"i",(function(){return g})),n.d(e,"j",(function(){return E}));var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),u=n("fXoL"),c=n("Jgta");function l(){}class h{constructor(t,e=r.b){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule((function(e){r.runGuarded(()=>{t.apply(this,[e])})}),e,n)}}class f{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class d{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.a))}}function p(t){return function(e){return(e=e.lift(new f(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const y=["ngOnDestroy"],g=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(y.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),v=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},m=new u.q("angularfire2.app.options"),b=new u.q("angularfire2.app.nameOrConfig"),_=new u.O("6.1.4");function w(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&C("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const E=()=>{C("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},C=(t,...e)=>{Object(u.T)()&&"undefined"!=typeof console&&console[t](...e)};function O(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&C("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const T={provide:class{},useFactory:w,deps:[m,u.z,[new u.A,b]]};let I=(()=>{class t{constructor(t){c.a.registerVersion("angularfire",_.full,t.toString()),c.a.registerVersion("angular",u.N.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:m,useValue:e},{provide:b,useValue:n}]}}}return t.\u0275mod=u.Cb({type:t}),t.\u0275inj=u.Bb({factory:function(e){return new(e||t)(u.Jb(u.B))},providers:[T]}),t})()}).call(this,n("3UD+")(t))},"tf+s":function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));var r=n("HDdC");let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n("3N8a");class l extends c.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n("IjjT");class f extends h.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const d=new f(l);var p=n("DH7j");class y extends r.a{constructor(t,e=0,n=d){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,r=e,(Object(p.a)(r)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=d)}static create(t,e=0,n=d){return new y(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(y.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function g(t,e=0){return function(n){return n.lift(new v(t,e))}}class v{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new y(e,this.delay,this.scheduler).subscribe(t)}}},vkgz:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("7o/Q");function i(){}var o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},w1tV:function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var r=n("XNiG"),i=n("HDdC"),o=n("7o/Q"),s=n("quSY");function a(){return function(t){return t.lift(new u(t))}}class u{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new c(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class c extends o.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class l extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new s.a,t.add(this.source.subscribe(new f(this.getSubject(),this))),t.closed&&(this._connection=null,t=s.a.EMPTY)),t}refCount(){return a()(this)}}const h=(()=>{const t=l.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class f extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function d(){return new r.a}function p(){return t=>{return a()((e=d,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,h);return r.source=t,r.subjectFactory=n,r})(t));var e}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",(function(){return r}))},zIRd:function(t,e,n){"use strict";var r,i,o=n("os0x"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.b("@firebase/app"),y=function(){function t(t,e,n){var r,i,u=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.j)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",(function(){return u}),"PUBLIC"));try{for(var c=Object(o.h)(this.firebase_.INTERNAL.components.values()),l=c.next();!l.done;l=c.next())this._addComponent(l.value)}catch(h){r={error:h}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e=f),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();y.prototype.name&&y.prototype.options||y.prototype.delete||console.log("dc");var g=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.h)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=d[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&s&&u.push("and"),s&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(u.join(" "))}c(new a.a(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument",{appName:name});Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.0.1",INTERNAL:{registerComponent:c,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||f,!Object(s.h)(e,t))throw l.create("no-app",{appName:t});return e[t]}function c(a){var u,c,h=a.name;if(n.has(h))return p.debug("There were multiple attempts to register component "+h+"."),"PUBLIC"===a.type?r[h]:null;if(n.set(h,a),"PUBLIC"===a.type){var f=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[h])throw l.create("invalid-app-argument",{appName:h});return t[h]()};void 0!==a.serviceProps&&Object(s.k)(f,a.serviceProps),r[h]=f,t.prototype[h]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,h).apply(this,a.multipleInstances?t:[])}}try{for(var d=Object(o.h)(Object.keys(e)),y=d.next();!y.done;y=d.next())e[y.value]._addComponent(a)}catch(g){u={error:g}}finally{try{y&&!y.done&&(c=d.return)&&c.call(d)}finally{if(u)throw u.error}}return"PUBLIC"===a.type?r[h]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(y);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.k)(e,t)},createSubscribe:s.i,ErrorFactory:s.b,deepExtend:s.k}),e}(),v=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if(Object(s.o)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var m=self.firebase.SDK_VERSION;m&&m.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=g.initializeApp;g.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.u)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var _=g;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",(function(t){return new v(t)}),"PRIVATE")),t.registerVersion(h,"0.6.13",void 0),t.registerVersion("fire-js","")}(_),e.a=_},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL");const i={apiKey:"AIzaSyC0ew6DkRueDMRPq13S6skPeXViN-unMC4",authDomain:"truthordare-database.firebaseapp.com",projectId:"truthordare-database",storageBucket:"truthordare-database.appspot.com",messagingSenderId:"683895734418",appId:"1:683895734418:web:8f7961f2988f051f82e64b",measurementId:"G-0RNBMJ2EME"};let o=null;function s(){return o}const a=new r.q("DocumentToken");let u=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Ab)({factory:c,token:t,providedIn:"platform"}),t})();function c(){return Object(r.Jb)(h)}const l=new r.q("Location Initialized");let h=(()=>{class t extends u{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=s().getLocation(),this._history=s().getHistory()}getBaseHrefFromDOM(){return s().getBaseHref(this._doc)}onPopState(t){s().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){s().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){f()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){f()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(a))},t.\u0275prov=Object(r.Ab)({factory:d,token:t,providedIn:"platform"}),t})();function f(){return!!window.history.pushState}function d(){return new h(Object(r.Jb)(a))}function p(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function y(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function g(t){return t&&"?"!==t[0]?"?"+t:t}let v=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Ab)({factory:m,token:t,providedIn:"root"}),t})();function m(t){const e=Object(r.Jb)(a).location;return new _(Object(r.Jb)(u),e&&e.origin||"")}const b=new r.q("appBaseHref");let _=(()=>{class t extends v{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return p(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(u),r.Jb(b,8))},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t extends v{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=p(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(u),r.Jb(b,8))},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})(),E=(()=>{class t{constructor(t,e){this._subject=new r.n,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=y(O(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+g(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,O(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(v),r.Jb(u))},t.normalizeQueryParams=g,t.joinWithSlash=p,t.stripTrailingSlash=y,t.\u0275prov=Object(r.Ab)({factory:C,token:t,providedIn:"root"}),t})();function C(){return new E(Object(r.Jb)(v),Object(r.Jb)(u))}function O(t){return t.replace(/\/index.html$/,"")}var T=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});const I=r.kb;class S{}let x=(()=>{class t extends S{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(I(e||this.locale)(t)){case T.Zero:return"zero";case T.One:return"one";case T.Two:return"two";case T.Few:return"few";case T.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.u))},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})(),j=(()=>{class t{constructor(t,e,n,r){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=n,this._renderer=r,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Object(r.nb)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachChangedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachRemovedItem(t=>{t.previousValue&&this._toggleClass(t.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(t=>{if("string"!=typeof t.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got "+Object(r.sb)(t.item));this._toggleClass(t.item,!0)}),t.forEachRemovedItem(t=>this._toggleClass(t.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!0)):Object.keys(t).forEach(e=>this._toggleClass(e,!!t[e])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!1)):Object.keys(t).forEach(t=>this._toggleClass(t,!1)))}_toggleClass(t,e){(t=t.trim())&&t.split(/\s+/g).forEach(t=>{e?this._renderer.addClass(this._ngEl.nativeElement,t):this._renderer.removeClass(this._ngEl.nativeElement,t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Eb(r.s),r.Eb(r.t),r.Eb(r.l),r.Eb(r.D))},t.\u0275dir=r.zb({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})(),A=(()=>{class t{}return t.\u0275mod=r.Cb({type:t}),t.\u0275inj=r.Bb({factory:function(e){return new(e||t)},providers:[{provide:S,useClass:x}]}),t})(),N=(()=>{class t{}return t.\u0275prov=Object(r.Ab)({token:t,providedIn:"root",factory:()=>new k(Object(r.Jb)(a),window,Object(r.Jb)(r.m))}),t})();class k{constructor(t,e,n){this.document=t,this.window=e,this.errorHandler=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(this.supportsScrolling()){const e=this.document.getElementById(t)||this.document.getElementsByName(t)[0];e&&this.scrollToElement(e)}}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}supportScrollRestoration(){try{if(!this.window||!this.window.scrollTo)return!1;const t=R(this.window.history)||R(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window.scrollTo}catch(t){return!1}}}function R(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class P extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new P,o||(o=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=L||(L=document.querySelector("base"),L)?L.getAttribute("href"):null;return null==e?null:(n=e,D||(D=document.createElement("a")),D.setAttribute("href",n),"/"===D.pathname.charAt(0)?D.pathname:"/"+D.pathname);var n}resetBaseElement(){L=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let D,L=null;const F=new r.q("TRANSITION_ID"),M=[{provide:r.d,useFactory:function(t,e,n){return()=>{n.get(r.e).donePromise.then(()=>{const n=s();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[F,a,r.r],multi:!0}];class U{static init(){Object(r.V)(new U)}addToWindow(t){r.mb.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.mb.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.mb.getAllAngularRootElements=()=>t.getAllRootElements(),r.mb.frameworkStabilizers||(r.mb.frameworkStabilizers=[]),r.mb.frameworkStabilizers.push(t=>{const e=r.mb.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach((function(t){t.whenStable(o)}))})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?s().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const V=new r.q("EventManagerPlugins");let q=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error("No event manager plugin found for event "+t)}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(V),r.Jb(r.z))},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})();class H{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=s().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let B=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})(),z=(()=>{class t extends B{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>s().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(a))},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})();const W={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},G=/%COMP%/g;function Q(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Q(t,i,n):(i=i.replace(G,t),n.push(i))}return n}function $(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let K=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new Y(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.Q.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new J(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case r.Q.Native:case r.Q.ShadowDom:return new X(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=Q(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(q),r.Jb(z),r.Jb(r.c))},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})();class Y{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(W[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=W[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=W[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&r.F.DashCase?t.style.setProperty(e,n,i&r.F.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.F.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,$(n)):this.eventManager.addEventListener(t,e,$(n))}}class J extends Y{constructor(t,e,n,r){super(t),this.component=n;const i=Q(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(G,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(G,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class X extends Y{constructor(t,e,n,i){super(t),this.sharedStylesHost=e,this.hostEl=n,this.component=i,this.shadowRoot=i.encapsulation===r.Q.ShadowDom?n.attachShadow({mode:"open"}):n.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const o=Q(i.id,i.styles,[]);for(let r=0;r<o.length;r++){const t=document.createElement("style");t.textContent=o[r],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Z=(()=>{class t extends H{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(a))},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})();const tt=["alt","control","meta","shift"],et={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},nt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},rt={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let it=(()=>{class t extends H{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),o=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>s().onAndCancel(e,i.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(tt.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&nt.hasOwnProperty(e)&&(e=nt[e]))}return et[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),tt.forEach(r=>{r!=n&&(0,rt[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(a))},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})();const ot=[{provide:r.B,useValue:"browser"},{provide:r.C,useValue:function(){P.makeCurrent(),U.init()},multi:!0},{provide:a,useFactory:function(){return Object(r.rb)(document),document},deps:[]}],st=Object(r.R)(r.U,"browser",ot),at=[[],{provide:r.X,useValue:"root"},{provide:r.m,useFactory:function(){return new r.m},deps:[]},{provide:V,useClass:Z,multi:!0,deps:[a,r.z,r.B]},{provide:V,useClass:it,multi:!0,deps:[a]},[],{provide:K,useClass:K,deps:[q,z,r.c]},{provide:r.E,useExisting:K},{provide:B,useExisting:z},{provide:z,useClass:z,deps:[a]},{provide:r.L,useClass:r.L,deps:[r.z]},{provide:q,useClass:q,deps:[V,r.z]},[]];let ut=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.c,useValue:e.appId},{provide:F,useExisting:r.c},M]}}}return t.\u0275mod=r.Cb({type:t}),t.\u0275inj=r.Bb({factory:function(e){return new(e||t)(r.Jb(t,12))},providers:at,imports:[A,r.f]}),t})();"undefined"!=typeof window&&window;var ct=n("LRne"),lt=n("Cfvw"),ht=n("XNiG"),ft=n("9ppp");class dt extends ht.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new ft.a;return this._value}next(t){super.next(this._value=t)}}var pt=n("z+Ro"),yt=n("DH7j"),gt=n("7o/Q");class vt extends gt.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class mt extends gt.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var bt=n("SeVD"),_t=n("HDdC");function wt(t,e,n,r,i=new mt(t,n,r)){if(!i.closed)return e instanceof _t.a?e.subscribe(i):Object(bt.a)(e)(i)}var Et=n("yCtX");const Ct={};class Ot{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Tt(t,this.resultSelector))}}class Tt extends vt{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(Ct),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(wt(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===Ct?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const It=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();var St=n("EY2u");function xt(t){return new _t.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(lt.a)(n):Object(St.b)()).subscribe(e)})}var jt=n("lJxs"),At=n("bHdf");function Nt(){return Object(At.a)(1)}function kt(t,e){return function(n){return n.lift(new Rt(t,e))}}class Rt{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new Pt(t,this.predicate,this.thisArg))}}class Pt extends gt.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}const Dt=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function Lt(t){return function(e){return 0===t?Object(St.b)():e.lift(new Ft(t))}}class Ft{constructor(t){if(this.total=t,this.total<0)throw new Dt}call(t,e){return e.subscribe(new Mt(t,this.total))}}class Mt extends gt.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function Ut(t=Ht){return e=>e.lift(new Vt(t))}class Vt{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new qt(t,this.errorFactory))}}class qt extends gt.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(Sm){t=Sm}this.destination.error(t)}}}function Ht(){return new It}function Bt(t=null){return e=>e.lift(new zt(t))}class zt{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new Wt(t,this.defaultValue))}}class Wt extends gt.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var Gt=n("SpAZ"),Qt=n("zx2A");function $t(t,e){return"function"==typeof e?n=>n.pipe($t((n,r)=>Object(lt.a)(t(n,r)).pipe(Object(jt.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new Kt(t))}class Kt{constructor(t){this.project=t}call(t,e){return e.subscribe(new Yt(t,this.project))}}class Yt extends Qt.b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new Qt.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(Qt.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}function Jt(t){return e=>0===t?Object(St.b)():e.lift(new Xt(t))}class Xt{constructor(t){if(this.total=t,this.total<0)throw new Dt}call(t,e){return e.subscribe(new Zt(t,this.total))}}class Zt extends gt.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function te(...t){return Nt()(Object(ct.a)(...t))}function ee(...t){const e=t[t.length-1];return Object(pt.a)(e)?(t.pop(),n=>te(t,n,e)):e=>te(t,e)}function ne(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new re(t,e,n))}}class re{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new ie(t,this.accumulator,this.seed,this.hasSeed))}}class ie extends gt.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function oe(t){return function(e){const n=new se(t),r=e.lift(n);return n.caught=r}}class se{constructor(t){this.selector=t}call(t,e){return e.subscribe(new ae(t,this.selector,this.caught))}}class ae extends Qt.b{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new Qt.a(this);this.add(r);const i=Object(Qt.c)(n,r);i!==r&&this.add(i)}}}var ue=n("5+tZ");function ce(t,e){return Object(ue.a)(t,e,1)}function le(t,e){const n=arguments.length>=2;return r=>r.pipe(t?kt((e,n)=>t(e,n,r)):Gt.a,Jt(1),n?Bt(e):Ut(()=>new It))}var he=n("vkgz"),fe=n("quSY");class de{constructor(t){this.callback=t}call(t,e){return e.subscribe(new pe(t,this.callback))}}class pe extends gt.a{constructor(t,e){super(t),this.add(new fe.a(e))}}class ye{constructor(t,e){this.id=t,this.url=e}}class ge extends ye{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ve extends ye{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class me extends ye{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class be extends ye{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class _e extends ye{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class we extends ye{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ee extends ye{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ce extends ye{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Oe extends ye{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Te{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ie{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Se{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xe{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class je{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ae{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ne{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const ke="primary";class Re{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Pe(t){return new Re(t)}function De(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function Le(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Fe(t,e){const n=Object.keys(t),r=Object.keys(e);if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!Me(t[i],e[i]))return!1;return!0}function Me(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function Ue(t){return Array.prototype.concat.apply([],t)}function Ve(t){return t.length>0?t[t.length-1]:null}function qe(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function He(t){return Object(r.ob)(t)?t:Object(r.pb)(t)?Object(lt.a)(Promise.resolve(t)):Object(ct.a)(t)}function Be(t,e,n){return n?function(t,e){return Fe(t,e)}(t.queryParams,e.queryParams)&&function t(e,n){if(!Qe(e.segments,n.segments))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children){if(!e.children[r])return!1;if(!t(e.children[r],n.children[r]))return!1}return!0}(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Me(t[n],e[n]))}(t.queryParams,e.queryParams)&&function t(e,n){return function e(n,r,i){if(n.segments.length>i.length)return!!Qe(n.segments.slice(0,i.length),i)&&!r.hasChildren();if(n.segments.length===i.length){if(!Qe(n.segments,i))return!1;for(const e in r.children){if(!n.children[e])return!1;if(!t(n.children[e],r.children[e]))return!1}return!0}{const t=i.slice(0,n.segments.length),o=i.slice(n.segments.length);return!!Qe(n.segments,t)&&!!n.children.primary&&e(n.children.primary,r,o)}}(e,n,n.segments)}(t.root,e.root)}class ze{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Pe(this.queryParams)),this._queryParamMap}toString(){return Je.serialize(this)}}class We{constructor(t,e){this.segments=t,this.children=e,this.parent=null,qe(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Xe(this)}}class Ge{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Pe(this.parameters)),this._parameterMap}toString(){return on(this)}}function Qe(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}function $e(t,e){let n=[];return qe(t.children,(t,r)=>{r===ke&&(n=n.concat(e(t,r)))}),qe(t.children,(t,r)=>{r!==ke&&(n=n.concat(e(t,r)))}),n}class Ke{}class Ye{parse(t){const e=new ln(t);return new ze(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){return`${"/"+function t(e,n){if(!e.hasChildren())return Xe(e);if(n){const n=e.children.primary?t(e.children.primary,!1):"",r=[];return qe(e.children,(e,n)=>{n!==ke&&r.push(`${n}:${t(e,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=$e(e,(n,r)=>r===ke?[t(e.children.primary,!1)]:[`${r}:${t(n,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children.primary?`${Xe(e)}/${n[0]}`:`${Xe(e)}/(${n.join("//")})`}}(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${tn(e)}=${tn(t)}`).join("&"):`${tn(e)}=${tn(n)}`});return e.length?"?"+e.join("&"):""}(t.queryParams)}${"string"==typeof t.fragment?"#"+encodeURI(t.fragment):""}`}}const Je=new Ye;function Xe(t){return t.segments.map(t=>on(t)).join("/")}function Ze(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function tn(t){return Ze(t).replace(/%3B/gi,";")}function en(t){return Ze(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function nn(t){return decodeURIComponent(t)}function rn(t){return nn(t.replace(/\+/g,"%20"))}function on(t){return`${en(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${en(t)}=${en(e[t])}`).join("")}`;var e}const sn=/^[^\/()?;=#]+/;function an(t){const e=t.match(sn);return e?e[0]:""}const un=/^[^=?&#]+/,cn=/^[^?&#]+/;class ln{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new We([],{}):new We([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new We(t,e)),n}parseSegment(){const t=an(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Ge(nn(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=an(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=an(this.remaining);t&&(n=t,this.capture(n))}t[nn(e)]=nn(n)}parseQueryParam(t){const e=function(t){const e=t.match(un);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(cn);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=rn(e),i=rn(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=an(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=ke);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new We([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class hn{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=fn(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=fn(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=dn(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return dn(t,this._root).map(t=>t.value)}}function fn(t,e){if(t===e.value)return e;for(const n of e.children){const e=fn(t,n);if(e)return e}return null}function dn(t,e){if(t===e.value)return[e];for(const n of e.children){const r=dn(t,n);if(r.length)return r.unshift(e),r}return[]}class pn{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function yn(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class gn extends hn{constructor(t,e){super(t),this.snapshot=e,En(this,t)}toString(){return this.snapshot.toString()}}function vn(t,e){const n=function(t,e){const n=new _n([],{},{},"",{},ke,e,null,t.root,-1,{});return new wn("",new pn(n,[]))}(t,e),r=new dt([new Ge("",{})]),i=new dt({}),o=new dt({}),s=new dt({}),a=new dt(""),u=new mn(r,i,s,a,o,ke,e,n.root);return u.snapshot=n.root,new gn(new pn(u,[]),n)}class mn{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(jt.a)(t=>Pe(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(jt.a)(t=>Pe(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function bn(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class _n{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Pe(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Pe(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class wn extends hn{constructor(t,e){super(e),this.url=t,En(this,e)}toString(){return Cn(this._root)}}function En(t,e){e.value._routerState=t,e.children.forEach(e=>En(t,e))}function Cn(t){const e=t.children.length>0?` { ${t.children.map(Cn).join(", ")} } `:"";return`${t.value}${e}`}function On(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Fe(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Fe(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Fe(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Fe(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Tn(t,e){return Fe(t.params,e.params)&&function(t,e){return Qe(t,e)&&t.every((t,n)=>Fe(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||Tn(t.parent,e.parent))}function In(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Sn(t,e,n,r,i){let o={};return r&&qe(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>""+t):""+t}),new ze(n.root===t?e:function t(e,n,r){const i={};return qe(e.children,(e,o)=>{i[o]=e===n?r:t(e,n,r)}),new We(e.segments,i)}(n.root,t,e),o,i)}class xn{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&In(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(t=>"object"==typeof t&&null!=t&&t.outlets);if(r&&r!==Ve(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class jn{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function An(t){return"object"==typeof t&&null!=t&&t.outlets?t.outlets.primary:""+t}function Nn(t,e,n){if(t||(t=new We([],{})),0===t.segments.length&&t.hasChildren())return kn(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=An(n[r]),a=r<n.length-1?n[r+1]:null;if(i>0&&void 0===s)break;if(s&&a&&"object"==typeof a&&void 0===a.outlets){if(!Ln(s,a,e))return o;r+=2}else{if(!Ln(s,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new We(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new We(t.segments.slice(r.pathIndex),t.children),kn(e,0,i)}return r.match&&0===i.length?new We(t.segments,{}):r.match&&!t.hasChildren()?Rn(t,e,n):r.match?kn(t,0,i):Rn(t,e,n)}function kn(t,e,n){if(0===n.length)return new We(t.segments,{});{const r=function(t){return"object"==typeof t[0]&&null!==t[0]&&t[0].outlets?t[0].outlets:{[ke]:t}}(n),i={};return qe(r,(n,r)=>{null!==n&&(i[r]=Nn(t.children[r],e,n))}),qe(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new We(t.segments,i)}}function Rn(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){if("object"==typeof n[i]&&null!==n[i]&&void 0!==n[i].outlets){const t=Pn(n[i].outlets);return new We(r,t)}if(0===i&&In(n[0])){r.push(new Ge(t.segments[e].path,n[0])),i++;continue}const o=An(n[i]),s=i<n.length-1?n[i+1]:null;o&&s&&In(s)?(r.push(new Ge(o,Dn(s))),i+=2):(r.push(new Ge(o,{})),i++)}return new We(r,{})}function Pn(t){const e={};return qe(t,(t,n)=>{null!==t&&(e[n]=Rn(new We([],{}),0,t))}),e}function Dn(t){const e={};return qe(t,(t,n)=>e[n]=""+t),e}function Ln(t,e,n){return t==n.path&&Fe(e,n.parameters)}class Fn{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),On(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=yn(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),qe(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet);if(n){const r=yn(t),i=t.value.component?n.children:e;qe(r,(t,e)=>this.deactivateRouteAndItsChildren(t,i)),n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}}activateChildRoutes(t,e,n){const r=yn(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new Ae(t.value.snapshot))}),t.children.length&&this.forwardEvent(new xe(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(On(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),Mn(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function Mn(t){On(t.value),t.children.forEach(Mn)}class Un{constructor(t,e){this.routes=t,this.module=e}}function Vn(t){return"function"==typeof t}function qn(t){return t instanceof ze}const Hn=Symbol("INITIAL_VALUE");function Bn(){return $t(t=>function(...t){let e=void 0,n=void 0;return Object(pt.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(yt.a)(t[0])&&(t=t[0]),Object(Et.a)(t,n).lift(new Ot(e))}(...t.map(t=>t.pipe(Jt(1),ee(Hn)))).pipe(ne((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==Hn)return t;if(r===Hn&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||qn(r))return r}return t},t)},Hn),kt(t=>t!==Hn),Object(jt.a)(t=>qn(t)?t:!0===t),Jt(1)))}class zn{constructor(t){this.segmentGroup=t||null}}class Wn{constructor(t){this.urlTree=t}}function Gn(t){return new _t.a(e=>e.error(new zn(t)))}function Qn(t){return new _t.a(e=>e.error(new Wn(t)))}function $n(t){return new _t.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Kn{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.x)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,ke).pipe(Object(jt.a)(t=>this.createUrlTree(t,this.urlTree.queryParams,this.urlTree.fragment))).pipe(oe(t=>{if(t instanceof Wn)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof zn)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,ke).pipe(Object(jt.a)(e=>this.createUrlTree(e,t.queryParams,t.fragment))).pipe(oe(t=>{if(t instanceof zn)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new We([],{[ke]:t}):t;return new ze(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(jt.a)(t=>new We([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){return function(t,e){if(0===Object.keys(t).length)return Object(ct.a)({});const n=[],r=[],i={};return qe(t,(t,o)=>{const s=e(o,t).pipe(Object(jt.a)(t=>i[o]=t));o===ke?n.push(s):r.push(s)}),ct.a.apply(null,n.concat(r)).pipe(Nt(),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?kt((e,n)=>t(e,n,r)):Gt.a,Lt(1),n?Bt(e):Ut(()=>new It))}(),Object(jt.a)(()=>i))}(n.children,(n,r)=>this.expandSegmentGroup(t,e,r,n))}expandSegment(t,e,n,r,i,o){return Object(ct.a)(...n).pipe(ce(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(oe(t=>{if(t instanceof zn)return Object(ct.a)(null);throw t}))),le(t=>!!t),oe((t,n)=>{if(t instanceof It||"EmptyError"===t.name){if(this.noLeftoversInUrl(e,r,i))return Object(ct.a)(new We([],{}));throw new zn(e)}throw t}))}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return Zn(r)!==o?Gn(e):void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):Gn(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Qn(i):this.lineralizeSegments(n,i).pipe(Object(ue.a)(n=>{const i=new We(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=Yn(e,r,i);if(!s)return Gn(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?Qn(l):this.lineralizeSegments(r,l).pipe(Object(ue.a)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r){if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(Object(jt.a)(t=>(n._loadedConfig=t,new We(r,{})))):Object(ct.a)(new We(r,{}));const{matched:i,consumedSegments:o,lastChild:s}=Yn(e,n,r);if(!i)return Gn(e);const a=r.slice(s);return this.getChildConfig(t,n,r).pipe(Object(ue.a)(t=>{const n=t.module,r=t.routes,{segmentGroup:i,slicedSegments:s}=function(t,e,n,r){return n.length>0&&function(t,e,n){return n.some(n=>Xn(t,e,n)&&Zn(n)!==ke)}(t,n,r)?{segmentGroup:Jn(new We(e,function(t,e){const n={};n.primary=e;for(const r of t)""===r.path&&Zn(r)!==ke&&(n[Zn(r)]=new We([],{}));return n}(r,new We(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return n.some(n=>Xn(t,e,n))}(t,n,r)?{segmentGroup:Jn(new We(t.segments,function(t,e,n,r){const i={};for(const o of n)Xn(t,e,o)&&!r[Zn(o)]&&(i[Zn(o)]=new We([],{}));return Object.assign(Object.assign({},r),i)}(t,n,r,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,o,a,r);return 0===s.length&&i.hasChildren()?this.expandChildren(n,r,i).pipe(Object(jt.a)(t=>new We(o,t))):0===r.length&&0===s.length?Object(ct.a)(new We(o,{})):this.expandSegment(n,i,r,s,ke,!0).pipe(Object(jt.a)(t=>new We(o.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(ct.a)(new Un(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(ct.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(ue.a)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(jt.a)(t=>(e._loadedConfig=t,t))):function(t){return new _t.a(e=>e.error(De(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(ct.a)(new Un([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return Object(ct.a)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&Vn(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!Vn(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return He(o)});return Object(ct.a)(i).pipe(Bn(),Object(he.a)(t=>{if(!qn(t))return;const e=De(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),Object(jt.a)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(ct.a)(n);if(r.numberOfChildren>1||!r.children.primary)return $n(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new ze(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return qe(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return qe(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new We(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function Yn(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const r=(e.matcher||Le)(n,t,e);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function Jn(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new We(t.segments.concat(e.segments),e.children)}return t}function Xn(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function Zn(t){return t.outlet||ke}class tr{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class er{constructor(t,e){this.component=t,this.route=e}}function nr(t,e,n){const r=t._root;return function t(e,n,r,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=yn(n);return e.children.forEach(e=>{!function(e,n,r,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=e.value,a=n?n.value:null,u=r?r.getContext(e.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){const c=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Qe(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Qe(t.url,e.url)||!Fe(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Tn(t,e)||!Fe(t.queryParams,e.queryParams);case"paramsChange":default:return!Tn(t,e)}}(a,s,s.routeConfig.runGuardsAndResolvers);c?o.canActivateChecks.push(new tr(i)):(s.data=a.data,s._resolvedData=a._resolvedData),t(e,n,s.component?u?u.children:null:r,i,o),c&&u&&u.outlet&&u.outlet.isActivated&&o.canDeactivateChecks.push(new er(u.outlet.component,a))}else a&&ir(n,u,o),o.canActivateChecks.push(new tr(i)),t(e,null,s.component?u?u.children:null:r,i,o)}(e,s[e.value.outlet],r,i.concat([e.value]),o),delete s[e.value.outlet]}),qe(s,(t,e)=>ir(t,r.getContext(e),o)),o}(r,e?e._root:null,n,[r.value])}function rr(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function ir(t,e,n){const r=yn(t),i=t.value;qe(r,(t,r)=>{ir(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new er(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function or(t,e){return null!==t&&e&&e(new je(t)),Object(ct.a)(!0)}function sr(t,e){return null!==t&&e&&e(new Se(t)),Object(ct.a)(!0)}function ar(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(ct.a)(!0);const i=r.map(r=>xt(()=>{const i=rr(r,e,n);let o;if(function(t){return t&&Vn(t.canActivate)}(i))o=He(i.canActivate(e,t));else{if(!Vn(i))throw new Error("Invalid CanActivate guard");o=He(i(e,t))}return o.pipe(le())}));return Object(ct.a)(i).pipe(Bn())}function ur(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>xt(()=>{const i=e.guards.map(i=>{const o=rr(i,e.node,n);let s;if(function(t){return t&&Vn(t.canActivateChild)}(o))s=He(o.canActivateChild(r,t));else{if(!Vn(o))throw new Error("Invalid CanActivateChild guard");s=He(o(r,t))}return s.pipe(le())});return Object(ct.a)(i).pipe(Bn())}));return Object(ct.a)(i).pipe(Bn())}class cr{}class lr{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){try{const t=dr(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,ke),n=new _n([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},ke,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new pn(n,e),i=new wn(this.url,r);return this.inheritParamsAndData(i._root),Object(ct.a)(i)}catch(Sm){return new _t.a(e=>e.error(Sm))}}inheritParamsAndData(t){const e=t.value,n=bn(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=$e(e,(e,n)=>this.processSegmentGroup(t,e,n));return function(t){const e={};t.forEach(t=>{const n=e[t.value.outlet];if(n){const e=n.url.map(t=>t.toString()).join("/"),r=t.value.url.map(t=>t.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${e}' and '${r}'.`)}e[t.value.outlet]=t.value})}(n),n.sort((t,e)=>t.value.outlet===ke?-1:e.value.outlet===ke?1:t.value.outlet.localeCompare(e.value.outlet)),n}processSegment(t,e,n,r){for(const i of t)try{return this.processSegmentAgainstRoute(i,e,n,r)}catch(Sm){if(!(Sm instanceof cr))throw Sm}if(this.noLeftoversInUrl(e,n,r))return[];throw new cr}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo)throw new cr;if((t.outlet||ke)!==r)throw new cr;let i,o=[],s=[];if("**"===t.path){const o=n.length>0?Ve(n).parameters:{};i=new _n(n,o,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,gr(t),r,t.component,t,hr(e),fr(e)+n.length,vr(t))}else{const a=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new cr;return{consumedSegments:[],lastChild:0,parameters:{}}}const r=(e.matcher||Le)(n,t,e);if(!r)throw new cr;const i={};qe(r.posParams,(t,e)=>{i[e]=t.path});const o=r.consumed.length>0?Object.assign(Object.assign({},i),r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:o}}(e,t,n);o=a.consumedSegments,s=n.slice(a.lastChild),i=new _n(o,a.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,gr(t),r,t.component,t,hr(e),fr(e)+o.length,vr(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=dr(e,o,s,a,this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return[new pn(i,t)]}if(0===a.length&&0===c.length)return[new pn(i,[])];const l=this.processSegment(a,u,c,ke);return[new pn(i,l)]}}function hr(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function fr(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function dr(t,e,n,r,i){if(n.length>0&&function(t,e,n){return n.some(n=>pr(t,e,n)&&yr(n)!==ke)}(t,n,r)){const i=new We(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&yr(o)!==ke){const n=new We([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[yr(o)]=n}return i}(t,e,r,new We(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>pr(t,e,n))}(t,n,r)){const o=new We(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(pr(t,n,a)&&!i[yr(a)]){const n=new We([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[yr(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new We(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function pr(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function yr(t){return t.outlet||ke}function gr(t){return t.data||{}}function vr(t){return t.resolve||{}}function mr(t){return function(e){return e.pipe($t(e=>{const n=t(e);return n?Object(lt.a)(n).pipe(Object(jt.a)(()=>e)):Object(lt.a)([e])}))}}class br extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}let _r=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.yb({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r.Fb(0,"router-outlet")},directives:function(){return[Pr]},encapsulation:2}),t})();function wr(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];Er(r,Cr(e,r))}}function Er(t,e){if(!t)throw new Error(`\n      Invalid configuration of route '${e}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);if(Array.isArray(t))throw new Error(`Invalid configuration of route '${e}': Array cannot be specified`);if(!t.component&&!t.children&&!t.loadChildren&&t.outlet&&t.outlet!==ke)throw new Error(`Invalid configuration of route '${e}': a componentless route without children or loadChildren cannot have a named outlet set`);if(t.redirectTo&&t.children)throw new Error(`Invalid configuration of route '${e}': redirectTo and children cannot be used together`);if(t.redirectTo&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': redirectTo and loadChildren cannot be used together`);if(t.children&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': children and loadChildren cannot be used together`);if(t.redirectTo&&t.component)throw new Error(`Invalid configuration of route '${e}': redirectTo and component cannot be used together`);if(t.path&&t.matcher)throw new Error(`Invalid configuration of route '${e}': path and matcher cannot be used together`);if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error(`Invalid configuration of route '${e}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===t.path&&void 0===t.matcher)throw new Error(`Invalid configuration of route '${e}': routes must have either a path or a matcher specified`);if("string"==typeof t.path&&"/"===t.path.charAt(0))throw new Error(`Invalid configuration of route '${e}': path cannot start with a slash`);if(""===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch)throw new Error(`Invalid configuration of route '{path: "${e}", redirectTo: "${t.redirectTo}"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);if(void 0!==t.pathMatch&&"full"!==t.pathMatch&&"prefix"!==t.pathMatch)throw new Error(`Invalid configuration of route '${e}': pathMatch can only be set to 'prefix' or 'full'`);t.children&&wr(t.children,e)}function Cr(t,e){return e?t||e.path?t&&!e.path?t+"/":!t&&e.path?e.path:`${t}/${e.path}`:"":t}function Or(t){const e=t.children&&t.children.map(Or),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ke&&(n.component=_r),n}const Tr=new r.q("ROUTES");class Ir{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(Object(jt.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const r=n.create(t);return new Un(Ue(r.injector.get(Tr)).map(Or),r)}))}loadModuleFactory(t){return"string"==typeof t?Object(lt.a)(this.loader.load(t)):He(t()).pipe(Object(ue.a)(t=>t instanceof r.v?Object(ct.a)(t):Object(lt.a)(this.compiler.compileModuleAsync(t))))}}class Sr{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new xr,this.attachRef=null}}class xr{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Sr,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class jr{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Ar(t){throw t}function Nr(t,e,n){return e.parse("/")}function kr(t,e){return Object(ct.a)(null)}let Rr=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new ht.a,this.errorHandler=Ar,this.malformedUriErrorHandler=Nr,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:kr,afterPreactivation:kr},this.urlHandlingStrategy=new jr,this.routeReuseStrategy=new br,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=o.get(r.x),this.console=o.get(r.W);const c=o.get(r.z);this.isNgZoneEnabled=c instanceof r.z,this.resetConfig(u),this.currentUrlTree=new ze(new We([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Ir(s,a,t=>this.triggerEvent(new Te(t)),t=>this.triggerEvent(new Ie(t))),this.routerState=vn(this.currentUrlTree,this.rootComponentType),this.transitions=new dt({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(kt(t=>0!==t.id),Object(jt.a)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),$t(t=>{let n=!1,r=!1;return Object(ct.a)(t).pipe(Object(he.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),$t(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(ct.a)(t).pipe($t(t=>{const n=this.transitions.getValue();return e.next(new ge(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?St.a:[t]}),$t(t=>Promise.resolve(t)),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,function(t){return t.pipe($t(t=>function(t,e,n,r,i){return new Kn(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(Object(jt.a)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e})))))}),Object(he.a)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return function(o){return o.pipe(Object(ue.a)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){return new lr(t,e,n,r,i,o).recognize()}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object(jt.a)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t})))))}}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(he.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),Object(he.a)(t=>{const n=new _e(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new ge(n,this.serializeUrl(r),i,o);e.next(a);const u=vn(r,this.rootComponentType).snapshot;return Object(ct.a)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),St.a}),mr(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(he.a)(t=>{const e=new we(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(jt.a)(t=>Object.assign(Object.assign({},t),{guards:nr(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return function(n){return n.pipe(Object(ue.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Object(ct.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(lt.a)(t).pipe(Object(ue.a)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(ct.a)(!0);const s=o.map(o=>{const s=rr(o,e,i);let a;if(function(t){return t&&Vn(t.canDeactivate)}(s))a=He(s.canDeactivate(t,e,n,r));else{if(!Vn(s))throw new Error("Invalid CanDeactivate guard");a=He(s(t,e,n,r))}return a.pipe(le())});return Object(ct.a)(s).pipe(Bn())}(t.component,t.route,n,e,r)),le(t=>!0!==t,!0))}(s,r,i,t).pipe(Object(ue.a)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return Object(lt.a)(e).pipe(ce(e=>Object(lt.a)([sr(e.route.parent,r),or(e.route,r),ur(t,e.path,n),ar(t,e.route,n)]).pipe(Nt(),le(t=>!0!==t,!0))),le(t=>!0!==t,!0))}(r,o,t,e):Object(ct.a)(n)),Object(jt.a)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))}))}}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(he.a)(t=>{if(qn(t.guardsResult)){const e=De(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}}),Object(he.a)(t=>{const e=new Ee(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),kt(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new me(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),mr(t=>{if(t.guards.canActivateChecks.length)return Object(ct.a)(t).pipe(Object(he.a)(t=>{const e=new Ce(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),$t(t=>{let n=!1;return Object(ct.a)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,function(t){return t.pipe(Object(ue.a)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Object(ct.a)(t);let o=0;return Object(lt.a)(n).pipe(ce(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(ct.a)({});const o={};return Object(lt.a)(i).pipe(Object(ue.a)(i=>function(t,e,n,r){const i=rr(t,e,r);return He(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object(he.a)(t=>{o[i]=t}))),Lt(1),Object(ue.a)(()=>Object.keys(o).length===i.length?Object(ct.a)(o):St.a))}(t._resolve,t,e,r).pipe(Object(jt.a)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),bn(t,n).resolve),null)))}(t.route,e,r,i)),Object(he.a)(()=>o++),Lt(1),Object(ue.a)(e=>o===n.length?Object(ct.a)(t):St.a))}))}),Object(he.a)({next:()=>n=!0,complete:()=>{if(!n){const n=new me(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),Object(he.a)(t=>{const e=new Oe(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),mr(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(jt.a)(t=>{const e=function(t,e,n){const r=function t(e,n,r){if(r&&e.shouldReuseRoute(n.value,r.value.snapshot)){const i=r.value;i._futureSnapshot=n.value;const o=function(e,n,r){return n.children.map(n=>{for(const i of r.children)if(e.shouldReuseRoute(i.value.snapshot,n.value))return t(e,n,i);return t(e,n)})}(e,n,r);return new pn(i,o)}{const r=e.retrieve(n.value);if(r){const t=r.route;return function t(e,n){if(e.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=e.value;for(let r=0;r<e.children.length;++r)t(e.children[r],n.children[r])}(n,t),t}{const r=new mn(new dt((i=n.value).url),new dt(i.params),new dt(i.queryParams),new dt(i.fragment),new dt(i.data),i.outlet,i.component,i),o=n.children.map(n=>t(e,n));return new pn(r,o)}}var i}(t,e._root,n?n._root:void 0);return new gn(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Object(he.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=t=>this.triggerEvent(t),Object(jt.a)(t=>(new Fn(s,t.targetRouterState,t.currentRouterState,a).activate(o),t))),Object(he.a)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new me(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new de(i))),oe(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=qn(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new me(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);return this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new be(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(Kc){t.reject(Kc)}}var i;return St.a}));var i,o,s,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){wr(t),this.config=t.map(Or),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0)}createUrlTree(t,e={}){const{relativeTo:n,queryParams:i,fragment:o,preserveQueryParams:s,queryParamsHandling:a,preserveFragment:u}=e;Object(r.T)()&&s&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");const c=n||this.routerState.root,l=u?this.currentUrlTree.fragment:o;let h=null;if(a)switch(a){case"merge":h=Object.assign(Object.assign({},this.currentUrlTree.queryParams),i);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=i||null}else h=s?this.currentUrlTree.queryParams:i||null;return null!==h&&(h=this.removeEmptyProps(h)),function(t,e,n,r,i){if(0===n.length)return Sn(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new xn(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return qe(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new xn(n,e,r)}(n);if(o.toRoot())return Sn(e.root,new We([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new jn(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new jn(t,t===e.root,0)}const r=In(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new jn(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?kn(s.segmentGroup,s.index,o.commands):Nn(s.segmentGroup,s.index,o.commands);return Sn(s.segmentGroup,a,e,r,i)}(c,this.currentUrlTree,t,h,l)}navigateByUrl(t,e={skipLocationChange:!1}){Object(r.T)()&&this.isNgZoneEnabled&&!r.z.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");const n=qn(t)?t:this.parseUrl(t),i=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(i,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(Sm){e=this.malformedUriErrorHandler(Sm,this.urlSerializer,t)}return e}isActive(t,e){if(qn(t))return Be(this.currentUrlTree,t,e);const n=this.parseUrl(t);return Be(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new ve(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.M),r.Jb(Ke),r.Jb(xr),r.Jb(E),r.Jb(r.r),r.Jb(r.w),r.Jb(r.i),r.Jb(void 0))},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})(),Pr=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.n,this.deactivateEvents=new r.n,this.name=i||ke,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new Dr(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Eb(xr),r.Eb(r.P),r.Eb(r.j),r.Kb("name"),r.Eb(r.h))},t.\u0275dir=r.zb({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class Dr{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===mn?this.route:t===xr?this.childContexts:this.parent.get(t,e)}}class Lr{}class Fr{preload(t,e){return Object(ct.a)(null)}}let Mr=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new Ir(e,n,e=>t.triggerEvent(new Te(e)),e=>t.triggerEvent(new Ie(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(kt(t=>t instanceof ve),ce(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.x);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(lt.a)(n).pipe(Object(At.a)(),Object(jt.a)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>this.loader.load(t.injector,e).pipe(Object(ue.a)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(Rr),r.Jb(r.w),r.Jb(r.i),r.Jb(r.r),r.Jb(Lr))},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})(),Ur=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ge?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ve&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ne&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new Ne(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(Rr),r.Jb(N),r.Jb(void 0))},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})();const Vr=new r.q("ROUTER_CONFIGURATION"),qr=new r.q("ROUTER_FORROOT_GUARD"),Hr=[E,{provide:Ke,useClass:Ye},{provide:Rr,useFactory:function(t,e,n,r,i,o,a,u={},c,l){const h=new Rr(null,t,e,n,r,i,o,Ue(a));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),u.errorHandler&&(h.errorHandler=u.errorHandler),u.malformedUriErrorHandler&&(h.malformedUriErrorHandler=u.malformedUriErrorHandler),u.enableTracing){const t=s();h.events.subscribe(e=>{t.logGroup("Router Event: "+e.constructor.name),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return u.onSameUrlNavigation&&(h.onSameUrlNavigation=u.onSameUrlNavigation),u.paramsInheritanceStrategy&&(h.paramsInheritanceStrategy=u.paramsInheritanceStrategy),u.urlUpdateStrategy&&(h.urlUpdateStrategy=u.urlUpdateStrategy),u.relativeLinkResolution&&(h.relativeLinkResolution=u.relativeLinkResolution),h},deps:[Ke,xr,E,r.r,r.w,r.i,Tr,Vr,[class{},new r.A],[class{},new r.A]]},xr,{provide:mn,useFactory:function(t){return t.routerState.root},deps:[Rr]},{provide:r.w,useClass:r.J},Mr,Fr,class{preload(t,e){return e().pipe(oe(()=>Object(ct.a)(null)))}},{provide:Vr,useValue:{enableTracing:!1}}];function Br(){return new r.y("Router",Rr)}let zr=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[Hr,$r(e),{provide:qr,useFactory:Qr,deps:[[Rr,new r.A,new r.I]]},{provide:Vr,useValue:n||{}},{provide:v,useFactory:Gr,deps:[u,[new r.p(b),new r.A],Vr]},{provide:Ur,useFactory:Wr,deps:[Rr,N,Vr]},{provide:Lr,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Fr},{provide:r.y,multi:!0,useFactory:Br},[Kr,{provide:r.d,multi:!0,useFactory:Yr,deps:[Kr]},{provide:Xr,useFactory:Jr,deps:[Kr]},{provide:r.b,multi:!0,useExisting:Xr}]]}}static forChild(e){return{ngModule:t,providers:[$r(e)]}}}return t.\u0275mod=r.Cb({type:t}),t.\u0275inj=r.Bb({factory:function(e){return new(e||t)(r.Jb(qr,8),r.Jb(Rr,8))}}),t})();function Wr(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new Ur(t,e,n)}function Gr(t,e,n={}){return n.useHash?new w(t,e):new _(t,e)}function Qr(t){if(t)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function $r(t){return[{provide:r.a,multi:!0,useValue:t},{provide:Tr,multi:!0,useValue:t}]}let Kr=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new ht.a}appInitializer(){return this.injector.get(l,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(Rr),r=this.injector.get(Vr);if(this.isLegacyDisabled(r)||this.isLegacyEnabled(r))t(!0);else if("disabled"===r.initialNavigation)n.setUpLocationChangeListener(),t(!0);else{if("enabled"!==r.initialNavigation)throw new Error(`Invalid initialNavigation options: '${r.initialNavigation}'`);n.hooks.afterPreactivation=()=>this.initNavigation?Object(ct.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()}return e})}bootstrapListener(t){const e=this.injector.get(Vr),n=this.injector.get(Mr),i=this.injector.get(Ur),o=this.injector.get(Rr),s=this.injector.get(r.g);t===s.components[0]&&(this.isLegacyEnabled(e)?o.initialNavigation():this.isLegacyDisabled(e)&&o.setUpLocationChangeListener(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(t){return"legacy_enabled"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation}isLegacyDisabled(t){return"legacy_disabled"===t.initialNavigation||!1===t.initialNavigation}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.r))},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})();function Yr(t){return t.appInitializer.bind(t)}function Jr(t){return t.bootstrapListener.bind(t)}const Xr=new r.q("Router Initializer"),Zr=function(t){return{hidden:t}},ti=[{path:"",component:(()=>{class t{constructor(){this.isHidden=!1}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.yb({type:t,selectors:[["tod-menu"]],decls:21,vars:3,consts:[[1,"tod-menu-header"],[1,"fa","fa-bars",3,"click"],[1,"tod-menu",3,"ngClass"],["href","/game"],["href","/actions"],["href","/questions"],["href","#tbd"]],template:function(t,e){1&t&&(r.Hb(0,"div",0),r.Hb(1,"i",1),r.Mb("click",(function(){return e.isHidden=!e.isHidden})),r.Gb(),r.Hb(2,"span"),r.Tb(3,"Menu"),r.Gb(),r.Gb(),r.Hb(4,"nav",2),r.Hb(5,"ul"),r.Hb(6,"li"),r.Hb(7,"a",3),r.Tb(8,"New Game"),r.Gb(),r.Gb(),r.Hb(9,"li"),r.Hb(10,"a",4),r.Tb(11,"Actions"),r.Gb(),r.Gb(),r.Hb(12,"li"),r.Hb(13,"a",5),r.Tb(14,"Questions"),r.Gb(),r.Gb(),r.Hb(15,"li"),r.Hb(16,"a",6),r.Tb(17,"Save"),r.Gb(),r.Gb(),r.Hb(18,"li"),r.Hb(19,"a",6),r.Tb(20,"Load"),r.Gb(),r.Gb(),r.Gb(),r.Gb()),2&t&&(r.vb(4),r.Ob("ngClass",r.Pb(1,Zr,e.isHidden)))},directives:[j],styles:["@keyframes colorchange{0%{color:red}10%{color:orange}20%{color:#ff0}30%{color:green}40%{color:#add8e6}50%{color:#00f}60%{color:purple}70%{color:#fff}80%{color:#000}90%{color:maroon}to{color:#f90}}.tod-menu-header[_ngcontent-%COMP%]{background:#ffb6c1}.tod-menu-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.666rem;font-family:monospace;font-weight:700}.tod-menu-header[_ngcontent-%COMP%]   .fa.fa-bars[_ngcontent-%COMP%]{margin:1.666rem;background:pink;padding:.666rem;border:1px solid #fff}.tod-menu[_ngcontent-%COMP%]{padding:.666rem .666rem .666rem 0;background:#ffffd0;transform:translateX(0);transition:transform 1.333s ease-out}.tod-menu.hidden[_ngcontent-%COMP%]{transform:translateX(-366%) scaleX(6);transition:transform 1.666s ease-out}.tod-menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;text-align:center;padding-left:0}.tod-menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:.666rem;margin:.666rem .666rem .666rem 0;font-size:1.666rem;background:#0f0;color:#fff;text-decoration:none;font-family:monospace}"]}),t})()},{path:"game",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.yb({type:t,selectors:[["tod-game"]],decls:2,vars:0,template:function(t,e){1&t&&(r.Hb(0,"p"),r.Tb(1,"game works!"),r.Gb())},styles:[""]}),t})()},{path:"actions",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.yb({type:t,selectors:[["tod-actions"]],decls:3,vars:0,template:function(t,e){1&t&&(r.Hb(0,"ul"),r.Hb(1,"li"),r.Tb(2,"Todo: List of actions."),r.Gb(),r.Gb())},styles:[""]}),t})()},{path:"questions",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.yb({type:t,selectors:[["tod-questions"]],decls:2,vars:0,template:function(t,e){1&t&&(r.Hb(0,"p"),r.Tb(1,"questions works!"),r.Gb())},styles:[""]}),t})()}];let ei=(()=>{class t{}return t.\u0275mod=r.Cb({type:t}),t.\u0275inj=r.Bb({factory:function(e){return new(e||t)},imports:[[zr.forRoot(ti)],zr]}),t})(),ni=(()=>{class t{constructor(){this.title="tod"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.yb({type:t,selectors:[["tod-root"]],decls:1,vars:0,template:function(t,e){1&t&&r.Fb(0,"router-outlet")},directives:[Pr],styles:[""]}),t})();var ri=n("spgP"),ii=n("D0XW");function oi(){return t=>t.lift(new si)}class si{call(t,e){return e.subscribe(new ai(t))}}class ai extends gt.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}function ui(t,e){return n=>n.lift(new ci(t,e))}class ci{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new li(t,this.compare,this.keySelector))}}class li extends gt.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}var hi=n("pxpQ"),fi=n("Jgta"),di=n("zIRd"),pi=n("q/0M"),yi=n("qOnz"),gi=function(t,e){return(gi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function vi(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var mi,bi="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},_i=_i||{},wi=bi||self;function Ei(){}function Ci(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Oi(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Ti="closure_uid_"+(1e9*Math.random()>>>0),Ii=0;function Si(t,e,n){return t.call.apply(t.bind,arguments)}function xi(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function ji(t,e,n){return(ji=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Si:xi).apply(null,arguments)}function Ai(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Ni(){return Date.now()}function ki(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function Ri(){this.j=this.j,this.i=this.i}Ri.prototype.j=!1,Ri.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,Ti)&&t[Ti]||(t[Ti]=++Ii)}(this)},Ri.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Pi=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Di=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Li(t){return Array.prototype.concat.apply([],arguments)}function Fi(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Mi(t){return/^[\s\xa0]*$/.test(t)}var Ui,Vi=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function qi(t,e){return-1!=t.indexOf(e)}function Hi(t,e){return t<e?-1:t>e?1:0}t:{var Bi=wi.navigator;if(Bi){var zi=Bi.userAgent;if(zi){Ui=zi;break t}}Ui=""}function Wi(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Gi(t){var e={};for(var n in t)e[n]=t[n];return e}var Qi="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $i(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Qi.length;o++)n=Qi[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Ki(t){return Ki[" "](t),t}Ki[" "]=Ei;var Yi,Ji,Xi=qi(Ui,"Opera"),Zi=qi(Ui,"Trident")||qi(Ui,"MSIE"),to=qi(Ui,"Edge"),eo=to||Zi,no=qi(Ui,"Gecko")&&!(qi(Ui.toLowerCase(),"webkit")&&!qi(Ui,"Edge"))&&!(qi(Ui,"Trident")||qi(Ui,"MSIE"))&&!qi(Ui,"Edge"),ro=qi(Ui.toLowerCase(),"webkit")&&!qi(Ui,"Edge");function io(){var t=wi.document;return t?t.documentMode:void 0}t:{var oo="",so=(Ji=Ui,no?/rv:([^\);]+)(\)|;)/.exec(Ji):to?/Edge\/([\d\.]+)/.exec(Ji):Zi?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Ji):ro?/WebKit\/(\S+)/.exec(Ji):Xi?/(?:Version)[ \/]?(\S+)/.exec(Ji):void 0);if(so&&(oo=so?so[1]:""),Zi){var ao=io();if(null!=ao&&ao>parseFloat(oo)){Yi=String(ao);break t}}Yi=oo}var uo={};function co(t){return function(t,e){var n=uo;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=Vi(String(Yi)).split("."),r=Vi(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=Hi(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||Hi(0==s[2].length,0==a[2].length)||Hi(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}var lo=wi.document&&Zi&&(io()||parseInt(Yi,10))||void 0,ho=!Zi||9<=Number(lo),fo=Zi&&!co("9"),po=function(){if(!wi.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{wi.addEventListener("test",Ei,e),wi.removeEventListener("test",Ei,e)}catch(n){}return t}();function yo(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function go(t,e){if(yo.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(no){t:{try{Ki(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:vo[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}yo.prototype.b=function(){this.defaultPrevented=!0},ki(go,yo);var vo={2:"touch",3:"pen",4:"mouse"};go.prototype.b=function(){go.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,fo)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var mo="closure_listenable_"+(1e6*Math.random()|0),bo=0;function _o(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++bo,this.Y=this.Z=!1}function wo(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Eo(t){this.src=t,this.a={},this.b=0}function Co(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=Pi(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(wo(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function Oo(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}Eo.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Oo(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new _o(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var To="closure_lm_"+(1e6*Math.random()|0),Io={};function So(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}return r=Do(r),e&&e[mo]?e.wa(n,r,Oi(i)?!!i.capture:!!i,o):xo(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)So(t,e[o],n,r,i);return null}return n=Do(n),t&&t[mo]?t.va(e,n,Oi(r)?!!r.capture:!!r,i):xo(t,e,n,!1,r,i)}function xo(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Oi(i)?!!i.capture:!!i;if(s&&!ho)return null;var a=Ro(t);if(a||(t[To]=a=new Eo(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=ko,e=ho?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)po||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Ao(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function jo(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[mo])Co(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Ao(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Ro(e))?(Co(n,t),0==n.b&&(n.src=null,e[To]=null)):wo(t)}}}function Ao(t){return t in Io?Io[t]:Io[t]="on"+t}function No(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&jo(t),n.call(r,e)}function ko(t,e){if(t.Y)return!0;if(!ho){if(!e)t:{e=["window","event"];for(var n=wi,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return No(t,e=new go(e,this))}return No(t,new go(e,this))}function Ro(t){return(t=t[To])instanceof Eo?t:null}var Po="__closure_events_fn_"+(1e9*Math.random()>>>0);function Do(t){return"function"==typeof t?t:(t[Po]||(t[Po]=function(e){return t.handleEvent(e)}),t[Po])}function Lo(){Ri.call(this),this.c=new Eo(this),this.J=this,this.C=null}function Fo(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new yo(e,t);else if(e instanceof yo)e.target=e.target||t;else{var i=e;$i(e=new yo(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=Mo(s,r,!0,e)&&i}if(i=Mo(s=e.a=t,r,!0,e)&&i,i=Mo(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Mo(s=e.a=n[o],r,!1,e)&&i}function Mo(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&Co(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}ki(Lo,Ri),Lo.prototype[mo]=!0,(mi=Lo.prototype).addEventListener=function(t,e,n,r){So(this,t,e,n,r)},mi.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=Oi(i)?!!i.capture:!!i,r=Do(r),e&&e[mo]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=Oo(s=e.a[n],r,i,o))&&(wo(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--))):e&&(e=Ro(e))&&(n=e.a[n.toString()],e=-1,n&&(e=Oo(n,r,i,o)),(r=-1<e?n[e]:null)&&jo(r))}(this,t,e,n,r)},mi.G=function(){if(Lo.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)wo(n[r]);delete e.a[t],e.b--}}this.C=null},mi.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},mi.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Uo=wi.JSON.stringify;function Vo(){this.b=this.a=null}var qo,Ho=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())((function(){return new zo}),(function(t){t.reset()}));function Bo(){var t=$o,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function zo(){this.next=this.b=this.a=null}function Wo(t){wi.setTimeout((function(){throw t}),0)}function Go(t,e){qo||function(){var t=wi.Promise.resolve(void 0);qo=function(){t.then(Ko)}}(),Qo||(qo(),Qo=!0),$o.add(t,e)}Vo.prototype.add=function(t,e){var n=Ho.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},zo.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},zo.prototype.reset=function(){this.next=this.b=this.a=null};var Qo=!1,$o=new Vo;function Ko(){for(var t;t=Bo();){try{t.a.call(t.b)}catch(n){Wo(n)}var e=Ho;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Qo=!1}function Yo(t,e){Lo.call(this),this.b=t||1,this.a=e||wi,this.f=ji(this.Za,this),this.g=Ni()}function Jo(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Xo(t,e,n){if("function"==typeof t)n&&(t=ji(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=ji(t.handleEvent,t)}return 2147483647<Number(e)?-1:wi.setTimeout(t,e||0)}function Zo(t){t.a=Xo((function(){t.a=null,t.c&&(t.c=!1,Zo(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}ki(Yo,Lo),(mi=Yo.prototype).aa=!1,mi.M=null,mi.Za=function(){if(this.aa){var t=Ni()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Fo(this,"tick"),this.aa&&(Jo(this),this.start()))}},mi.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Ni())},mi.G=function(){Yo.X.G.call(this),Jo(this),delete this.a};var ts=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}gi(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Zo(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(wi.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(Ri);function es(t){Ri.call(this),this.b=t,this.a={}}ki(es,Ri);var ns=[];function rs(t,e,n,r){Array.isArray(n)||(n&&(ns[0]=n.toString()),n=ns);for(var i=0;i<n.length;i++){var o=So(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function is(t){Wi(t.a,(function(t,e){this.a.hasOwnProperty(e)&&jo(t)}),t),t.a={}}function os(){this.a=!0}function ss(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Uo(n)}catch(a){return e}}(t,n)+(r?" "+r:"")}))}es.prototype.G=function(){es.X.G.call(this),is(this)},es.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},os.prototype.info=function(){};var as={},us=null;function cs(){return us=us||new Lo}function ls(t){yo.call(this,as.Fa,t)}function hs(t){var e=cs();Fo(e,new ls(e,t))}function fs(t,e){yo.call(this,as.STAT_EVENT,t),this.stat=e}function ds(t){var e=cs();Fo(e,new fs(e,t))}function ps(t){yo.call(this,as.Ga,t)}function ys(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return wi.setTimeout((function(){t()}),e)}as.Fa="serverreachability",ki(ls,yo),as.STAT_EVENT="statevent",ki(fs,yo),as.Ga="timingevent",ki(ps,yo);var gs={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},vs={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function ms(){}function bs(){}ms.prototype.a=null;var _s,ws={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Es(){yo.call(this,"d")}function Cs(){yo.call(this,"c")}function Os(){}function Ts(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new es(this),this.P=Is,this.R=new Yo(t=eo?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}ki(Es,yo),ki(Cs,yo),ki(Os,ms),_s=new Os;var Is=45e3,Ss={},xs={};function js(t,e,n){t.H=1,t.i=Js(Ws(e)),t.j=n,t.I=!0,As(t,null)}function As(t,e){t.u=Ni(),Rs(t),t.l=Ws(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),la(n.b,"t",r),t.D=0,t.a=iu(t.g,t.g.C?e:null),0<t.O&&(t.F=new ts(ji(t.Ca,t,t.a),t.O)),rs(t.J,t.a,"readystatechange",t.Xa),e=t.B?Gi(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),hs(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.c,t.m,t.l,t.f,t.S,t.j)}function Ns(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=ks(t,n);if(i==xs){4==e&&(t.h=4,ds(14),r=!1),ss(t.c,t.f,null,"[Incomplete Response]");break}if(i==Ss){t.h=4,ds(15),ss(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}ss(t.c,t.f,i,null),Ms(t,i)}4==e&&0==n.length&&(t.h=1,ds(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ya(e),e.F=!0,ds(11))):(ss(t.c,t.f,n,"[Invalid Chunked Response]"),Fs(t),Ls(t))}function ks(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?xs:(n=Number(e.substring(n,r)),isNaN(n)?Ss:(r+=1)+n>e.length?xs:(e=e.substr(r,n),t.D=r+n,e))}function Rs(t){t.T=Ni()+t.P,Ps(t,t.P)}function Ps(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=ys(ji(t.Va,t),e)}function Ds(t){t.o&&(wi.clearTimeout(t.o),t.o=null)}function Ls(t){0==t.g.v||t.A||Za(t.g,t)}function Fs(t){Ds(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Jo(t.R),is(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Ms(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||va(n.b,t)))if(n.I=t.N,!t.C&&va(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(Vv){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Xa(n),qa(n)}Ka(n),ds(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=ys(ji(n.Sa,n),6e3));if(1>=ga(n.b)&&n.ea){try{n.ea()}catch(Vv){}n.ea=void 0}}else eu(n,11)}else if((t.C||n.a==t)&&Xa(n),!Mi(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(qi(l,"spdy")||qi(l,"quic")||qi(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(ma(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,Ys(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=Ni()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=t;if((u=n).la=ru(u,u.C?u.ga:null,u.fa),d.C){ba(u.b,d);var p=d,y=u.D;y&&p.setTimeout(y),p.o&&(Ds(p),Rs(p)),u.a=d}else $a(u);0<n.g.length&&za(n)}else"stop"!=i[0]&&"close"!=i[0]||eu(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?eu(n,7):Va(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);hs(4)}catch(Vv){}}function Us(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Ci(t)||"string"==typeof t)Di(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(Ci(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(Ci(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Vs(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Vs)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function qs(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Hs(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Hs(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Hs(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(mi=Ts.prototype).setTimeout=function(t){this.P=t},mi.Xa=function(t){t=t.target;var e=this.F;e&&3==La(t)?e.f():this.Ca(t)},mi.Ca=function(t){try{if(t==this.a)t:{var e=La(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!eo&&!this.a.$())){this.A||4!=e||7==n||hs(8==n||0>=r?3:2),Ds(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Mi(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,ds(12),Fs(this),Ls(this);break t}ss(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Ms(this,u)}this.I?(Ns(this,e,o),eo&&this.b&&3==e&&(rs(this.J,this.R,"tick",this.Wa),this.R.start())):(ss(this.c,this.f,o,null),Ms(this,o)),4==e&&Fs(this),this.b&&!this.A&&(4==e?Za(this.g,this):(this.b=!1,Rs(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,ds(12)):(this.h=0,ds(13)),Fs(this),Ls(this)}}}catch(c){}},mi.Wa=function(){if(this.a){var t=La(this.a),e=this.a.$();this.D<e.length&&(Ds(this),Ns(this,t,e),this.b&&4!=t&&Rs(this))}},mi.cancel=function(){this.A=!0,Fs(this)},mi.Va=function(){this.o=null;var t=Ni();0<=t-this.T?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(hs(3),ds(17)),Fs(this),this.h=2,Ls(this)):Ps(this,this.T-t)},(mi=Vs.prototype).K=function(){qs(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},mi.L=function(){return qs(this),this.a.concat()},mi.get=function(t,e){return Hs(this.b,t)?this.b[t]:e},mi.set=function(t,e){Hs(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},mi.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Bs=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function zs(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof zs){this.a=void 0!==e?e:t.a,Gs(this,t.f),this.j=t.j,Qs(this,t.c),$s(this,t.h),this.g=t.g,e=t.b;var n=new sa;n.c=e.c,e.a&&(n.a=new Vs(e.a),n.b=e.b),Ks(this,n),this.i=t.i}else t&&(n=String(t).match(Bs))?(this.a=!!e,Gs(this,n[1]||"",!0),this.j=Xs(n[2]||""),Qs(this,n[3]||"",!0),$s(this,n[4]),this.g=Xs(n[5]||"",!0),Ks(this,n[6]||"",!0),this.i=Xs(n[7]||"")):(this.a=!!e,this.b=new sa(null,this.a))}function Ws(t){return new zs(t)}function Gs(t,e,n){t.f=n?Xs(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Qs(t,e,n){t.c=n?Xs(e,!0):e}function $s(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Ks(t,e,n){e instanceof sa?(t.b=e,function(t,e){e&&!t.f&&(aa(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(ua(this,e),la(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=Zs(e,ia)),t.b=new sa(e,t.a))}function Ys(t,e,n){t.b.set(e,n)}function Js(t){return Ys(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Ni()).toString(36)),t}function Xs(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Zs(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,ta),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ta(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}zs.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Zs(e,ea,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Zs(e,ea,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Zs(n,"/"==n.charAt(0)?ra:na,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Zs(n,oa)),t.join("")};var ea=/[#\/\?@]/g,na=/[#\?:]/g,ra=/[#\?]/g,ia=/[#\?@]/g,oa=/#/g;function sa(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function aa(t){t.a||(t.a=new Vs,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function ua(t,e){aa(t),e=ha(t,e),Hs(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Hs((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&qs(t)))}function ca(t,e){return aa(t),e=ha(t,e),Hs(t.a.b,e)}function la(t,e,n){ua(t,e),0<n.length&&(t.c=null,t.a.set(ha(t,e),Fi(n)),t.b+=n.length)}function ha(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(mi=sa.prototype).add=function(t,e){aa(this),this.c=null,t=ha(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},mi.forEach=function(t,e){aa(this),this.a.forEach((function(n,r){Di(n,(function(n){t.call(e,n,r,this)}),this)}),this)},mi.L=function(){aa(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},mi.K=function(t){aa(this);var e=[];if("string"==typeof t)ca(this,t)&&(e=Li(e,this.a.get(ha(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=Li(e,t[n])}return e},mi.set=function(t,e){return aa(this),this.c=null,ca(this,t=ha(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},mi.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},mi.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var fa=function(){return function(t,e){this.b=t,this.a=e}}();function da(t){this.g=t||pa,t=wi.PerformanceNavigationTiming?0<(t=wi.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(wi.ia&&wi.ia.ya&&wi.ia.ya()&&wi.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var pa=10;function ya(t){return!!t.b||!!t.a&&t.a.size>=t.f}function ga(t){return t.b?1:t.a?t.a.size:0}function va(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function ma(t,e){t.a?t.a.add(e):t.b=e}function ba(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function _a(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=vi(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Fi(t.c)}function wa(){}function Ea(){this.a=new wa}function Ca(t,e,n){var r=n||"";try{Us(t,(function(t,n){var i=t;Oi(t)&&(i=Uo(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(Sm){throw e.push(r+"type="+encodeURIComponent("_badmap")),Sm}}function Oa(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}da.prototype.cancel=function(){var t,e;if(this.c=_a(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=vi(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},wa.prototype.stringify=function(t){return wi.JSON.stringify(t,void 0)},wa.prototype.parse=function(t){return wi.JSON.parse(t,void 0)};var Ta=wi.JSON.parse;function Ia(t){Lo.call(this),this.headers=new Vs,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Sa,this.D=this.F=!1}ki(Ia,Lo);var Sa="",xa=/^https?$/i,ja=["POST","PUT"];function Aa(t){return"content-type"==t.toLowerCase()}function Na(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,ka(t),Pa(t)}function ka(t){t.u||(t.u=!0,Fo(t,"complete"),Fo(t,"error"))}function Ra(t){if(t.b&&void 0!==_i&&(!t.s[1]||4!=La(t)||2!=t.W()))if(t.l&&4==La(t))Xo(t.za,0,t);else if(Fo(t,"readystatechange"),4==La(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Bs)[1]||null;if(!o&&wi.self&&wi.self.location){var s=wi.self.location.protocol;o=s.substr(0,s.length-1)}i=!xa.test(o?o.toLowerCase():"")}e=i}if(e)Fo(t,"complete"),Fo(t,"success");else{t.h=6;try{var a=2<La(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",ka(t)}}finally{Pa(t)}}}function Pa(t,e){if(t.a){Da(t);var n=t.a,r=t.s[0]?Ei:null;t.a=null,t.s=null,e||Fo(t,"ready");try{n.onreadystatechange=r}catch(Sm){}}}function Da(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(wi.clearTimeout(t.m),t.m=null)}function La(t){return t.a?t.a.readyState:0}function Fa(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Wi(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Ys(t,e,n))}function Ma(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Ua(t){this.pa=0,this.g=[],this.c=new os,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Ma("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Ma("baseRetryDelayMs",5e3,t),this.Ra=Ma("retryDelaySeedMs",1e4,t),this.Ma=Ma("forwardChannelMaxRetries",2,t),this.ma=Ma("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new da(t&&t.concurrentRequestLimit),this.ka=new Ea,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Va(t){if(Ha(t),3==t.v){var e=t.R++,n=Ws(t.B);Ys(n,"SID",t.J),Ys(n,"RID",e),Ys(n,"TYPE","terminate"),Ga(t,n),(e=new Ts(t,t.c,e,void 0)).H=2,e.i=Js(Ws(n)),n=!1,wi.navigator&&wi.navigator.sendBeacon&&(n=wi.navigator.sendBeacon(e.i.toString(),"")),!n&&wi.Image&&((new Image).src=e.i,n=!0),n||(e.a=iu(e.g,null),e.a.ba(e.i)),e.u=Ni(),Rs(e)}nu(t)}function qa(t){t.a&&(Ya(t),t.a.cancel(),t.a=null)}function Ha(t){qa(t),t.j&&(wi.clearTimeout(t.j),t.j=null),Xa(t),t.b.cancel(),t.h&&("number"==typeof t.h&&wi.clearTimeout(t.h),t.h=null)}function Ba(t,e){t.g.push(new fa(t.Oa++,e)),3==t.v&&za(t)}function za(t){ya(t.b)||t.h||(t.h=!0,Go(t.Ba,t),t.u=0)}function Wa(t,e){var n;n=e?e.f:t.R++;var r=Ws(t.B);Ys(r,"SID",t.J),Ys(r,"RID",n),Ys(r,"AID",t.P),Ga(t,r),t.i&&t.l&&Fa(r,t.i,t.l),n=new Ts(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Qa(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),ma(t.b,n),js(n,r,e)}function Ga(t,e){t.f&&Us({},(function(t,n){Ys(e,n,t)}))}function Qa(t,e,n){n=Math.min(t.g.length,n);var r=t.f?ji(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{Ca(l,s,"req"+c+"_")}catch(Mu){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function $a(t){t.a||t.j||(t.T=1,Go(t.Aa,t),t.o=0)}function Ka(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=ys(ji(t.Aa,t),tu(t,t.o)),t.o++,0))}function Ya(t){null!=t.s&&(wi.clearTimeout(t.s),t.s=null)}function Ja(t){t.a=new Ts(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Ws(t.la);Ys(e,"RID","rpc"),Ys(e,"SID",t.J),Ys(e,"CI",t.H?"0":"1"),Ys(e,"AID",t.P),Ga(t,e),Ys(e,"TYPE","xmlhttp"),t.i&&t.l&&Fa(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Js(Ws(e)),n.j=null,n.I=!0,As(n,t)}function Xa(t){null!=t.m&&(wi.clearTimeout(t.m),t.m=null)}function Za(t,e){var n=null;if(t.a==e){Xa(t),Ya(t),t.a=null;var r=2}else{if(!va(t.b,e))return;n=e.s,ba(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=Ni()-e.u;var i=t.u;Fo(r=cs(),new ps(r,n,e,i)),za(t)}else $a(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(ga(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=ys(ji(t.Ba,t,e),tu(t,t.u)),t.u++,0)))}(t,e)||2==r&&Ka(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:eu(t,5);break;case 4:eu(t,10);break;case 3:eu(t,6);break;default:eu(t,2)}}function tu(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function eu(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=ji(t.Ya,t);n||(n=new zs("//www.google.com/images/cleardot.gif"),wi.location&&"http"==wi.location.protocol||Gs(n,"https"),Js(n)),function(t,e){var n=new os;if(wi.Image){var r=new Image;r.onload=Ai(Oa,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Ai(Oa,n,r,"TestLoadImage: error",!1,e),r.onabort=Ai(Oa,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ai(Oa,n,r,"TestLoadImage: timeout",!1,e),wi.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else ds(2);t.v=0,t.f&&t.f.ra(e),nu(t),Ha(t)}function nu(t){t.v=0,t.I=-1,t.f&&(0==_a(t.b).length&&0==t.g.length||(t.b.c.length=0,Fi(t.g),t.g.length=0),t.f.qa())}function ru(t,e,n){var r=function(t){return t instanceof zs?Ws(t):new zs(t,void 0)}(n);if(""!=r.c)e&&Qs(r,e+"."+r.c),$s(r,r.h);else{var i=wi.location;r=function(t,e,n,r){var i=new zs(null,void 0);return t&&Gs(i,t),e&&Qs(i,e),n&&$s(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&Wi(t.V,(function(t,e){Ys(r,e,t)})),n=t.na,(e=t.A)&&n&&Ys(r,e,n),Ys(r,"VER",t.ha),Ga(t,r),r}function iu(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ia(t.Na)).F=t.C,e}function ou(){}function su(){if(Zi&&!(10<=Number(lo)))throw Error("Environmental error: no available transport.")}function au(t,e){Lo.call(this),this.a=new Ua(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!Mi(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Mi(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new lu(this)}function uu(t){Es.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function cu(){Cs.call(this),this.status=1}function lu(t){this.a=t}(mi=Ia.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:_s),this.a.onreadystatechange=ji(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void Na(this,o)}t=n||"";var i=new Vs(this.headers);r&&Us(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=Aa,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=wi.FormData&&t instanceof wi.FormData,!(0<=Pi(ja,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Da(this),0<this.o&&((this.D=function(t){return Zi&&co(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=ji(this.xa,this)):this.m=Xo(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){Na(this,o)}},mi.xa=function(){void 0!==_i&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Fo(this,"timeout"),this.abort(8))},mi.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Fo(this,"complete"),Fo(this,"abort"),Pa(this))},mi.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Pa(this,!0)),Ia.X.G.call(this)},mi.za=function(){this.j||(this.A||this.l||this.g?Ra(this):this.Ua())},mi.Ua=function(){Ra(this)},mi.W=function(){try{return 2<La(this)?this.a.status:-1}catch(Ji){return-1}},mi.$=function(){try{return this.a?this.a.responseText:""}catch(Ji){return""}},mi.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Ta(e)}},mi.ua=function(){return this.h},mi.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(mi=Ua.prototype).ha=8,mi.v=1,mi.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Ts(this,this.c,t,void 0),r=this.l;if(this.O&&(r?$i(r=Gi(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Qa(this,n,e),Ys(i=Ws(this.B),"RID",t),Ys(i,"CVER",22),this.A&&Ys(i,"X-HTTP-Session-Id",this.A),Ga(this,i),this.i&&r&&Fa(i,this.i,r),ma(this.b,n),this.Ia&&Ys(i,"TYPE","init"),this.da?(Ys(i,"$req",e),Ys(i,"SID","null"),n.U=!0,js(n,i,null)):js(n,i,e),this.v=2}}else 3==this.v&&(t?Wa(this,t):0==this.g.length||ya(this.b)||Wa(this))},mi.Aa=function(){if(this.j=null,Ja(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=ys(ji(this.Ta,this),t)}},mi.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,ds(10),qa(this),Ja(this))},mi.Sa=function(){null!=this.m&&(this.m=null,qa(this),Ka(this),ds(19))},mi.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),ds(2)):(this.c.info("Failed to ping google.com"),ds(1))},(mi=ou.prototype).ta=function(){},mi.sa=function(){},mi.ra=function(){},mi.qa=function(){},mi.Ja=function(){},su.prototype.a=function(t,e){return new au(t,e)},ki(au,Lo),au.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;ds(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=ru(t,null,t.fa),za(t)},au.prototype.close=function(){Va(this.a)},au.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,Ba(this.a,e)}else this.l?((e={}).__data__=Uo(t),Ba(this.a,e)):Ba(this.a,t)},au.prototype.G=function(){this.a.f=null,delete this.f,Va(this.a),delete this.a,au.X.G.call(this)},ki(uu,Es),ki(cu,Cs),ki(lu,ou),lu.prototype.ta=function(){Fo(this.a,"a")},lu.prototype.sa=function(t){Fo(this.a,new uu(t))},lu.prototype.ra=function(t){Fo(this.a,new cu(t))},lu.prototype.qa=function(){Fo(this.a,"b")},su.prototype.createWebChannel=su.prototype.a,au.prototype.send=au.prototype.h,au.prototype.open=au.prototype.g,au.prototype.close=au.prototype.close,gs.NO_ERROR=0,gs.TIMEOUT=8,gs.HTTP_ERROR=6,vs.COMPLETE="complete",bs.EventType=ws,ws.OPEN="a",ws.CLOSE="b",ws.ERROR="c",ws.MESSAGE="d",Lo.prototype.listen=Lo.prototype.va,Ia.prototype.listenOnce=Ia.prototype.wa,Ia.prototype.getLastError=Ia.prototype.Qa,Ia.prototype.getLastErrorCode=Ia.prototype.ua,Ia.prototype.getStatus=Ia.prototype.W,Ia.prototype.getResponseJson=Ia.prototype.Pa,Ia.prototype.getResponseText=Ia.prototype.$,Ia.prototype.send=Ia.prototype.ba;var hu=gs,fu=vs,du=as,pu=bs,yu=Ia,gu=n("os0x"),vu=new pi.b("@firebase/firestore");function mu(){return vu.logLevel}function bu(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(vu.logLevel<=pi.a.DEBUG){var r=e.map(Eu);vu.debug.apply(vu,Object(gu.g)(["Firestore (8.2.0): "+t],r))}}function _u(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(vu.logLevel<=pi.a.ERROR){var r=e.map(Eu);vu.error.apply(vu,Object(gu.g)(["Firestore (8.2.0): "+t],r))}}function wu(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(vu.logLevel<=pi.a.WARN){var r=e.map(Eu);vu.warn.apply(vu,Object(gu.g)(["Firestore (8.2.0): "+t],r))}}function Eu(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(Sm){return t}}function Cu(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.2.0) INTERNAL ASSERTION FAILED: "+t;throw _u(e),new Error(e)}function Ou(t,e){t||Cu()}function Tu(t,e){return t}function Iu(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Su=function(){function t(){}return t.t=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Iu(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function xu(t,e){return t<e?-1:t>e?1:0}function ju(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Au(t){return t+"\0"}var Nu=function(){function t(t){this.i=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.i)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.i)},t.prototype.o=function(){return 2*this.i.length},t.prototype.u=function(t){return xu(this.i,t.i)},t.prototype.isEqual=function(t){return this.i===t.i},t}();Nu.h=new Nu("");var ku={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ru=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(gu.c)(e,t),e}(Error),Pu=function(){function t(t){this.l=t}return t.fromBase64String=function(e){try{return new t(Nu.fromBase64String(e))}catch(e){throw new Ru(ku.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Nu.fromUint8Array(e))},t.prototype.toBase64=function(){return this.l.toBase64()},t.prototype.toUint8Array=function(){return this.l.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.l.isEqual(t.l)},t}(),Du=function(t){this._=t};function Lu(){if("undefined"==typeof Uint8Array)throw new Ru(ku.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Fu(){if("undefined"==typeof atob)throw new Ru(ku.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Mu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(gu.c)(e,t),e.fromBase64String=function(t){return Fu(),new e(Pu.fromBase64String(t))},e.fromUint8Array=function(t){return Lu(),new e(Pu.fromUint8Array(t))},e.prototype.toBase64=function(){return Fu(),this._.toBase64()},e.prototype.toUint8Array=function(){return Lu(),this._.toUint8Array()},e.prototype.isEqual=function(t){return this._.isEqual(t._)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(Du),Uu=function(){function t(t){this.uid=t}return t.prototype.T=function(){return null!=this.uid},t.prototype.I=function(){return this.T()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();Uu.UNAUTHENTICATED=new Uu(null),Uu.m=new Uu("google-credentials-uid"),Uu.A=new Uu("first-party-uid");var Vu=function(t,e){this.user=e,this.type="OAuth",this.R={},this.R.Authorization="Bearer "+t},qu=function(){function t(){this.P=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.g=function(){},t.prototype.V=function(t){this.P=t,t(Uu.UNAUTHENTICATED)},t.prototype.p=function(){this.P=null},t}(),Hu=function(){function t(t){var e=this;this.v=null,this.currentUser=Uu.UNAUTHENTICATED,this.S=!1,this.D=0,this.P=null,this.forceRefresh=!1,this.v=function(){e.D++,e.currentUser=e.C(),e.S=!0,e.P&&e.P(e.currentUser)},this.D=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.v):(this.v(null),t.get().then((function(t){e.auth=t,e.v&&e.auth.addAuthTokenListener(e.v)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.D,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.D!==e?(bu("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Ou("string"==typeof n.accessToken),new Vu(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.g=function(){this.forceRefresh=!0},t.prototype.V=function(t){this.P=t,this.S&&t(this.currentUser)},t.prototype.p=function(){this.auth&&this.auth.removeAuthTokenListener(this.v),this.v=null,this.P=null},t.prototype.C=function(){var t=this.auth&&this.auth.getUid();return Ou(null===t||"string"==typeof t),new Uu(t)},t}(),Bu=function(){function t(t,e){this.N=t,this.F=e,this.type="FirstParty",this.user=Uu.A}return Object.defineProperty(t.prototype,"R",{get:function(){var t={"X-Goog-AuthUser":this.F},e=this.N.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),zu=function(){function t(t,e){this.N=t,this.F=e}return t.prototype.getToken=function(){return Promise.resolve(new Bu(this.N,this.F))},t.prototype.V=function(t){t(Uu.A)},t.prototype.p=function(){},t.prototype.g=function(){},t}(),Wu=function(t,e,n,r,i,o){this.O=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.k=o},Gu=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"M",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Qu=function(){function t(){}return t.prototype.L=function(t){},t.prototype.$=function(){},t}(),$u=function(){function t(){var t=this;this.B=function(){return t.q()},this.U=function(){return t.K()},this.W=[],this.j()}return t.prototype.L=function(t){this.W.push(t)},t.prototype.$=function(){window.removeEventListener("online",this.B),window.removeEventListener("offline",this.U)},t.prototype.j=function(){window.addEventListener("online",this.B),window.addEventListener("offline",this.U)},t.prototype.q=function(){bu("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.W;t<e.length;t++)(0,e[t])(0)},t.prototype.K=function(){bu("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.W;t<e.length;t++)(0,e[t])(1)},t.G=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}();function Ku(t){return null==t}function Yu(t){return 0===t&&1/t==-1/0}function Ju(t){return"number"==typeof t&&Number.isInteger(t)&&!Yu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Xu,Zu,tc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};function ec(t){switch(t){case ku.OK:return Cu();case ku.CANCELLED:case ku.UNKNOWN:case ku.DEADLINE_EXCEEDED:case ku.RESOURCE_EXHAUSTED:case ku.INTERNAL:case ku.UNAVAILABLE:case ku.UNAUTHENTICATED:return!1;case ku.INVALID_ARGUMENT:case ku.NOT_FOUND:case ku.ALREADY_EXISTS:case ku.PERMISSION_DENIED:case ku.FAILED_PRECONDITION:case ku.ABORTED:case ku.OUT_OF_RANGE:case ku.UNIMPLEMENTED:case ku.DATA_LOSS:return!0;default:return Cu()}}function nc(t){if(void 0===t)return _u("GRPC error has no .code"),ku.UNKNOWN;switch(t){case Xu.OK:return ku.OK;case Xu.CANCELLED:return ku.CANCELLED;case Xu.UNKNOWN:return ku.UNKNOWN;case Xu.DEADLINE_EXCEEDED:return ku.DEADLINE_EXCEEDED;case Xu.RESOURCE_EXHAUSTED:return ku.RESOURCE_EXHAUSTED;case Xu.INTERNAL:return ku.INTERNAL;case Xu.UNAVAILABLE:return ku.UNAVAILABLE;case Xu.UNAUTHENTICATED:return ku.UNAUTHENTICATED;case Xu.INVALID_ARGUMENT:return ku.INVALID_ARGUMENT;case Xu.NOT_FOUND:return ku.NOT_FOUND;case Xu.ALREADY_EXISTS:return ku.ALREADY_EXISTS;case Xu.PERMISSION_DENIED:return ku.PERMISSION_DENIED;case Xu.FAILED_PRECONDITION:return ku.FAILED_PRECONDITION;case Xu.ABORTED:return ku.ABORTED;case Xu.OUT_OF_RANGE:return ku.OUT_OF_RANGE;case Xu.UNIMPLEMENTED:return ku.UNIMPLEMENTED;case Xu.DATA_LOSS:return ku.DATA_LOSS;default:return Cu()}}(Zu=Xu||(Xu={}))[Zu.OK=0]="OK",Zu[Zu.CANCELLED=1]="CANCELLED",Zu[Zu.UNKNOWN=2]="UNKNOWN",Zu[Zu.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zu[Zu.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zu[Zu.NOT_FOUND=5]="NOT_FOUND",Zu[Zu.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zu[Zu.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zu[Zu.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zu[Zu.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zu[Zu.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zu[Zu.ABORTED=10]="ABORTED",Zu[Zu.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zu[Zu.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zu[Zu.INTERNAL=13]="INTERNAL",Zu[Zu.UNAVAILABLE=14]="UNAVAILABLE",Zu[Zu.DATA_LOSS=15]="DATA_LOSS";var rc=function(){function t(t){this.H=t.H,this.J=t.J}return t.prototype.Y=function(t){this.X=t},t.prototype.Z=function(t){this.tt=t},t.prototype.onMessage=function(t){this.et=t},t.prototype.close=function(){this.J()},t.prototype.send=function(t){this.H(t)},t.prototype.nt=function(){this.X()},t.prototype.st=function(t){this.tt(t)},t.prototype.it=function(t){this.et(t)},t}(),ic=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},oc=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.k=e.k,n}return Object(gu.c)(e,t),e.prototype.lt=function(t,e,n,r){return new Promise((function(i,o){var s=new yu;s.listenOnce(fu.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case hu.NO_ERROR:var e=s.getResponseJson();bu("Connection","XHR received:",JSON.stringify(e)),i(e);break;case hu.TIMEOUT:bu("Connection",'RPC "'+t+'" timed out'),o(new Ru(ku.DEADLINE_EXCEEDED,"Request time out"));break;case hu.HTTP_ERROR:var n=s.getStatus();if(bu("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(ku).indexOf(e)>=0?e:ku.UNKNOWN}(r.status);o(new Ru(a,r.message))}else o(new Ru(ku.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Ru(ku.UNAVAILABLE,"Connection failed."));break;default:Cu()}}finally{bu("Connection",'RPC "'+t+'" completed.')}}));var a=JSON.stringify(r);s.send(e,"POST",a,n,15)}))},e.prototype.ft=function(t,e){var n=[this.ot,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new su,i=cs(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.O.projectId+"/databases/"+this.O.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.k};this.ht(o.initMessageHeaders,e),Object(yi.t)()||Object(yi.w)()||Object(yi.q)()||Object(yi.s)()||Object(yi.x)()||Object(yi.p)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");bu("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new rc({H:function(t){c?bu("Connection","Not sending because WebChannel is closed:",t):(u||(bu("Connection","Opening WebChannel transport."),a.open(),u=!0),bu("Connection","WebChannel sending:",t),a.send(t))},J:function(){return a.close()}}),h=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return h(a,pu.EventType.OPEN,(function(){c||bu("Connection","WebChannel transport opened.")})),h(a,pu.EventType.CLOSE,(function(){c||(c=!0,bu("Connection","WebChannel transport closed"),l.st())})),h(a,pu.EventType.ERROR,(function(t){c||(c=!0,wu("Connection","WebChannel transport errored:",t),l.st(new Ru(ku.UNAVAILABLE,"The operation could not be completed")))})),h(a,pu.EventType.MESSAGE,(function(t){var e;if(!c){var n=t.data[0];Ou(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){bu("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=Xu[t];if(void 0!==e)return nc(e)}(i),s=r.message;void 0===o&&(o=ku.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.st(new Ru(o,s)),a.close()}else bu("Connection","WebChannel received:",n),l.it(n)}})),h(i,du.STAT_EVENT,(function(t){10===t.stat?bu("Connection","Detected buffering proxy"):11===t.stat&&bu("Connection","Detected no buffering proxy")})),setTimeout((function(){l.nt()}),0),l},e}(function(){function t(t){this.rt=t,this.O=t.O,this.ot=(t.ssl?"https":"http")+"://"+t.host,this.ct="projects/"+this.O.projectId+"/databases/"+this.O.database+"/documents"}return t.prototype.at=function(t,e,n,r){var i=this.ut(t,e);bu("RestConnection","Sending: ",i,n);var o={};return this.ht(o,r),this.lt(t,i,o,n).then((function(t){return bu("RestConnection","Received: ",t),t}),(function(e){throw wu("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype._t=function(t,e,n,r){return this.at(t,e,n,r)},t.prototype.ht=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.2.0",t["Content-Type"]="text/plain",e)for(var n in e.R)e.R.hasOwnProperty(n)&&(t[n]=e.R[n])},t.prototype.ut=function(t,e){return this.ot+"/v1/"+e+":"+tc[t]},t}()),sc=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ru(ku.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ru(ku.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Ru(ku.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ru(ku.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.dt=function(t){return this.seconds===t.seconds?xu(this.nanoseconds,t.nanoseconds):xu(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),ac=function(){function t(t){this.timestamp=t}return t.wt=function(e){return new t(e)},t.min=function(){return new t(new sc(0,0))},t.prototype.u=function(t){return this.timestamp.dt(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.Et=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.Tt=function(){return this.timestamp},t}(),uc=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Cu(),void 0===n?n=t.length-e:n>t.length-e&&Cu(),this.segments=t,this.offset=e,this.It=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.It},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.At(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.Rt(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.Pt=function(t){return this.Rt(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.yt=function(){return this.Rt(this.segments,this.offset,this.length-1)},t.prototype.gt=function(){return this.segments[this.offset]},t.prototype.Vt=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.bt=function(){return 0===this.length},t.prototype.vt=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.St=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.Dt=function(){return this.segments.slice(this.offset,this.limit())},t.At=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),cc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(gu.c)(e,t),e.prototype.Rt=function(t,n,r){return new e(t,n,r)},e.prototype.Ct=function(){return this.Dt().join("/")},e.prototype.toString=function(){return this.Ct()},e.xt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Ru(ku.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.Nt=function(){return new e([])},e}(uc),lc=/^[_a-zA-Z][_a-zA-Z0-9]*$/,hc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(gu.c)(e,t),e.prototype.Rt=function(t,n,r){return new e(t,n,r)},e.Ft=function(t){return lc.test(t)},e.prototype.Ct=function(){return this.Dt().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.Ft(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.Ct()},e.prototype.Ot=function(){return 1===this.length&&"__name__"===this.get(0)},e.kt=function(){return new e(["__name__"])},e.Mt=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Ru(ku.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Ru(ku.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Ru(ku.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Ru(ku.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.Nt=function(){return new e([])},e}(uc),fc=function(){function t(t){this.path=t}return t.Lt=function(e){return new t(cc.xt(e))},t.$t=function(e){return new t(cc.xt(e).Pt(5))},t.prototype.Bt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===cc.At(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.At=function(t,e){return cc.At(t.path,e.path)},t.qt=function(t){return t.length%2==0},t.Ut=function(e){return new t(new cc(e.slice()))},t}();function dc(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function pc(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function yc(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var gc=function(){function t(t){this.fields=t,t.sort(hc.At)}return t.prototype.Qt=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].vt(t))return!0;return!1},t.prototype.isEqual=function(t){return ju(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),vc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mc(t){if(Ou(!!t),"string"==typeof t){var e=0,n=vc.exec(t);if(Ou(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:bc(t.seconds),nanos:bc(t.nanos)}}function bc(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function _c(t){return"string"==typeof t?Nu.fromBase64String(t):Nu.fromUint8Array(t)}function wc(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ec(t){var e=mc(t.mapValue.fields.__local_write_time__.timestampValue);return new sc(e.seconds,e.nanos)}function Cc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?wc(t)?4:10:Cu()}function Oc(t,e){var n=Cc(t);if(n!==Cc(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ec(t).isEqual(Ec(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=mc(t.timestampValue),r=mc(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return _c(t.bytesValue).isEqual(_c(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return bc(t.geoPointValue.latitude)===bc(e.geoPointValue.latitude)&&bc(t.geoPointValue.longitude)===bc(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return bc(t.integerValue)===bc(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=bc(t.doubleValue),r=bc(e.doubleValue);return n===r?Yu(n)===Yu(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return ju(t.arrayValue.values||[],e.arrayValue.values||[],Oc);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(dc(n)!==dc(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Oc(n[i],r[i])))return!1;return!0}(t,e);default:return Cu()}}function Tc(t,e){return void 0!==(t.values||[]).find((function(t){return Oc(t,e)}))}function Ic(t,e){var n=Cc(t),r=Cc(e);if(n!==r)return xu(n,r);switch(n){case 0:return 0;case 1:return xu(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=bc(t.integerValue||t.doubleValue),r=bc(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Sc(t.timestampValue,e.timestampValue);case 4:return Sc(Ec(t),Ec(e));case 5:return xu(t.stringValue,e.stringValue);case 6:return function(t,e){var n=_c(t),r=_c(e);return n.u(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=xu(n[i],r[i]);if(0!==o)return o}return xu(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=xu(bc(t.latitude),bc(e.latitude));return 0!==n?n:xu(bc(t.longitude),bc(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Ic(n[i],r[i]);if(o)return o}return xu(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=xu(r[s],o[s]);if(0!==a)return a;var u=Ic(n[r[s]],i[o[s]]);if(0!==u)return u}return xu(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Cu()}}function Sc(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return xu(t,e);var n=mc(t),r=mc(e),i=xu(n.seconds,r.seconds);return 0!==i?i:xu(n.nanos,r.nanos)}function xc(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(t){var e=mc(t);return"time("+e.seconds+","+e.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?_c(e.bytesValue).toBase64():"referenceValue"in e?fc.$t(e.referenceValue).toString():"geoPointValue"in e?"geo("+(n=e.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in e?function(e){for(var n="[",r=!0,i=0,o=e.values||[];i<o.length;i++)r?r=!1:n+=",",n+=t(o[i]);return n+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var n="{",r=!0,i=0,o=Object.keys(e.fields||{}).sort();i<o.length;i++){var s=o[i];r?r=!1:n+=",",n+=s+":"+t(e.fields[s])}return n+"}"}(e.mapValue):Cu();var n}(t)}function jc(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.Ct()}}function Ac(t){return!!t&&"integerValue"in t}function Nc(t){return!!t&&"arrayValue"in t}function kc(t){return!!t&&"nullValue"in t}function Rc(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Pc(t){return!!t&&"mapValue"in t}var Dc=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.bt())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!Pc(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.Vt()])||null},t.prototype.isEqual=function(t){return Oc(this.proto,t.proto)},t}(),Lc=function(){function t(t){void 0===t&&(t=Dc.empty()),this.Kt=t,this.Wt=new Map}return t.prototype.set=function(t,e){return this.jt(t,e),this},t.prototype.delete=function(t){return this.jt(t,null),this},t.prototype.jt=function(t,e){for(var n=this.Wt,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Cc(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.Vt(),e)},t.prototype.Gt=function(){var t=this.zt(hc.Nt(),this.Wt);return null!=t?new Dc(t):this.Kt},t.prototype.zt=function(t,e){var n=this,r=!1,i=this.Kt.field(t),o=Pc(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.zt(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function Fc(t){var e=[];return pc(t.fields||{},(function(t,n){var r=new hc([t]);if(Pc(n)){var i=Fc(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)})),new gc(e)}var Mc=function(t,e){this.key=t,this.version=e},Uc=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).Ht=r,o.Jt=!!i.Jt,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Object(gu.c)(e,t),e.prototype.field=function(t){return this.Ht.field(t)},e.prototype.data=function(){return this.Ht},e.prototype.Yt=function(){return this.Ht.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Jt===t.Jt&&this.hasCommittedMutations===t.hasCommittedMutations&&this.Ht.isEqual(t.Ht)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.Ht.toString()+", {hasLocalMutations: "+this.Jt+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Jt||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(Mc),Vc=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Object(gu.c)(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Mc),qc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(gu.c)(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Mc),Hc=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.Xt=null};function Bc(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Hc(t,e,n,r,i,o,s)}function zc(t){var e=Tu(t);if(null===e.Xt){var n=e.path.Ct();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.Ct()+t.op.toString()+xc(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.Ct()+t.dir}(t)})).join(","),Ku(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=rl(e.startAt)),e.endAt&&(n+="|ub:",n+=rl(e.endAt)),e.Xt=n}return e.Xt}function Wc(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!ol(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!Oc(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!al(t.startAt,e.startAt)&&al(t.endAt,e.endAt)}function Gc(t){return fc.qt(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Qc=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(gu.c)(e,t),e.create=function(t,n,r){return t.Ot()?"in"===n||"not-in"===n?this.Zt(t,n,r):new $c(t,n,r):"array-contains"===n?new Xc(t,r):"in"===n?new Zc(t,r):"not-in"===n?new tl(t,r):"array-contains-any"===n?new el(t,r):new e(t,n,r)},e.Zt=function(t,e,n){return"in"===e?new Kc(t,n):new Yc(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.te(Ic(e,this.value)):null!==e&&Cc(this.value)===Cc(e)&&this.te(Ic(e,this.value))},e.prototype.te=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Cu()}},e.prototype.ee=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),$c=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=fc.$t(r.referenceValue),i}return Object(gu.c)(e,t),e.prototype.matches=function(t){var e=fc.At(t.key,this.key);return this.te(e)},e}(Qc),Kc=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Jc(0,n),r}return Object(gu.c)(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Qc),Yc=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Jc(0,n),r}return Object(gu.c)(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Qc);function Jc(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return fc.$t(t.referenceValue)}))}var Xc=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(gu.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return Nc(e)&&Tc(e.arrayValue,this.value)},e}(Qc),Zc=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(gu.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&Tc(this.value.arrayValue,e)},e}(Qc),tl=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(gu.c)(e,t),e.prototype.matches=function(t){if(Tc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!Tc(this.value.arrayValue,e)},e}(Qc),el=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(gu.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!Nc(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return Tc(e.value.arrayValue,t)}))},e}(Qc),nl=function(t,e){this.position=t,this.before=e};function rl(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return xc(t)})).join(",")}var il=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function ol(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function sl(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.Ot()?fc.At(fc.$t(s.referenceValue),n.key):Ic(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function al(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Oc(t.position[n],e.position[n]))return!1;return!0}var ul=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.ne=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.se=null,this.ie=null};function cl(t,e,n,r,i,o,s,a){return new ul(t,e,n,r,i,o,s,a)}function ll(t){return new ul(t)}function hl(t){return!Ku(t.limit)&&"F"===t.limitType}function fl(t){return!Ku(t.limit)&&"L"===t.limitType}function dl(t){return t.ne.length>0?t.ne[0].field:null}function pl(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.ee())return r.field}return null}function yl(t){return null!==t.collectionGroup}function gl(t){var e=Tu(t);if(null===e.se){e.se=[];var n=pl(e),r=dl(e);if(null!==n&&null===r)n.Ot()||e.se.push(new il(n)),e.se.push(new il(hc.kt(),"asc"));else{for(var i=!1,o=0,s=e.ne;o<s.length;o++){var a=s[o];e.se.push(a),a.field.Ot()&&(i=!0)}if(!i){var u=e.ne.length>0?e.ne[e.ne.length-1].dir:"asc";e.se.push(new il(hc.kt(),u))}}}return e.se}function vl(t){var e=Tu(t);if(!e.ie)if("F"===e.limitType)e.ie=Bc(e.path,e.collectionGroup,gl(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=gl(e);r<i.length;r++){var o=i[r];n.push(new il(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new nl(e.endAt.position,!e.endAt.before):null,a=e.startAt?new nl(e.startAt.position,!e.startAt.before):null;e.ie=Bc(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.ie}function ml(t,e,n){return new ul(t.path,t.collectionGroup,t.ne.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function bl(t,e){return Wc(vl(t),vl(e))&&t.limitType===e.limitType}function _l(t){return zc(vl(t))+"|lt:"+t.limitType}function wl(t){return"Query(target="+function(t){var e=t.path.Ct();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.Ct()+" "+e.op+" "+xc(e.value);var e})).join(", ")+"]"),Ku(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.Ct()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+rl(t.startAt)),t.endAt&&(e+=", endAt: "+rl(t.endAt)),"Target("+e+")"}(vl(t))+"; limitType="+t.limitType+")"}function El(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.Bt(t.collectionGroup)&&t.path.vt(n):fc.qt(t.path)?t.path.isEqual(n):t.path.St(n)}(t,e)&&function(t,e){for(var n=0,r=t.ne;n<r.length;n++){var i=r[n];if(!i.field.Ot()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!sl(t.startAt,gl(t),e)||t.endAt&&sl(t.endAt,gl(t),e))}(t,e)}function Cl(t){return function(e,n){for(var r=!1,i=0,o=gl(t);i<o.length;i++){var s=o[i],a=Ol(s,e,n);if(0!==a)return a;r=r||s.field.Ot()}return 0}}function Ol(t,e,n){var r=t.field.Ot()?fc.At(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?Ic(r,i):Cu()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Cu()}}var Tl=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=ac.min()),void 0===o&&(o=ac.min()),void 0===s&&(s=Nu.h),this.target=t,this.targetId=e,this.re=n,this.sequenceNumber=r,this.oe=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.ce=function(e){return new t(this.target,this.targetId,this.re,e,this.oe,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.ae=function(e,n){return new t(this.target,this.targetId,this.re,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.ue=function(e){return new t(this.target,this.targetId,this.re,this.sequenceNumber,this.oe,e,this.resumeToken)},t}();function Il(t,e){if(t.he){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yu(e)?"-0":e}}function Sl(t){return{integerValue:""+t}}function xl(t,e){return Ju(e)?Sl(e):Il(t,e)}var jl=function(){this.le=void 0};function Al(t,e,n){return t instanceof Rl?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Pl?Dl(t,e):t instanceof Ll?Fl(t,e):function(t,e){var n=kl(t,e),r=Ul(n)+Ul(t._e);return Ac(n)&&Ac(t._e)?Sl(r):Il(t.fe,r)}(t,e)}function Nl(t,e,n){return t instanceof Pl?Dl(t,e):t instanceof Ll?Fl(t,e):n}function kl(t,e){return t instanceof Ml?Ac(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Rl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(gu.c)(e,t),e}(jl),Pl=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(gu.c)(e,t),e}(jl);function Dl(t,e){for(var n=Vl(e),r=function(t){n.some((function(e){return Oc(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Ll=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(gu.c)(e,t),e}(jl);function Fl(t,e){for(var n=Vl(e),r=function(t){n=n.filter((function(e){return!Oc(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Ml=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).fe=e,r._e=n,r}return Object(gu.c)(e,t),e}(jl);function Ul(t){return bc(t.integerValue||t.doubleValue)}function Vl(t){return Nc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var ql=function(t,e){this.field=t,this.transform=e},Hl=function(t,e){this.version=t,this.transformResults=e},Bl=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.de=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"we",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function zl(t,e){return void 0!==t.updateTime?e instanceof Uc&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof Uc}var Wl=function(){};function Gl(t,e,n){return t instanceof Jl?function(t,e,n){var r=t.value;if(n.transformResults){var i=th(t.fieldTransforms,e,n.transformResults);r=nh(t.fieldTransforms,r,i)}return new Uc(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof Xl?function(t,e,n){if(!zl(t.Ee,e))return new qc(t.key,n.version);var r=Zl(t,e,n.transformResults?th(t.fieldTransforms,e,n.transformResults):[]);return new Uc(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new Vc(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function Ql(t,e,n,r){return t instanceof Jl?function(t,e,n,r){if(!zl(t.Ee,e))return e;var i=t.value;if(t.fieldTransforms){var o=eh(t.fieldTransforms,n,e,r);i=nh(t.fieldTransforms,i,o)}var s=Yl(e);return new Uc(t.key,s,i,{Jt:!0})}(t,e,r,n):t instanceof Xl?function(t,e,n,r){if(!zl(t.Ee,e))return e;var i=Yl(e),o=Zl(t,e,eh(t.fieldTransforms,n,e,r));return new Uc(t.key,i,o,{Jt:!0})}(t,e,r,n):function(t,e){return zl(t.Ee,e)?new Vc(t.key,ac.min()):e}(t,e)}function $l(t,e){return void 0!==t.fieldTransforms?function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof Uc?e.field(o.field):void 0,a=kl(o.transform,s||null);null!=a&&(n=null==n?(new Lc).set(o.field,a):n.set(o.field,a))}return n?n.Gt():null}(t.fieldTransforms,e):null}function Kl(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Ee.isEqual(e.Ee)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&ju(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Pl&&e instanceof Pl||t instanceof Ll&&e instanceof Ll?ju(t.elements,e.elements,Oc):t instanceof Ml&&e instanceof Ml?Oc(t._e,e._e):t instanceof Rl&&e instanceof Rl}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.Te.isEqual(e.Te))}function Yl(t){return t instanceof Uc?t.version:ac.min()}var Jl=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.Ee=r,o.fieldTransforms=i,o.type=0,o}return Object(gu.c)(e,t),e}(Wl),Xl=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.Te=r,s.Ee=i,s.fieldTransforms=o,s.type=1,s}return Object(gu.c)(e,t),e}(Wl);function Zl(t,e,n){var r;return r=function(t,e){var n=new Lc(e);return t.Te.fields.forEach((function(e){if(!e.bt()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.Gt()}(t,r=e instanceof Uc?e.data():Dc.empty()),nh(t.fieldTransforms,r,n)}function th(t,e,n){var r=[];Ou(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof Uc&&(a=e.field(o.field)),r.push(Nl(s,a,n[i]))}return r}function eh(t,e,n,r){for(var i=[],o=0,s=t;o<s.length;o++){var a=s[o],u=a.transform,c=null;n instanceof Uc&&(c=n.field(a.field)),null===c&&r instanceof Uc&&(c=r.field(a.field)),i.push(Al(u,c,e))}return i}function nh(t,e,n){for(var r=new Lc(e),i=0;i<t.length;i++)r.set(t[i].field,n[i]);return r.Gt()}var rh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ee=n,r.type=2,r.fieldTransforms=[],r}return Object(gu.c)(e,t),e}(Wl),ih=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ee=n,r.type=3,r.fieldTransforms=[],r}return Object(gu.c)(e,t),e}(Wl),oh=function(t){this.count=t},sh=function(){function t(t,e){this.At=t,this.root=e||uh.EMPTY}return t.prototype.Ie=function(e,n){return new t(this.At,this.root.Ie(e,n,this.At).copy(null,null,uh.me,null,null))},t.prototype.remove=function(e){return new t(this.At,this.root.remove(e,this.At).copy(null,null,uh.me,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.bt();){var n=this.At(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.bt();){var r=this.At(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.bt=function(){return this.root.bt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.Ae=function(){return this.root.Ae()},t.prototype.Re=function(){return this.root.Re()},t.prototype.Pe=function(t){return this.root.Pe(t)},t.prototype.forEach=function(t){this.Pe((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.Pe((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.ye=function(t){return this.root.ye(t)},t.prototype.ge=function(){return new ah(this.root,null,this.At,!1)},t.prototype.Ve=function(t){return new ah(this.root,t,this.At,!1)},t.prototype.pe=function(){return new ah(this.root,null,this.At,!0)},t.prototype.be=function(t){return new ah(this.root,t,this.At,!0)},t}(),ah=function(){function t(t,e,n,r){this.ve=r,this.Se=[];for(var i=1;!t.bt();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.ve?t.left:t.right;else{if(0===i){this.Se.push(t);break}this.Se.push(t),t=this.ve?t.right:t.left}}return t.prototype.De=function(){var t=this.Se.pop(),e={key:t.key,value:t.value};if(this.ve)for(t=t.left;!t.bt();)this.Se.push(t),t=t.right;else for(t=t.right;!t.bt();)this.Se.push(t),t=t.left;return e},t.prototype.Ce=function(){return this.Se.length>0},t.prototype.xe=function(){if(0===this.Se.length)return null;var t=this.Se[this.Se.length-1];return{key:t.key,value:t.value}},t}(),uh=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.bt=function(){return!1},t.prototype.Pe=function(t){return this.left.Pe(t)||t(this.key,this.value)||this.right.Pe(t)},t.prototype.ye=function(t){return this.right.ye(t)||t(this.key,this.value)||this.left.ye(t)},t.prototype.min=function(){return this.left.bt()?this:this.left.min()},t.prototype.Ae=function(){return this.min().key},t.prototype.Re=function(){return this.right.bt()?this.key:this.right.Re()},t.prototype.Ie=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.Ie(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.Ie(t,e,n))).Ne()},t.prototype.Fe=function(){if(this.left.bt())return t.EMPTY;var e=this;return e.left.Oe()||e.left.left.Oe()||(e=e.ke()),(e=e.copy(null,null,null,e.left.Fe(),null)).Ne()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.bt()||i.left.Oe()||i.left.left.Oe()||(i=i.ke()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.Oe()&&(i=i.Me()),i.right.bt()||i.right.Oe()||i.right.left.Oe()||(i=i.Le()),0===n(e,i.key)){if(i.right.bt())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.Fe())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.Ne()},t.prototype.Oe=function(){return this.color},t.prototype.Ne=function(){var t=this;return t.right.Oe()&&!t.left.Oe()&&(t=t.$e()),t.left.Oe()&&t.left.left.Oe()&&(t=t.Me()),t.left.Oe()&&t.right.Oe()&&(t=t.Be()),t},t.prototype.ke=function(){var t=this.Be();return t.right.left.Oe()&&(t=(t=(t=t.copy(null,null,null,null,t.right.Me())).$e()).Be()),t},t.prototype.Le=function(){var t=this.Be();return t.left.left.Oe()&&(t=(t=t.Me()).Be()),t},t.prototype.$e=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.Me=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Be=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.qe=function(){var t=this.Ue();return Math.pow(2,t)<=this.size+1},t.prototype.Ue=function(){if(this.Oe()&&this.left.Oe())throw Cu();if(this.right.Oe())throw Cu();var t=this.left.Ue();if(t!==this.right.Ue())throw Cu();return t+(this.Oe()?0:1)},t}();uh.EMPTY=null,uh.RED=!0,uh.me=!1,uh.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Cu()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Cu()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Cu()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Cu()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Cu()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.Ie=function(t,e,n){return new uh(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.bt=function(){return!0},t.prototype.Pe=function(t){return!1},t.prototype.ye=function(t){return!1},t.prototype.Ae=function(){return null},t.prototype.Re=function(){return null},t.prototype.Oe=function(){return!1},t.prototype.qe=function(){return!0},t.prototype.Ue=function(){return 0},t}());var ch=function(){function t(t){this.At=t,this.data=new sh(this.At)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.Ae()},t.prototype.last=function(){return this.data.Re()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.Pe((function(e,n){return t(e),!1}))},t.prototype.Qe=function(t,e){for(var n=this.data.Ve(t[0]);n.Ce();){var r=n.De();if(this.At(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Ke=function(t,e){var n;for(n=void 0!==e?this.data.Ve(e):this.data.ge();n.Ce();)if(!t(n.De().key))return},t.prototype.We=function(t){var e=this.data.Ve(t);return e.Ce()?e.De().key:null},t.prototype.ge=function(){return new lh(this.data.ge())},t.prototype.Ve=function(t){return new lh(this.data.Ve(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).Ie(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.bt=function(){return this.data.bt()},t.prototype.je=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.ge(),r=e.data.ge();n.Ce();){var i=n.De().key,o=r.De().key;if(0!==this.At(i,o))return!1}return!0},t.prototype.Dt=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.At);return n.data=e,n},t}(),lh=function(){function t(t){this.Ge=t}return t.prototype.De=function(){return this.Ge.De().key},t.prototype.Ce=function(){return this.Ge.Ce()},t}(),hh=new sh(fc.At);function fh(){return hh}function dh(){return fh()}var ph=new sh(fc.At);function yh(){return ph}var gh=new sh(fc.At);function vh(){return gh}var mh=new ch(fc.At);function bh(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=mh,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var _h=new ch(xu);function wh(){return _h}var Eh=function(){function t(t){this.At=t?function(e,n){return t(e,n)||fc.At(e.key,n.key)}:function(t,e){return fc.At(t.key,e.key)},this.ze=yh(),this.He=new sh(this.At)}return t.Je=function(e){return new t(e.At)},t.prototype.has=function(t){return null!=this.ze.get(t)},t.prototype.get=function(t){return this.ze.get(t)},t.prototype.first=function(){return this.He.Ae()},t.prototype.last=function(){return this.He.Re()},t.prototype.bt=function(){return this.He.bt()},t.prototype.indexOf=function(t){var e=this.ze.get(t);return e?this.He.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.He.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.He.Pe((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.ze.Ie(t.key,t),e.He.Ie(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.ze.remove(t),this.He.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.He.ge(),r=e.He.ge();n.Ce();){var i=n.De().key,o=r.De().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.At=this.At,r.ze=e,r.He=n,r},t}(),Ch=function(){function t(){this.Ye=new sh(fc.At)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Ye.get(e);n?0!==t.type&&3===n.type?this.Ye=this.Ye.Ie(e,t):3===t.type&&1!==n.type?this.Ye=this.Ye.Ie(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Ye=this.Ye.Ie(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Ye=this.Ye.Ie(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Ye=this.Ye.remove(e):1===t.type&&2===n.type?this.Ye=this.Ye.Ie(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Ye=this.Ye.Ie(e,{type:2,doc:t.doc}):Cu():this.Ye=this.Ye.Ie(e,t)},t.prototype.Xe=function(){var t=[];return this.Ye.Pe((function(e,n){t.push(n)})),t},t}(),Oh=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.Ze=n,this.docChanges=r,this.tn=i,this.fromCache=o,this.en=s,this.nn=a}return t.sn=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,Eh.Je(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.tn.bt()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.en===t.en&&this.tn.isEqual(t.tn)&&bl(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Ze.isEqual(t.Ze)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Th=function(){function t(t,e,n,r,i){this.oe=t,this.rn=e,this.on=n,this.cn=r,this.an=i}return t.un=function(e,n){var r=new Map;return r.set(e,Ih.hn(e,n)),new t(ac.min(),r,wh(),fh(),bh())},t}(),Ih=function(){function t(t,e,n,r,i){this.resumeToken=t,this.ln=e,this._n=n,this.fn=r,this.dn=i}return t.hn=function(e,n){return new t(Nu.h,n,bh(),bh(),bh())},t}(),Sh=function(t,e,n,r){this.wn=t,this.removedTargetIds=e,this.key=n,this.En=r},xh=function(t,e){this.targetId=t,this.Tn=e},jh=function(t,e,n,r){void 0===n&&(n=Nu.h),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Ah=function(){function t(){this.In=0,this.mn=Rh(),this.An=Nu.h,this.Rn=!1,this.Pn=!0}return Object.defineProperty(t.prototype,"ln",{get:function(){return this.Rn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.An},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"yn",{get:function(){return 0!==this.In},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gn",{get:function(){return this.Pn},enumerable:!1,configurable:!0}),t.prototype.Vn=function(t){t.o()>0&&(this.Pn=!0,this.An=t)},t.prototype.pn=function(){var t=bh(),e=bh(),n=bh();return this.mn.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Cu()}})),new Ih(this.An,this.Rn,t,e,n)},t.prototype.bn=function(){this.Pn=!1,this.mn=Rh()},t.prototype.vn=function(t,e){this.Pn=!0,this.mn=this.mn.Ie(t,e)},t.prototype.Sn=function(t){this.Pn=!0,this.mn=this.mn.remove(t)},t.prototype.Dn=function(){this.In+=1},t.prototype.Cn=function(){this.In-=1},t.prototype.xn=function(){this.Pn=!0,this.Rn=!0},t}(),Nh=function(){function t(t){this.Nn=t,this.Fn=new Map,this.On=fh(),this.kn=kh(),this.Mn=new ch(xu)}return t.prototype.Ln=function(t){for(var e=0,n=t.wn;e<n.length;e++){var r=n[e];t.En instanceof Uc?this.$n(r,t.En):t.En instanceof Vc&&this.Bn(r,t.key,t.En)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.Bn(r=o[i],t.key,t.En)},t.prototype.qn=function(t){var e=this;this.Un(t,(function(n){var r=e.Qn(n);switch(t.state){case 0:e.Kn(n)&&r.Vn(t.resumeToken);break;case 1:r.Cn(),r.yn||r.bn(),r.Vn(t.resumeToken);break;case 2:r.Cn(),r.yn||e.removeTarget(n);break;case 3:e.Kn(n)&&(r.xn(),r.Vn(t.resumeToken));break;case 4:e.Kn(n)&&(e.Wn(n),r.Vn(t.resumeToken));break;default:Cu()}}))},t.prototype.Un=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Fn.forEach((function(t,r){n.Kn(r)&&e(r)}))},t.prototype.jn=function(t){var e=t.targetId,n=t.Tn.count,r=this.Gn(e);if(r){var i=r.target;if(Gc(i))if(0===n){var o=new fc(i.path);this.Bn(e,o,new Vc(o,ac.min()))}else Ou(1===n);else this.zn(e)!==n&&(this.Wn(e),this.Mn=this.Mn.add(e))}},t.prototype.Hn=function(t){var e=this,n=new Map;this.Fn.forEach((function(r,i){var o=e.Gn(i);if(o){if(r.ln&&Gc(o.target)){var s=new fc(o.target.path);null!==e.On.get(s)||e.Jn(i,s)||e.Bn(i,s,new Vc(s,t))}r.gn&&(n.set(i,r.pn()),r.bn())}}));var r=bh();this.kn.forEach((function(t,n){var i=!0;n.Ke((function(t){var n=e.Gn(t);return!n||2===n.re||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new Th(t,n,this.Mn,this.On,r);return this.On=fh(),this.kn=kh(),this.Mn=new ch(xu),i},t.prototype.$n=function(t,e){if(this.Kn(t)){var n=this.Jn(t,e.key)?2:0;this.Qn(t).vn(e.key,n),this.On=this.On.Ie(e.key,e),this.kn=this.kn.Ie(e.key,this.Yn(e.key).add(t))}},t.prototype.Bn=function(t,e,n){if(this.Kn(t)){var r=this.Qn(t);this.Jn(t,e)?r.vn(e,1):r.Sn(e),this.kn=this.kn.Ie(e,this.Yn(e).delete(t)),n&&(this.On=this.On.Ie(e,n))}},t.prototype.removeTarget=function(t){this.Fn.delete(t)},t.prototype.zn=function(t){var e=this.Qn(t).pn();return this.Nn.Xn(t).size+e._n.size-e.dn.size},t.prototype.Dn=function(t){this.Qn(t).Dn()},t.prototype.Qn=function(t){var e=this.Fn.get(t);return e||(e=new Ah,this.Fn.set(t,e)),e},t.prototype.Yn=function(t){var e=this.kn.get(t);return e||(e=new ch(xu),this.kn=this.kn.Ie(t,e)),e},t.prototype.Kn=function(t){var e=null!==this.Gn(t);return e||bu("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.Gn=function(t){var e=this.Fn.get(t);return e&&e.yn?null:this.Nn.Zn(t)},t.prototype.Wn=function(t){var e=this;this.Fn.set(t,new Ah),this.Nn.Xn(t).forEach((function(n){e.Bn(t,n,null)}))},t.prototype.Jn=function(t,e){return this.Nn.Xn(t).has(e)},t}();function kh(){return new sh(fc.At)}function Rh(){return new sh(fc.At)}var Ph={asc:"ASCENDING",desc:"DESCENDING"},Dh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Lh=function(t,e){this.O=t,this.he=e};function Fh(t,e){return t.he?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Mh(t,e){return t.he?e.toBase64():e.toUint8Array()}function Uh(t,e){return Fh(t,e.Tt())}function Vh(t){return Ou(!!t),ac.wt(function(t){var e=mc(t);return new sc(e.seconds,e.nanos)}(t))}function qh(t,e){return function(t){return new cc(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).Ct()}function Hh(t){var e=cc.xt(t);return Ou(ff(e)),e}function Bh(t,e){return qh(t.O,e.path)}function zh(t,e){var n=Hh(e);if(n.get(1)!==t.O.projectId)throw new Ru(ku.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.O.projectId);if(n.get(3)!==t.O.database)throw new Ru(ku.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.O.database);return new fc($h(n))}function Wh(t,e){return qh(t.O,e)}function Gh(t){var e=Hh(t);return 4===e.length?cc.Nt():$h(e)}function Qh(t){return new cc(["projects",t.O.projectId,"databases",t.O.database]).Ct()}function $h(t){return Ou(t.length>4&&"documents"===t.get(4)),t.Pt(5)}function Kh(t,e,n){return{name:Bh(t,e),fields:n.proto.mapValue.fields}}function Yh(t,e,n){var r=zh(t,e.name),i=Vh(e.updateTime),o=new Dc({mapValue:{fields:e.fields}});return new Uc(r,i,o,{hasCommittedMutations:!!n})}function Jh(t,e){var n;if(e instanceof Jl)n={update:Kh(t,e.key,e.value)};else if(e instanceof rh)n={delete:Bh(t,e.key)};else if(e instanceof Xl)n={update:Kh(t,e.key,e.data),updateMask:hf(e.Te)};else{if(!(e instanceof ih))return Cu();n={verify:Bh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Rl)return{fieldPath:e.field.Ct(),setToServerValue:"REQUEST_TIME"};if(n instanceof Pl)return{fieldPath:e.field.Ct(),appendMissingElements:{values:n.elements}};if(n instanceof Ll)return{fieldPath:e.field.Ct(),removeAllFromArray:{values:n.elements}};if(n instanceof Ml)return{fieldPath:e.field.Ct(),increment:n._e};throw Cu()}(0,t)}))),e.Ee.we||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Uh(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Cu()}(t,e.Ee)),n}function Xh(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Bl.updateTime(Vh(t.updateTime)):void 0!==t.exists?Bl.exists(t.exists):Bl.de()}(e.currentDocument):Bl.de(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;"setToServerValue"in e?(Ou("REQUEST_TIME"===e.setToServerValue),n=new Rl):"appendMissingElements"in e?n=new Pl(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new Ll(e.removeAllFromArray.values||[]):"increment"in e?n=new Ml(t,e.increment):Cu();var r=hc.Mt(e.fieldPath);return new ql(r,n)}(t,e)})):[];if(e.update){var i=zh(t,e.update.name),o=new Dc({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new gc((t.fieldPaths||[]).map((function(t){return hc.Mt(t)})))}(e.updateMask);return new Xl(i,o,s,n,r)}return new Jl(i,o,n,r)}if(e.delete){var a=zh(t,e.delete);return new rh(a,n)}if(e.verify){var u=zh(t,e.verify);return new ih(u,n)}return Cu()}function Zh(t,e){return{documents:[Wh(t,e.path)]}}function tf(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Wh(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Wh(t,r.yt()),n.structuredQuery.from=[{collectionId:r.Vt()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(Rc(t.value))return{unaryFilter:{field:af(t.field),op:"IS_NAN"}};if(kc(t.value))return{unaryFilter:{field:af(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Rc(t.value))return{unaryFilter:{field:af(t.field),op:"IS_NOT_NAN"}};if(kc(t.value))return{unaryFilter:{field:af(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:af(t.field),op:sf(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:af(t.field),direction:of(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.he||Ku(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=nf(e.startAt)),e.endAt&&(n.structuredQuery.endAt=nf(e.endAt)),n}function ef(t){var e=Gh(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Ou(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=function t(e){return e?void 0!==e.unaryFilter?[lf(e)]:void 0!==e.fieldFilter?[cf(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t(e)})).reduce((function(t,e){return t.concat(e)})):Cu():[]}(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return function(t){return new il(uf(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return Ku(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=rf(n.startAt));var l=null;return n.endAt&&(l=rf(n.endAt)),cl(e,i,a,s,u,"F",c,l)}function nf(t){return{before:t.before,values:t.position}}function rf(t){return new nl(t.values||[],!!t.before)}function of(t){return Ph[t]}function sf(t){return Dh[t]}function af(t){return{fieldPath:t.Ct()}}function uf(t){return hc.Mt(t.fieldPath)}function cf(t){return Qc.create(uf(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Cu()}}(t.fieldFilter.op),t.fieldFilter.value)}function lf(t){switch(t.unaryFilter.op){case"IS_NAN":var e=uf(t.unaryFilter.field);return Qc.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=uf(t.unaryFilter.field);return Qc.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=uf(t.unaryFilter.field);return Qc.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=uf(t.unaryFilter.field);return Qc.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Cu()}}function hf(t){var e=[];return t.fields.forEach((function(t){return e.push(t.Ct())})),{fieldPaths:e}}function ff(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function df(t){return new Lh(t,!0)}var pf=function(){function t(t){var e=this;this.ts=null,this.es=null,this.result=void 0,this.error=void 0,this.ns=!1,this.ss=!1,t((function(t){e.ns=!0,e.result=t,e.ts&&e.ts(t)}),(function(t){e.ns=!0,e.error=t,e.es&&e.es(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.ss&&Cu(),this.ss=!0,this.ns?this.error?this.rs(n,this.error):this.os(e,this.result):new t((function(t,i){r.ts=function(n){r.os(e,n).next(t,i)},r.es=function(e){r.rs(n,e).next(t,i)}}))},t.prototype.cs=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.us=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.os=function(e,n){return e?this.us((function(){return e(n)})):t.resolve(n)},t.prototype.rs=function(e,n){return e?this.us((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.hs=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.ls=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.hs(r)},t}(),yf=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this._s=new ic,this.transaction.oncomplete=function(){n._s.resolve()},this.transaction.onabort=function(){e.error?n._s.reject(new mf(t,e.error)):n._s.resolve()},this.transaction.onerror=function(e){var r=Cf(e.target.error);n._s.reject(new mf(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new mf(n,e)}},Object.defineProperty(t.prototype,"fs",{get:function(){return this._s.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this._s.reject(t),this.aborted||(bu("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new _f(e)},t}(),gf=function(){function t(e,n,r){this.name=e,this.version=n,this.ds=r,12.2===t.ws(Object(yi.m)())&&_u("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return bu("SimpleDb","Removing database:",t),wf(window.indexedDB.deleteDatabase(t)).cs()},t.G=function(){if("undefined"==typeof indexedDB)return!1;if(t.Es())return!0;var e=Object(yi.m)(),n=t.ws(e),r=0<n&&n<10,i=t.Ts(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Es=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Is)},t.As=function(t,e){return t.store(e)},t.ws=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Ts=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Rs=function(t){return Object(gu.b)(this,void 0,void 0,(function(){var e,n=this;return Object(gu.d)(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(bu("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new mf(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new Ru(ku.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new mf(t,n))},i.onupgradeneeded=function(t){bu("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.ds.Ps(t.target.result,i.transaction,t.oldVersion,n.version).next((function(){bu("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.ys&&(this.db.onversionchange=function(t){return n.ys(t)}),this.db)]}}))}))},t.prototype.gs=function(t){this.ys=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(gu.b)(this,void 0,void 0,(function(){var i,o,s,a,u;return Object(gu.d)(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Object(gu.d)(this,(function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.Rs(t)];case 2:return a.db=h.sent(),e=yf.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),pf.reject(t)})).cs(),u={},s.catch((function(){})),[4,e.fs];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return bu("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),vf=function(){function t(t){this.Vs=t,this.ps=!1,this.bs=null}return Object.defineProperty(t.prototype,"ns",{get:function(){return this.ps},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"vs",{get:function(){return this.bs},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Vs=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.ps=!0},t.prototype.Ss=function(t){this.bs=t},t.prototype.delete=function(){return wf(this.Vs.delete())},t}(),mf=function(t){function e(e,n){var r=this;return(r=t.call(this,ku.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(gu.c)(e,t),e}(Ru);function bf(t){return"IndexedDbTransactionError"===t.name}var _f=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(bu("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(bu("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),wf(n)},t.prototype.add=function(t){return bu("SimpleDb","ADD",this.store.name,t,t),wf(this.store.add(t))},t.prototype.get=function(t){var e=this;return wf(this.store.get(t)).next((function(n){return void 0===n&&(n=null),bu("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return bu("SimpleDb","DELETE",this.store.name,t),wf(this.store.delete(t))},t.prototype.count=function(){return bu("SimpleDb","COUNT",this.store.name),wf(this.store.count())},t.prototype.Ds=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.Cs(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.xs=function(t,e){bu("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Ns=!1;var r=this.cursor(n);return this.Cs(r,(function(t,e,n){return n.delete()}))},t.prototype.Fs=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.Cs(r,e)},t.prototype.Os=function(t){var e=this.cursor({});return new pf((function(n,r){e.onerror=function(t){var e=Cf(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.Cs=function(t,e){var n=[];return new pf((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new vf(i),s=e(i.primaryKey,i.value,o);if(s instanceof pf){var a=s.catch((function(t){return o.done(),pf.reject(t)}));n.push(a)}o.ns?r():null===o.vs?i.continue():i.continue(o.vs)}else r()}})).next((function(){return pf.hs(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Ns?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function wf(t){return new pf((function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Cf(t.target.error);n(e)}}))}var Ef=!1;function Cf(t){var e=gf.ws(Object(yi.m)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Ru("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Ef||(Ef=!0,setTimeout((function(){throw r}),0)),r}}return t}var Of=function(){function t(t,e,n,r,i){this.ks=t,this.Ms=e,this.Ls=n,this.op=r,this.$s=i,this.Bs=new ic,this.then=this.Bs.promise.then.bind(this.Bs.promise),this.Bs.promise.catch((function(t){}))}return t.qs=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.Us=setTimeout((function(){return e.Qs()}),t)},t.prototype.Ks=function(){return this.Qs()},t.prototype.cancel=function(t){null!==this.Us&&(this.clearTimeout(),this.Bs.reject(new Ru(ku.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.Qs=function(){var t=this;this.ks.Ws((function(){return null!==t.Us?(t.clearTimeout(),t.op().then((function(e){return t.Bs.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.Us&&(this.$s(this),clearTimeout(this.Us),this.Us=null)},t}();function Tf(t,e){if(_u("AsyncQueue",e+": "+t),bf(t))return new Ru(ku.UNAVAILABLE,e+": "+t);throw t}var If=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.js=t,this.Ms=e,this.Gs=n,this.zs=r,this.Hs=i,this.Js=0,this.Ys=null,this.Xs=Date.now(),this.reset()}return t.prototype.reset=function(){this.Js=0},t.prototype.Zs=function(){this.Js=this.Hs},t.prototype.ti=function(t){var e=this;this.cancel();var n=Math.floor(this.Js+this.ei()),r=Math.max(0,Date.now()-this.Xs),i=Math.max(0,n-r);i>0&&bu("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Js+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ys=this.js.ni(this.Ms,i,(function(){return e.Xs=Date.now(),t()})),this.Js*=this.zs,this.Js<this.Gs&&(this.Js=this.Gs),this.Js>this.Hs&&(this.Js=this.Hs)},t.prototype.si=function(){null!==this.Ys&&(this.Ys.Ks(),this.Ys=null)},t.prototype.cancel=function(){null!==this.Ys&&(this.Ys.cancel(),this.Ys=null)},t.prototype.ei=function(){return(Math.random()-.5)*this.Js},t}(),Sf=function(){function t(t,e,n,r,i,o){this.js=t,this.ii=n,this.ri=r,this.oi=i,this.listener=o,this.state=0,this.ci=0,this.ai=null,this.stream=null,this.ui=new If(t,e)}return t.prototype.hi=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.li=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this._i()},t.prototype.stop=function(){return Object(gu.b)(this,void 0,void 0,(function(){return Object(gu.d)(this,(function(t){switch(t.label){case 0:return this.hi()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.fi=function(){this.state=0,this.ui.reset()},t.prototype.di=function(){var t=this;this.li()&&null===this.ai&&(this.ai=this.js.ni(this.ii,6e4,(function(){return t.wi()})))},t.prototype.Ei=function(t){this.Ti(),this.stream.send(t)},t.prototype.wi=function(){return Object(gu.b)(this,void 0,void 0,(function(){return Object(gu.d)(this,(function(t){return this.li()?[2,this.close(0)]:[2]}))}))},t.prototype.Ti=function(){this.ai&&(this.ai.cancel(),this.ai=null)},t.prototype.close=function(t,e){return Object(gu.b)(this,void 0,void 0,(function(){return Object(gu.d)(this,(function(n){switch(n.label){case 0:return this.Ti(),this.ui.cancel(),this.ci++,3!==t?this.ui.reset():e&&e.code===ku.RESOURCE_EXHAUSTED?(_u(e.toString()),_u("Using maximum backoff delay to prevent overloading the backend."),this.ui.Zs()):e&&e.code===ku.UNAUTHENTICATED&&this.oi.g(),null!==this.stream&&(this.Ii(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Z(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.Ii=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.mi(this.ci),n=this.ci;this.oi.getToken().then((function(e){t.ci===n&&t.Ai(e)}),(function(n){e((function(){var e=new Ru(ku.UNKNOWN,"Fetching auth token failed: "+n.message);return t.Ri(e)}))}))},t.prototype.Ai=function(t){var e=this,n=this.mi(this.ci);this.stream=this.Pi(t),this.stream.Y((function(){n((function(){return e.state=2,e.listener.Y()}))})),this.stream.Z((function(t){n((function(){return e.Ri(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype._i=function(){var t=this;this.state=4,this.ui.ti((function(){return Object(gu.b)(t,void 0,void 0,(function(){return Object(gu.d)(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.Ri=function(t){return bu("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.mi=function(t){var e=this;return function(n){e.js.Ws((function(){return e.ci===t?n():(bu("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),xf=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).fe=i,s}return Object(gu.c)(e,t),e.prototype.Pi=function(t){return this.ri.ft("Listen",t)},e.prototype.onMessage=function(t){this.ui.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Cu()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.he?(Ou(void 0===e||"string"==typeof e),Nu.fromBase64String(e||"")):(Ou(void 0===e||e instanceof Uint8Array),Nu.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?ku.UNKNOWN:nc(t.code);return new Ru(e,t.message||"")}(a);n=new jh(r,i,o,s||null)}else if("documentChange"in e){i=zh(t,(r=e.documentChange).document.name),o=Vh(r.document.updateTime);var a=new Dc({mapValue:{fields:r.document.fields}}),u=(s=new Uc(i,o,a,{}),r.targetIds||[]);n=new Sh(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=zh(t,(r=e.documentDelete).document),o=r.readTime?Vh(r.readTime):ac.min(),a=new Vc(i,o),n=new Sh([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=zh(t,(r=e.documentRemove).document),n=new Sh([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return Cu();var c=e.filter;i=new oh(r=c.count||0),n=new xh(o=c.targetId,i)}return n}(this.fe,t),n=function(t){if(!("targetChange"in t))return ac.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?ac.min():e.readTime?Vh(e.readTime):ac.min()}(t);return this.listener.yi(e,n)},e.prototype.gi=function(t){var e={};e.database=Qh(this.fe),e.addTarget=function(t,e){var n,r=e.target;return(n=Gc(r)?{documents:Zh(t,r)}:{query:tf(t,r)}).targetId=e.targetId,e.resumeToken.o()>0?n.resumeToken=Mh(t,e.resumeToken):e.oe.u(ac.min())>0&&(n.readTime=Fh(t,e.oe.Tt())),n}(this.fe,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Cu()}}(0,e.re);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.Ei(e)},e.prototype.Vi=function(t){var e={};e.database=Qh(this.fe),e.removeTarget=t,this.Ei(e)},e}(Sf),jf=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).fe=i,s.pi=!1,s}return Object(gu.c)(e,t),Object.defineProperty(e.prototype,"bi",{get:function(){return this.pi},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.pi=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.Ii=function(){this.pi&&this.vi([])},e.prototype.Pi=function(t){return this.ri.ft("Write",t)},e.prototype.onMessage=function(t){if(Ou(!!t.streamToken),this.lastStreamToken=t.streamToken,this.pi){this.ui.reset();var e=function(t,e){return t&&t.length>0?(Ou(void 0!==e),t.map((function(t){return function(t,e){var n=Vh(t.updateTime?t.updateTime:e);n.isEqual(ac.min())&&(n=Vh(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new Hl(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=Vh(t.commitTime);return this.listener.Si(n,e)}return Ou(!t.writeResults||0===t.writeResults.length),this.pi=!0,this.listener.Di()},e.prototype.Ci=function(){var t={};t.database=Qh(this.fe),this.Ei(t)},e.prototype.vi=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Jh(e.fe,t)}))};this.Ei(n)},e}(Sf),Af=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.ri=n,i.fe=r,i.xi=!1,i}return Object(gu.c)(e,t),e.prototype.Ni=function(){if(this.xi)throw new Ru(ku.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.at=function(t,e,n){var r=this;return this.Ni(),this.credentials.getToken().then((function(i){return r.ri.at(t,e,n,i)})).catch((function(t){throw t.code===ku.UNAUTHENTICATED&&r.credentials.g(),t}))},e.prototype._t=function(t,e,n){var r=this;return this.Ni(),this.credentials.getToken().then((function(i){return r.ri._t(t,e,n,i)})).catch((function(t){throw t.code===ku.UNAUTHENTICATED&&r.credentials.g(),t}))},e.prototype.terminate=function(){this.xi=!1},e}((function(){})),Nf="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",kf=function(){function t(){this.Fi=[]}return t.prototype.Oi=function(t){this.Fi.push(t)},t.prototype.ki=function(){this.Fi.forEach((function(t){return t()}))},t}(),Rf={Mi:!1,Li:0,$i:0,Bi:0},Pf=function(){function t(t,e,n){this.qi=t,this.Ui=e,this.Qi=n}return t.Ki=function(e){return new t(e,t.Wi,t.ji)},t}();Pf.Wi=10,Pf.ji=1e3,Pf.Gi=new Pf(41943040,Pf.Wi,Pf.ji),Pf.zi=new Pf(-1,0,0);var Df=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.Hi=function(t){return n.Ji(t)},this.Yi=function(t){return e.Xi(t)})}return t.prototype.Ji=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.Yi&&this.Yi(t),t},t}();function Lf(t){return Object(gu.b)(this,void 0,void 0,(function(){return Object(gu.d)(this,(function(e){if(t.code!==ku.FAILED_PRECONDITION||t.message!==Nf)throw t;return bu("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}Df.Zi=-1;var Ff=function(t,e){this.progress=t,this.tr=e},Mf=function(){function t(t,e,n,r){this.batchId=t,this.er=e,this.baseMutations=n,this.mutations=r}return t.prototype.nr=function(t,e,n){for(var r=n.sr,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=Gl(o,e,r[i]))}return e},t.prototype.ir=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=Ql(i,e,e,this.er))}for(var o=e,s=0,a=this.mutations;s<a.length;s++){var u=a[s];u.key.isEqual(t)&&(e=Ql(u,e,o,this.er))}return e},t.prototype.rr=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.ir(r.key,t.get(r.key));i&&(n=n.Ie(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),bh())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&ju(this.mutations,t.mutations,(function(t,e){return Kl(t,e)}))&&ju(this.baseMutations,t.baseMutations,(function(t,e){return Kl(t,e)}))},t}(),Uf=function(){function t(t,e,n,r){this.batch=t,this.cr=e,this.sr=n,this.ar=r}return t.from=function(e,n,r){Ou(e.mutations.length===r.length);for(var i=vh(),o=e.mutations,s=0;s<o.length;s++)i=i.Ie(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Vf=function(){function t(t,e){this.ur=t,this.hr=e,this.lr={}}return t.prototype.get=function(t){var e=this.ur(t),n=this.lr[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.hr(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.ur(t),r=this.lr[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.hr(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.lr[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.ur(t),n=this.lr[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.hr(n[r][0],t))return 1===n.length?delete this.lr[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){pc(this.lr,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}}))},t.prototype.bt=function(){return yc(this.lr)},t}(),qf=function(){function t(){this._r=new Vf((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.dr=!1}return t.prototype.wr=function(t){var e=this._r.get(t);return e?e.readTime:ac.min()},t.prototype.Er=function(t,e){this.Tr(),this._r.set(t.key,{Ir:t,readTime:e})},t.prototype.mr=function(t,e){void 0===e&&(e=null),this.Tr(),this._r.set(t,{Ir:null,readTime:e})},t.prototype.Ar=function(t,e){this.Tr();var n=this._r.get(e);return void 0!==n?pf.resolve(n.Ir):this.Rr(t,e)},t.prototype.getEntries=function(t,e){return this.Pr(t,e)},t.prototype.apply=function(t){return this.Tr(),this.dr=!0,this.yr(t)},t.prototype.Tr=function(){},t}();function Hf(t,e){var n=t[1],r=e[1],i=xu(t[0],e[0]);return 0===i?xu(n,r):i}var Bf=function(){function t(t){this.gr=t,this.buffer=new ch(Hf),this.Vr=0}return t.prototype.pr=function(){return++this.Vr},t.prototype.br=function(t){var e=[t,this.pr()];if(this.buffer.size<this.gr)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Hf(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),zf=function(){function t(t,e){this.vr=t,this.ks=e,this.Sr=!1,this.Dr=null}return t.prototype.start=function(t){-1!==this.vr.params.qi&&this.Cr(t)},t.prototype.stop=function(){this.Dr&&(this.Dr.cancel(),this.Dr=null)},Object.defineProperty(t.prototype,"Nr",{get:function(){return null!==this.Dr},enumerable:!1,configurable:!0}),t.prototype.Cr=function(t){var e=this,n=this.Sr?3e5:6e4;bu("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.Dr=this.ks.ni("lru_garbage_collection",n,(function(){return Object(gu.b)(e,void 0,void 0,(function(){var e;return Object(gu.d)(this,(function(n){switch(n.label){case 0:this.Dr=null,this.Sr=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.Fr(this.vr)];case 2:return n.sent(),[3,7];case 3:return bf(e=n.sent())?(bu("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Lf(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.Cr(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),Wf=function(){function t(t,e){this.Or=t,this.params=e}return t.prototype.kr=function(t,e){return this.Or.Mr(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.Lr=function(t,e){var n=this;if(0===e)return pf.resolve(Df.Zi);var r=new Bf(e);return this.Or.Un(t,(function(t){return r.br(t.sequenceNumber)})).next((function(){return n.Or.$r(t,(function(t){return r.br(t)}))})).next((function(){return r.maxValue}))},t.prototype.Br=function(t,e,n){return this.Or.Br(t,e,n)},t.prototype.qr=function(t,e){return this.Or.qr(t,e)},t.prototype.Ur=function(t,e){var n=this;return-1===this.params.qi?(bu("LruGarbageCollector","Garbage collection skipped; disabled"),pf.resolve(Rf)):this.Qr(t).next((function(r){return r<n.params.qi?(bu("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.qi),Rf):n.Kr(t,e)}))},t.prototype.Qr=function(t){return this.Or.Qr(t)},t.prototype.Kr=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.kr(t,this.params.Ui).next((function(e){return e>c.params.Qi?(bu("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.Qi+" from "+e),r=c.params.Qi):r=e,o=Date.now(),c.Lr(t,r)})).next((function(r){return n=r,s=Date.now(),c.Br(t,n,e)})).next((function(e){return i=e,a=Date.now(),c.qr(t,n)})).next((function(t){return u=Date.now(),mu()<=pi.a.DEBUG&&bu("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),pf.resolve({Mi:!0,Li:r,$i:i,Bi:t})}))},t}();function Gf(t,e,n){if(!n)throw new Ru(ku.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Qf(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ru(ku.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function $f(t,e,n,r){if(!0===e&&!0===r)throw new Ru(ku.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Kf(t){if(!fc.qt(t))throw new Ru(ku.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Yf(t){if(fc.qt(t))throw new Ru(ku.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Jf(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Cu()}function Xf(t,e){if("_delegate"in t&&(t=t._),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ru(ku.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Jf(t);throw new Ru(ku.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Zf(t,e){if(e<=0)throw new Ru(ku.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var td=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Ru(ku.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ru(ku.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,$f("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),ed=new Map,nd=function(){function t(t,e){this.Wr="(lite)",this.jr=new td({}),this.Gr=!1,t instanceof Gu?(this.zr=t,this.Hr=new qu):(this.Jr=t,this.zr=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Ru(ku.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gu(t.options.projectId)}(t),this.Hr=new Hu(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Jr)throw new Ru(ku.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Jr},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Yr",{get:function(){return this.Gr},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Xr",{get:function(){return void 0!==this.Zr},enumerable:!1,configurable:!0}),t.prototype.eo=function(t){if(this.Gr)throw new Ru(ku.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.jr=new td(t),void 0!==t.credentials&&(this.Hr=function(t){if(!t)return new qu;switch(t.type){case"gapi":var e=t.client;return Ou(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new zu(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new Ru(ku.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.no=function(){return this.jr},t.prototype.so=function(){return this.Gr=!0,this.jr},t.prototype._delete=function(){return this.Zr||(this.Zr=this.io()),this.Zr},t.prototype.io=function(){return(t=ed.get(this))&&(bu("ComponentProvider","Removing Datastore"),ed.delete(this),t.terminate()),Promise.resolve();var t},t}();function rd(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=od(e)),e=id(t.get(n),e);return od(e)}function id(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function od(t){return t+"\x01\x01"}function sd(t){var e=t.length;if(Ou(e>=2),2===e)return Ou("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),cc.Nt();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&Cu(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:Cu()}o=s+2}return new cc(r)}var ad=function(t,e){this.seconds=t,this.nanoseconds=e},ud=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};ud.store="owner",ud.key="owner";var cd=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};cd.store="mutationQueues",cd.keyPath="userId";var ld=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};ld.store="mutations",ld.keyPath="batchId",ld.userMutationsIndex="userMutationsIndex",ld.userMutationsKeyPath=["userId","batchId"];var hd=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,rd(e)]},t.key=function(t,e,n){return[t,rd(e),n]},t}();hd.store="documentMutations",hd.PLACEHOLDER=new hd;var fd=function(t,e){this.path=t,this.readTime=e},dd=function(t,e){this.path=t,this.version=e},pd=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};pd.store="remoteDocuments",pd.readTimeIndex="readTimeIndex",pd.readTimeIndexPath="readTime",pd.collectionReadTimeIndex="collectionReadTimeIndex",pd.collectionReadTimeIndexPath=["parentPath","readTime"];var yd=function(t){this.byteSize=t};yd.store="remoteDocumentGlobal",yd.key="remoteDocumentGlobalKey";var gd=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};gd.store="targets",gd.keyPath="targetId",gd.queryTargetsIndexName="queryTargetsIndex",gd.queryTargetsKeyPath=["canonicalId","targetId"];var vd=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};vd.store="targetDocuments",vd.keyPath=["targetId","path"],vd.documentTargetsIndex="documentTargetsIndex",vd.documentTargetsKeyPath=["path","targetId"];var md=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};md.key="targetGlobalKey",md.store="targetGlobal";var bd=function(t,e){this.collectionId=t,this.parent=e};bd.store="collectionParents",bd.keyPath=["collectionId","parent"];var _d=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};_d.store="clientMetadata",_d.keyPath="clientId";var wd=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};wd.store="bundles",wd.keyPath="bundleId";var Ed=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Ed.store="namedQueries",Ed.keyPath="name";var Cd=Object(gu.g)(Object(gu.g)(Object(gu.g)(Object(gu.g)([cd.store,ld.store,hd.store,pd.store,gd.store,ud.store,md.store,vd.store],[_d.store]),[yd.store]),[bd.store]),[wd.store,Ed.store]),Od=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ro=e,r.oo=n,r}return Object(gu.c)(e,t),e}(kf);function Td(t,e){var n=Tu(t);return gf.As(n.ro,e)}var Id=function(t){this.co=t};function Sd(t,e){if(e.document)return Yh(t.co,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=fc.Ut(e.noDocument.path),r=kd(e.noDocument.readTime);return new Vc(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=fc.Ut(e.unknownDocument.path);return r=kd(e.unknownDocument.version),new qc(i,r)}return Cu()}function xd(t,e,n){var r=jd(n),i=e.key.path.yt().Dt();if(e instanceof Uc){var o=function(t,e){return{name:Bh(t,e.key),fields:e.Yt().mapValue.fields,updateTime:Fh(t,e.version.Tt())}}(t.co,e),s=e.hasCommittedMutations;return new pd(null,null,o,s,r,i)}if(e instanceof Vc){var a=e.key.path.Dt(),u=Nd(e.version);return s=e.hasCommittedMutations,new pd(null,new fd(a,u),null,s,r,i)}if(e instanceof qc){var c=e.key.path.Dt(),l=Nd(e.version);return new pd(new dd(c,l),null,null,!0,r,i)}return Cu()}function jd(t){var e=t.Tt();return[e.seconds,e.nanoseconds]}function Ad(t){var e=new sc(t[0],t[1]);return ac.wt(e)}function Nd(t){var e=t.Tt();return new ad(e.seconds,e.nanoseconds)}function kd(t){var e=new sc(t.seconds,t.nanoseconds);return ac.wt(e)}function Rd(t,e){for(var n=(e.baseMutations||[]).map((function(e){return Xh(t.co,e)})),r=e.mutations.length-1;r>=0;--r){var i=e.mutations[r];void 0!==(null==i?void 0:i.transform)&&(e.mutations[r-1].updateTransforms=i.transform.fieldTransforms,e.mutations.splice(r,1),--r)}var o=e.mutations.map((function(e){return Xh(t.co,e)})),s=sc.fromMillis(e.localWriteTimeMs);return new Mf(e.batchId,s,n,o)}function Pd(t){var e,n,r=kd(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?kd(t.lastLimboFreeSnapshotVersion):ac.min();return void 0!==t.query.documents?(Ou(1===(n=t.query).documents.length),e=vl(ll(Gh(n.documents[0])))):e=function(t){return vl(ef(t))}(t.query),new Tl(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Nu.fromBase64String(t.resumeToken))}function Dd(t,e){var n,r=Nd(e.oe),i=Nd(e.lastLimboFreeSnapshotVersion);n=Gc(e.target)?Zh(t.co,e.target):tf(t.co,e.target);var o=e.resumeToken.toBase64();return new gd(e.targetId,zc(e.target),r,o,e.sequenceNumber,i,n)}function Ld(t){var e=ef({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?ml(e,e.limit,"L"):e}var Fd=function(){function t(){}return t.prototype.ao=function(t,e){return Md(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:kd(e.createTime),version:e.version};var e}))},t.prototype.uo=function(t,e){return Md(t).put({bundleId:(n=e).id,createTime:Nd(Vh(n.createTime)),version:n.version});var n},t.prototype.ho=function(t,e){return Ud(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:Ld(e.bundledQuery),readTime:kd(e.readTime)};var e}))},t.prototype.lo=function(t,e){return Ud(t).put(function(t){return{name:t.name,readTime:Nd(Vh(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Md(t){return Td(t,wd.store)}function Ud(t){return Td(t,Ed.store)}var Vd=function(){function t(){this._o=new qd}return t.prototype.fo=function(t,e){return this._o.add(e),pf.resolve()},t.prototype.wo=function(t,e){return pf.resolve(this._o.getEntries(e))},t}(),qd=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.Vt(),n=t.yt(),r=this.index[e]||new ch(cc.At),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.Vt(),n=t.yt(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new ch(cc.At)).Dt()},t}(),Hd=function(){function t(){this.Eo=new qd}return t.prototype.fo=function(t,e){var n=this;if(!this.Eo.has(e)){var r=e.Vt(),i=e.yt();t.Oi((function(){n.Eo.add(e)}));var o={collectionId:r,parent:rd(i)};return Bd(t).put(o)}return pf.resolve()},t.prototype.wo=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Au(e),""],!1,!0);return Bd(t).Ds(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(sd(o.parent))}return n}))},t}();function Bd(t){return Td(t,bd.store)}function zd(t,e,n){var r=t.store(ld.store),i=t.store(hd.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.Fs({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){Ou(1===a)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=hd.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return pf.hs(o).next((function(){return c}))}function Wd(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Cu();e=t.noDocument}return JSON.stringify(e).length}var Gd=function(){function t(t,e,n,r){this.userId=t,this.fe=e,this.To=n,this.Io=r,this.mo={}}return t.Ao=function(e,n,r,i){return Ou(""!==e.uid),new t(e.T()?e.uid:"",n,r,i)},t.prototype.Ro=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return $d(t).Fs({index:ld.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.Po=function(t,e,n,r){var i=this,o=Kd(t),s=$d(t);return s.add({}).next((function(a){Ou("number"==typeof a);for(var u=new Mf(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return Jh(t.co,e)})),i=n.mutations.map((function(e){return Jh(t.co,e)}));return new ld(e,n.batchId,n.er.toMillis(),r,i)}(i.fe,i.userId,u),l=[],h=new ch((function(t,e){return xu(t.Ct(),e.Ct())})),f=0,d=r;f<d.length;f++){var p=d[f],y=hd.key(i.userId,p.key.path,a);h=h.add(p.key.path.yt()),l.push(s.put(c)),l.push(o.put(y,hd.PLACEHOLDER))}return h.forEach((function(e){l.push(i.To.fo(t,e))})),t.Oi((function(){i.mo[a]=u.keys()})),pf.hs(l).next((function(){return u}))}))},t.prototype.yo=function(t,e){var n=this;return $d(t).get(e).next((function(t){return t?(Ou(t.userId===n.userId),Rd(n.fe,t)):null}))},t.prototype.Vo=function(t,e){var n=this;return this.mo[e]?pf.resolve(this.mo[e]):this.yo(t,e).next((function(t){if(t){var r=t.keys();return n.mo[e]=r,r}return null}))},t.prototype.po=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return $d(t).Fs({index:ld.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(Ou(e.batchId>=r),o=Rd(n.fe,e)),i.done()})).next((function(){return o}))},t.prototype.bo=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return $d(t).Fs({index:ld.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.vo=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return $d(t).Ds(ld.userMutationsIndex,n).next((function(t){return t.map((function(t){return Rd(e.fe,t)}))}))},t.prototype.So=function(t,e){var n=this,r=hd.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Kd(t).Fs({range:i},(function(r,i,s){var a=r[0],u=r[2],c=sd(r[1]);if(a===n.userId&&e.path.isEqual(c))return $d(t).get(u).next((function(t){if(!t)throw Cu();Ou(t.userId===n.userId),o.push(Rd(n.fe,t))}));s.done()})).next((function(){return o}))},t.prototype.Do=function(t,e){var n=this,r=new ch(xu),i=[];return e.forEach((function(e){var o=hd.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Kd(t).Fs({range:s},(function(t,i,o){var s=t[0],a=t[2],u=sd(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()}));i.push(a)})),pf.hs(i).next((function(){return n.Co(t,r)}))},t.prototype.xo=function(t,e){var n=this,r=e.path,i=r.length+1,o=hd.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new ch(xu);return Kd(t).Fs({range:s},(function(t,e,o){var s=t[0],u=t[2],c=sd(t[1]);s===n.userId&&r.vt(c)?c.length===i&&(a=a.add(u)):o.done()})).next((function(){return n.Co(t,a)}))},t.prototype.Co=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push($d(t).get(e).next((function(t){if(null===t)throw Cu();Ou(t.userId===n.userId),r.push(Rd(n.fe,t))})))})),pf.hs(i).next((function(){return r}))},t.prototype.No=function(t,e){var n=this;return zd(t.ro,this.userId,e).next((function(r){return t.Oi((function(){n.Fo(e.batchId)})),pf.forEach(r,(function(e){return n.Io.Oo(t,e)}))}))},t.prototype.Fo=function(t){delete this.mo[t]},t.prototype.ko=function(t){var e=this;return this.Ro(t).next((function(n){if(!n)return pf.resolve();var r=IDBKeyRange.lowerBound(hd.prefixForUser(e.userId)),i=[];return Kd(t).Fs({range:r},(function(t,n,r){if(t[0]===e.userId){var o=sd(t[1]);i.push(o)}else r.done()})).next((function(){Ou(0===i.length)}))}))},t.prototype.Mo=function(t,e){return Qd(t,this.userId,e)},t.prototype.Lo=function(t){var e=this;return Yd(t).get(this.userId).next((function(t){return t||new cd(e.userId,-1,"")}))},t}();function Qd(t,e,n){var r=hd.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Kd(t).Fs({range:o,Ns:!0},(function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()})).next((function(){return s}))}function $d(t){return Td(t,ld.store)}function Kd(t){return Td(t,hd.store)}function Yd(t){return Td(t,cd.store)}var Jd=function(){function t(t){this.$o=t}return t.prototype.next=function(){return this.$o+=2,this.$o},t.Bo=function(){return new t(0)},t.qo=function(){return new t(-1)},t}(),Xd=function(){function t(t,e){this.Io=t,this.fe=e}return t.prototype.Uo=function(t){var e=this;return this.Qo(t).next((function(n){var r=new Jd(n.highestTargetId);return n.highestTargetId=r.next(),e.Ko(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.Wo=function(t){return this.Qo(t).next((function(t){return ac.wt(new sc(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.jo=function(t){return this.Qo(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.Go=function(t,e,n){var r=this;return this.Qo(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.Tt()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Ko(t,i)}))},t.prototype.zo=function(t,e){var n=this;return this.Ho(t,e).next((function(){return n.Qo(t).next((function(r){return r.targetCount+=1,n.Jo(e,r),n.Ko(t,r)}))}))},t.prototype.Yo=function(t,e){return this.Ho(t,e)},t.prototype.Xo=function(t,e){var n=this;return this.Zo(t,e.targetId).next((function(){return Zd(t).delete(e.targetId)})).next((function(){return n.Qo(t)})).next((function(e){return Ou(e.targetCount>0),e.targetCount-=1,n.Ko(t,e)}))},t.prototype.Br=function(t,e,n){var r=this,i=0,o=[];return Zd(t).Fs((function(s,a){var u=Pd(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.Xo(t,u)))})).next((function(){return pf.hs(o)})).next((function(){return i}))},t.prototype.Un=function(t,e){return Zd(t).Fs((function(t,n){var r=Pd(n);e(r)}))},t.prototype.Qo=function(t){return tp(t).get(md.key).next((function(t){return Ou(null!==t),t}))},t.prototype.Ko=function(t,e){return tp(t).put(md.key,e)},t.prototype.Ho=function(t,e){return Zd(t).put(Dd(this.fe,e))},t.prototype.Jo=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.tc=function(t){return this.Qo(t).next((function(t){return t.targetCount}))},t.prototype.ec=function(t,e){var n=zc(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Zd(t).Fs({range:r,index:gd.queryTargetsIndexName},(function(t,n,r){var o=Pd(n);Wc(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.nc=function(t,e,n){var r=this,i=[],o=ep(t);return e.forEach((function(e){var s=rd(e.path);i.push(o.put(new vd(n,s))),i.push(r.Io.sc(t,n,e))})),pf.hs(i)},t.prototype.ic=function(t,e,n){var r=this,i=ep(t);return pf.forEach(e,(function(e){var o=rd(e.path);return pf.hs([i.delete([n,o]),r.Io.rc(t,n,e)])}))},t.prototype.Zo=function(t,e){var n=ep(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.oc=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=ep(t),i=bh();return r.Fs({range:n,Ns:!0},(function(t,e,n){var r=sd(t[1]),o=new fc(r);i=i.add(o)})).next((function(){return i}))},t.prototype.Mo=function(t,e){var n=rd(e.path),r=IDBKeyRange.bound([n],[Au(n)],!1,!0),i=0;return ep(t).Fs({index:vd.documentTargetsIndex,Ns:!0,range:r},(function(t,e,n){0!==t[0]&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Zn=function(t,e){return Zd(t).get(e).next((function(t){return t?Pd(t):null}))},t}();function Zd(t){return Td(t,gd.store)}function tp(t){return Td(t,md.store)}function ep(t){return Td(t,vd.store)}var np=function(){function t(t,e){this.db=t,this.vr=function(t,e){return new Wf(t,e)}(this,e)}return t.prototype.Mr=function(t){var e=this.cc(t);return this.db.ac().tc(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.cc=function(t){var e=0;return this.$r(t,(function(t){e++})).next((function(){return e}))},t.prototype.Un=function(t,e){return this.db.ac().Un(t,e)},t.prototype.$r=function(t,e){return this.uc(t,(function(t,n){return e(n)}))},t.prototype.sc=function(t,e,n){return rp(t,n)},t.prototype.rc=function(t,e,n){return rp(t,n)},t.prototype.Br=function(t,e,n){return this.db.ac().Br(t,e,n)},t.prototype.Oo=function(t,e){return rp(t,e)},t.prototype.hc=function(t,e){return function(t,e){var n=!1;return Yd(t).Os((function(r){return Qd(t,r,e).next((function(t){return t&&(n=!0),pf.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.qr=function(t,e){var n=this,r=this.db._c().lc(),i=[],o=0;return this.uc(t,(function(s,a){if(a<=e){var u=n.hc(t,s).next((function(e){if(!e)return o++,r.Ar(t,s).next((function(){return r.mr(s),ep(t).delete([0,rd(s.path)])}))}));i.push(u)}})).next((function(){return pf.hs(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.ce(t.oo);return this.db.ac().Yo(t,n)},t.prototype.fc=function(t,e){return rp(t,e)},t.prototype.uc=function(t,e){var n,r=ep(t),i=Df.Zi;return r.Fs({index:vd.documentTargetsIndex},(function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==Df.Zi&&e(new fc(sd(n)),i),i=s,n=o):i=Df.Zi})).next((function(){i!==Df.Zi&&e(new fc(sd(n)),i)}))},t.prototype.Qr=function(t){return this.db._c().dc(t)},t}();function rp(t,e){return ep(t).put(function(t,e){return new vd(0,rd(t.path),e)}(e,t.oo))}var ip=function(){function t(t,e){this.fe=t,this.To=e}return t.prototype.Er=function(t,e,n){return ap(t).put(up(e),n)},t.prototype.mr=function(t,e){var n=ap(t),r=up(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.wc(t,r)}))},t.prototype.Ar=function(t,e){var n=this;return ap(t).get(up(e)).next((function(t){return n.Ec(t)}))},t.prototype.Tc=function(t,e){var n=this;return ap(t).get(up(e)).next((function(t){var e=n.Ec(t);return e?{Ir:e,size:Wd(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=dh();return this.Ic(t,e,(function(t,e){var i=n.Ec(e);r=r.Ie(t,i)})).next((function(){return r}))},t.prototype.mc=function(t,e){var n=this,r=dh(),i=new sh(fc.At);return this.Ic(t,e,(function(t,e){var o=n.Ec(e);o?(r=r.Ie(t,o),i=i.Ie(t,Wd(e))):(r=r.Ie(t,null),i=i.Ie(t,0))})).next((function(){return{Ac:r,Rc:i}}))},t.prototype.Ic=function(t,e,n){if(e.bt())return pf.resolve();var r=IDBKeyRange.bound(e.first().path.Dt(),e.last().path.Dt()),i=e.ge(),o=i.De();return ap(t).Fs({range:r},(function(t,e,r){for(var s=fc.Ut(t);o&&fc.At(o,s)<0;)n(o,null),o=i.De();o&&o.isEqual(s)&&(n(o,e),o=i.Ce()?i.De():null),o?r.Ss(o.path.Dt()):r.done()})).next((function(){for(;o;)n(o,null),o=i.Ce()?i.De():null}))},t.prototype.Pc=function(t,e,n){var r=this,i=yh(),o=e.path.length+1,s={};if(n.isEqual(ac.min())){var a=e.path.Dt();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.Dt(),c=jd(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=pd.collectionReadTimeIndex}return ap(t).Fs(s,(function(t,n,s){if(t.length===o){var a=Sd(r.fe,n);e.path.vt(a.key.path)?a instanceof Uc&&El(e,a)&&(i=i.Ie(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.lc=function(t){return new op(this,!!t&&t.yc)},t.prototype.dc=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return sp(t).get(yd.key).next((function(t){return Ou(!!t),t}))},t.prototype.wc=function(t,e){return sp(t).put(yd.key,e)},t.prototype.Ec=function(t){if(t){var e=Sd(this.fe,t);return e instanceof Vc&&e.version.isEqual(ac.min())?null:e}return null},t}(),op=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).gc=e,r.yc=n,r.Vc=new Vf((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return Object(gu.c)(e,t),e.prototype.yr=function(t){var e=this,n=[],r=0,i=new ch((function(t,e){return xu(t.Ct(),e.Ct())}));return this._r.forEach((function(o,s){var a=e.Vc.get(o);if(s.Ir){var u=xd(e.gc.fe,s.Ir,e.wr(o));i=i.add(o.path.yt());var c=Wd(u);r+=c-a,n.push(e.gc.Er(t,o,u))}else if(r-=a,e.yc){var l=xd(e.gc.fe,new Vc(o,ac.min()),e.wr(o));n.push(e.gc.Er(t,o,l))}else n.push(e.gc.mr(t,o))})),i.forEach((function(r){n.push(e.gc.To.fo(t,r))})),n.push(this.gc.updateMetadata(t,r)),pf.hs(n)},e.prototype.Rr=function(t,e){var n=this;return this.gc.Tc(t,e).next((function(t){return null===t?(n.Vc.set(e,0),null):(n.Vc.set(e,t.size),t.Ir)}))},e.prototype.Pr=function(t,e){var n=this;return this.gc.mc(t,e).next((function(t){var e=t.Ac;return t.Rc.forEach((function(t,e){n.Vc.set(t,e)})),e}))},e}(qf);function sp(t){return Td(t,yd.store)}function ap(t){return Td(t,pd.store)}function up(t){return t.path.Dt()}var cp=function(){function t(t){this.fe=t}return t.prototype.Ps=function(t,e,n,r){var i=this;Ou(n<r&&n>=0&&r<=11);var o=new yf("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(ud.store)}(t),function(t){t.createObjectStore(cd.store,{keyPath:cd.keyPath}),t.createObjectStore(ld.store,{keyPath:ld.keyPath,autoIncrement:!0}).createIndex(ld.userMutationsIndex,ld.userMutationsKeyPath,{unique:!0}),t.createObjectStore(hd.store)}(t),lp(t),function(t){t.createObjectStore(pd.store)}(t));var s=pf.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(vd.store),t.deleteObjectStore(gd.store),t.deleteObjectStore(md.store)}(t),lp(t)),s=s.next((function(){return function(t){var e=t.store(md.store),n=new md(0,0,ac.min().Tt(),0);return e.put(md.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(ld.store).Ds().next((function(n){t.deleteObjectStore(ld.store),t.createObjectStore(ld.store,{keyPath:ld.keyPath,autoIncrement:!0}).createIndex(ld.userMutationsIndex,ld.userMutationsKeyPath,{unique:!0});var r=e.store(ld.store),i=n.map((function(t){return r.put(t)}));return pf.hs(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(_d.store,{keyPath:_d.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.bc(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(yd.store)}(t),i.vc(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.Sc(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Dc(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(pd.store);e.createIndex(pd.readTimeIndex,pd.readTimeIndexPath,{unique:!1}),e.createIndex(pd.collectionReadTimeIndex,pd.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.Cc(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(wd.store,{keyPath:wd.keyPath})}(t),function(t){t.createObjectStore(Ed.store,{keyPath:Ed.keyPath})}(t)}))),s},t.prototype.vc=function(t){var e=0;return t.store(pd.store).Fs((function(t,n){e+=Wd(n)})).next((function(){var n=new yd(e);return t.store(yd.store).put(yd.key,n)}))},t.prototype.bc=function(t){var e=this,n=t.store(cd.store),r=t.store(ld.store);return n.Ds().next((function(n){return pf.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Ds(ld.userMutationsIndex,i).next((function(r){return pf.forEach(r,(function(r){Ou(r.userId===n.userId);var i=Rd(e.fe,r);return zd(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.Sc=function(t){var e=t.store(vd.store),n=t.store(pd.store);return t.store(md.store).get(md.key).next((function(t){var r=[];return n.Fs((function(n,i){var o=new cc(n),s=function(t){return[0,rd(t)]}(o);r.push(e.get(s).next((function(n){return n?pf.resolve():function(n){return e.put(new vd(0,rd(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return pf.hs(r)}))}))},t.prototype.Dc=function(t,e){t.createObjectStore(bd.store,{keyPath:bd.keyPath});var n=e.store(bd.store),r=new qd,i=function(t){if(r.add(t)){var e=t.Vt(),i=t.yt();return n.put({collectionId:e,parent:rd(i)})}};return e.store(pd.store).Fs({Ns:!0},(function(t,e){var n=new cc(t);return i(n.yt())})).next((function(){return e.store(hd.store).Fs({Ns:!0},(function(t,e){var n=sd(t[1]);return i(n.yt())}))}))},t.prototype.Cc=function(t){var e=this,n=t.store(gd.store);return n.Fs((function(t,r){var i=Pd(r),o=Dd(e.fe,i);return n.put(o)}))},t}();function lp(t){t.createObjectStore(vd.store,{keyPath:vd.keyPath}).createIndex(vd.documentTargetsIndex,vd.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(gd.store,{keyPath:gd.keyPath}).createIndex(gd.queryTargetsIndexName,gd.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(md.store)}var hp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",fp=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.js=o,this.window=s,this.document=a,this.xc=c,this.Nc=l,this.Fc=null,this.Oc=!1,this.isPrimary=!1,this.networkEnabled=!0,this.kc=null,this.inForeground=!1,this.Mc=null,this.Lc=null,this.$c=Number.NEGATIVE_INFINITY,this.Bc=function(t){return Promise.resolve()},!t.G())throw new Ru(ku.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Io=new np(this,i),this.qc=n+"main",this.fe=new Id(u),this.Uc=new gf(this.qc,11,new cp(this.fe)),this.Qc=new Xd(this.Io,this.fe),this.To=new Hd,this.Kc=function(t,e){return new ip(t,e)}(this.fe,this.To),this.Wc=new Fd,this.window&&this.window.localStorage?this.jc=this.window.localStorage:(this.jc=null,!1===l&&_u("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.Gc().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Ru(ku.FAILED_PRECONDITION,hp);return t.zc(),t.Hc(),t.Jc(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.Qc.jo(e)}))})).then((function(e){t.Fc=new Df(e,t.xc)})).then((function(){t.Oc=!0})).catch((function(e){return t.Uc&&t.Uc.close(),Promise.reject(e)}))},t.prototype.Yc=function(t){var e=this;return this.Bc=function(n){return Object(gu.b)(e,void 0,void 0,(function(){return Object(gu.d)(this,(function(e){return this.Nr?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.Xc=function(t){var e=this;this.Uc.gs((function(n){return Object(gu.b)(e,void 0,void 0,(function(){return Object(gu.d)(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.Zc=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.js.Ws((function(){return Object(gu.b)(e,void 0,void 0,(function(){return Object(gu.d)(this,(function(t){switch(t.label){case 0:return this.Nr?[4,this.Gc()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.Gc=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return pp(e).put(new _d(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.ta(e).next((function(e){e||(t.isPrimary=!1,t.js.ea((function(){return t.Bc(!1)})))}))})).next((function(){return t.na(e)})).next((function(n){return t.isPrimary&&!n?t.sa(e).next((function(){return!1})):!!n&&t.ia(e).next((function(){return!0}))}))})).catch((function(e){if(bf(e))return bu("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return bu("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.js.ea((function(){return t.Bc(e)})),t.isPrimary=e}))},t.prototype.ta=function(t){var e=this;return dp(t).get(ud.key).next((function(t){return pf.resolve(e.ra(t))}))},t.prototype.oa=function(t){return pp(t).delete(this.clientId)},t.prototype.ca=function(){return Object(gu.b)(this,void 0,void 0,(function(){var t,e,n,r=this;return Object(gu.d)(this,(function(i){switch(i.label){case 0:return!this.isPrimary||this.aa(this.$c,18e5)?[3,2]:(this.$c=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=Td(t,_d.store);return e.Ds().next((function(t){var n=r.ua(t,18e5),i=t.filter((function(t){return-1===n.indexOf(t)}));return pf.forEach(i,(function(t){return e.delete(t.clientId)})).next((function(){return i}))}))})).catch((function(){return[]}))]);case 1:if(t=i.sent(),this.jc)for(e=0,n=t;e<n.length;e++)this.jc.removeItem(this.ha(n[e].clientId));i.label=2;case 2:return[2]}}))}))},t.prototype.Jc=function(){var t=this;this.Lc=this.js.ni("client_metadata_refresh",4e3,(function(){return t.Gc().then((function(){return t.ca()})).then((function(){return t.Jc()}))}))},t.prototype.ra=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.na=function(t){var e=this;return this.Nc?pf.resolve(!0):dp(t).get(ud.key).next((function(n){if(null!==n&&e.aa(n.leaseTimestampMs,5e3)&&!e.la(n.ownerId)){if(e.ra(n)&&e.networkEnabled)return!0;if(!e.ra(n)){if(!n.allowTabSynchronization)throw new Ru(ku.FAILED_PRECONDITION,hp);return!1}}return!(!e.networkEnabled||!e.inForeground)||pp(t).Ds().next((function(t){return void 0===e.ua(t,5e3).find((function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))}))}))})).next((function(t){return e.isPrimary!==t&&bu("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.$=function(){return Object(gu.b)(this,void 0,void 0,(function(){var t=this;return Object(gu.d)(this,(function(e){switch(e.label){case 0:return this.Oc=!1,this._a(),this.Lc&&(this.Lc.cancel(),this.Lc=null),this.fa(),this.da(),[4,this.Uc.runTransaction("shutdown","readwrite",[ud.store,_d.store],(function(e){var n=new Od(e,Df.Zi);return t.sa(n).next((function(){return t.oa(n)}))}))];case 1:return e.sent(),this.Uc.close(),this.wa(),[2]}}))}))},t.prototype.ua=function(t,e){var n=this;return t.filter((function(t){return n.aa(t.updateTimeMs,e)&&!n.la(t.clientId)}))},t.prototype.Ea=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return pp(e).Ds().next((function(e){return t.ua(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"Nr",{get:function(){return this.Oc},enumerable:!1,configurable:!0}),t.prototype.Ta=function(t){return Gd.Ao(t,this.fe,this.To,this.Io)},t.prototype.ac=function(){return this.Qc},t.prototype._c=function(){return this.Kc},t.prototype.Ia=function(){return this.To},t.prototype.ma=function(){return this.Wc},t.prototype.runTransaction=function(t,e,n){var r,i=this;return bu("IndexedDbPersistence","Starting transaction:",t),this.Uc.runTransaction(t,"readonly"===e?"readonly":"readwrite",Cd,(function(o){return r=new Od(o,i.Fc?i.Fc.next():Df.Zi),"readwrite-primary"===e?i.ta(r).next((function(t){return!!t||i.na(r)})).next((function(e){if(!e)throw _u("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.js.ea((function(){return i.Bc(!1)})),new Ru(ku.FAILED_PRECONDITION,Nf);return n(r)})).next((function(t){return i.ia(r).next((function(){return t}))})):i.Aa(r).next((function(){return n(r)}))})).then((function(t){return r.ki(),t}))},t.prototype.Aa=function(t){var e=this;return dp(t).get(ud.key).next((function(t){if(null!==t&&e.aa(t.leaseTimestampMs,5e3)&&!e.la(t.ownerId)&&!e.ra(t)&&!(e.Nc||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Ru(ku.FAILED_PRECONDITION,hp)}))},t.prototype.ia=function(t){var e=new ud(this.clientId,this.allowTabSynchronization,Date.now());return dp(t).put(ud.key,e)},t.G=function(){return gf.G()},t.prototype.sa=function(t){var e=this,n=dp(t);return n.get(ud.key).next((function(t){return e.ra(t)?(bu("IndexedDbPersistence","Releasing primary lease."),n.delete(ud.key)):pf.resolve()}))},t.prototype.aa=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(_u("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.zc=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Mc=function(){t.js.Ws((function(){return t.inForeground="visible"===t.document.visibilityState,t.Gc()}))},this.document.addEventListener("visibilitychange",this.Mc),this.inForeground="visible"===this.document.visibilityState)},t.prototype.fa=function(){this.Mc&&(this.document.removeEventListener("visibilitychange",this.Mc),this.Mc=null)},t.prototype.Hc=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.kc=function(){e._a(),e.js.Ws((function(){return e.$()}))},this.window.addEventListener("unload",this.kc))},t.prototype.da=function(){this.kc&&(this.window.removeEventListener("unload",this.kc),this.kc=null)},t.prototype.la=function(t){var e;try{var n=null!==(null===(e=this.jc)||void 0===e?void 0:e.getItem(this.ha(t)));return bu("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return _u("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype._a=function(){if(this.jc)try{this.jc.setItem(this.ha(this.clientId),String(Date.now()))}catch(t){_u("Failed to set zombie client id.",t)}},t.prototype.wa=function(){if(this.jc)try{this.jc.removeItem(this.ha(this.clientId))}catch(t){}},t.prototype.ha=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function dp(t){return Td(t,ud.store)}function pp(t){return Td(t,_d.store)}function yp(t,e){var n=t.projectId;return t.M||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var gp=function(){function t(t,e,n){this.Kc=t,this.Ra=e,this.To=n}return t.prototype.Pa=function(t,e){var n=this;return this.Ra.So(t,e).next((function(r){return n.ya(t,e,r)}))},t.prototype.ya=function(t,e,n){return this.Kc.Ar(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].ir(e,t);return t}))},t.prototype.ga=function(t,e,n){var r=dh();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].ir(t,e);r=r.Ie(t,e)})),r},t.prototype.Va=function(t,e){var n=this;return this.Kc.getEntries(t,e).next((function(e){return n.pa(t,e)}))},t.prototype.pa=function(t,e){var n=this;return this.Ra.Do(t,e).next((function(r){var i=n.ga(t,e,r),o=fh();return i.forEach((function(t,e){e||(e=new Vc(t,ac.min())),o=o.Ie(t,e)})),o}))},t.prototype.Pc=function(t,e,n){return function(t){return fc.qt(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.ba(t,e.path):yl(e)?this.va(t,e,n):this.Sa(t,e,n)},t.prototype.ba=function(t,e){return this.Pa(t,new fc(e)).next((function(t){var e=yh();return t instanceof Uc&&(e=e.Ie(t.key,t)),e}))},t.prototype.va=function(t,e,n){var r=this,i=e.collectionGroup,o=yh();return this.To.wo(t,i).next((function(s){return pf.forEach(s,(function(s){var a=function(t,e){return new ul(e,null,t.ne.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.Sa(t,a,n).next((function(t){t.forEach((function(t,e){o=o.Ie(t,e)}))}))})).next((function(){return o}))}))},t.prototype.Sa=function(t,e,n){var r,i,o=this;return this.Kc.Pc(t,e,n).next((function(n){return r=n,o.Ra.xo(t,e)})).next((function(e){return o.Da(t,i=e,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c),h=Ql(u,l,l,o.er);r=h instanceof Uc?r.Ie(c,h):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){El(e,n)||(r=r.remove(t))})),r}))},t.prototype.Da=function(t,e,n){for(var r=bh(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Xl&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Kc.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof Uc&&(c=c.Ie(t,e))})),c}))},t}(),vp=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.Ca=n,this.xa=r}return t.Na=function(e,n){for(var r=bh(),i=bh(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),mp=function(){function t(){}return t.prototype.Fa=function(t){this.Oa=t},t.prototype.Pc=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.ne.length||1===t.ne.length&&t.ne[0].field.Ot())}(e)||n.isEqual(ac.min())?this.ka(t,e):this.Oa.Va(t,r).next((function(o){var s=i.Ma(e,o);return(hl(e)||fl(e))&&i.La(e.limitType,s,r,n)?i.ka(t,e):(mu()<=pi.a.DEBUG&&bu("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),wl(e)),i.Oa.Pc(t,e,n).next((function(t){return s.forEach((function(e){t=t.Ie(e.key,e)})),t})))}))},t.prototype.Ma=function(t,e){var n=new ch(Cl(t));return e.forEach((function(e,r){r instanceof Uc&&El(t,r)&&(n=n.add(r))})),n},t.prototype.La=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.u(r)>0)},t.prototype.ka=function(t,e){return mu()<=pi.a.DEBUG&&bu("QueryEngine","Using full collection scan to execute query:",wl(e)),this.Oa.Pc(t,e,ac.min())},t}(),bp=function(){function t(t,e,n,r){this.persistence=t,this.$a=e,this.fe=r,this.Ba=new sh(xu),this.qa=new Vf((function(t){return zc(t)}),Wc),this.Ua=ac.min(),this.Ra=t.Ta(n),this.Qa=t._c(),this.Qc=t.ac(),this.Ka=new gp(this.Qa,this.Ra,this.persistence.Ia()),this.Wc=t.ma(),this.$a.Fa(this.Ka)}return t.prototype.Fr=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.Ur(n,e.Ba)}))},t}();function _p(t,e,n,r){return new bp(t,e,n,r)}function wp(t,e){return Object(gu.b)(this,void 0,void 0,(function(){var n,r,i,o;return Object(gu.d)(this,(function(s){switch(s.label){case 0:return n=Tu(t),r=n.Ra,i=n.Ka,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n.Ra.vo(t).next((function(s){return o=s,r=n.persistence.Ta(e),i=new gp(n.Qa,r,n.persistence.Ia()),r.vo(t)})).next((function(e){for(var n=[],r=[],s=bh(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];r.push(p.batchId);for(var y=0,g=p.mutations;y<g.length;y++)s=s.add(g[y].key)}return i.Va(t,s).next((function(t){return{Wa:t,ja:n,Ga:r}}))}))}))];case 1:return o=s.sent(),[2,(n.Ra=r,n.Ka=i,n.$a.Fa(n.Ka),o)]}}))}))}function Ep(t,e){var n=Tu(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.Qa.lc({yc:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=pf.resolve();return o.forEach((function(t){s=s.next((function(){return r.Ar(e,t)})).next((function(e){var o=e,s=n.ar.get(t);Ou(null!==s),(!o||o.version.u(s)<0)&&(o=i.nr(t,o,n))&&r.Er(o,n.cr)}))})),s.next((function(){return t.Ra.No(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n.Ra.ko(t)})).next((function(){return n.Ka.Va(t,r)}))}))}function Cp(t){var e=Tu(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.Qc.Wo(t)}))}function Op(t,e){var n=Tu(t),r=e.oe,i=n.Ba;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Qa.lc({yc:!0});i=n.Ba;var s=[];e.rn.forEach((function(e,o){var a=i.get(o);if(a){s.push(n.Qc.ic(t,e.dn,o).next((function(){return n.Qc.nc(t,e._n,o)})));var u=e.resumeToken;if(u.o()>0){var c=a.ae(u,r).ce(t.oo);i=i.Ie(o,c),function(t,e,n){return Ou(e.resumeToken.o()>0),0===t.resumeToken.o()||e.oe.Et()-t.oe.Et()>=3e8||n._n.size+n.fn.size+n.dn.size>0}(a,c,e)&&s.push(n.Qc.Yo(t,c))}}}));var a=fh();if(e.cn.forEach((function(r,i){e.an.has(r)&&s.push(n.persistence.Io.fc(t,r))})),s.push(Tp(t,o,e.cn,r,void 0).next((function(t){a=t}))),!r.isEqual(ac.min())){var u=n.Qc.Wo(t).next((function(e){return n.Qc.Go(t,t.oo,r)}));s.push(u)}return pf.hs(s).next((function(){return o.apply(t)})).next((function(){return n.Ka.pa(t,a)}))})).then((function(t){return n.Ba=i,t}))}function Tp(t,e,n,r,i){var o=bh();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=fh();return n.forEach((function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s instanceof Vc&&s.version.isEqual(ac.min())?(e.mr(n,u),o=o.Ie(n,s)):null==a||s.version.u(a.version)>0||0===s.version.u(a.version)&&a.hasPendingWrites?(e.Er(s,u),o=o.Ie(n,s)):bu("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),o}))}function Ip(t,e){var n=Tu(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.Ra.po(t,e)}))}function Sp(t,e){var n=Tu(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.Qc.ec(t,e).next((function(i){return i?pf.resolve(r=i):n.Qc.Uo(t).next((function(i){return r=new Tl(e,i,0,t.oo),n.Qc.zo(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Ba.get(t.targetId);return(null===r||t.oe.u(r.oe)>0)&&(n.Ba=n.Ba.Ie(t.targetId,t),n.qa.set(e,t.targetId)),t}))}function xp(t,e,n){return Object(gu.b)(this,void 0,void 0,(function(){var r,i,o,s;return Object(gu.d)(this,(function(a){switch(a.label){case 0:r=Tu(t),i=r.Ba.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.Io.removeTarget(t,i)}))];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!bf(s=a.sent()))throw s;return bu("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Ba=r.Ba.remove(e),r.qa.delete(i.target),[2]}}))}))}function jp(t,e,n){var r=Tu(t),i=ac.min(),o=bh();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=Tu(t),i=r.qa.get(n);return void 0!==i?pf.resolve(r.Ba.get(i)):r.Qc.ec(e,n)}(r,t,vl(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.Qc.oc(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.$a.Pc(t,e,n?i:ac.min(),n?o:bh())})).next((function(t){return{documents:t,za:o}}))}))}function Ap(t,e){var n=Tu(t),r=Tu(n.Qc),i=n.Ba.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.Zn(t,e).next((function(t){return t?t.target:null}))}))}function Np(t){var e=Tu(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=Tu(t),i=fh(),o=jd(n),s=ap(e),a=IDBKeyRange.lowerBound(o,!0);return s.Fs({index:pd.readTimeIndex,range:a},(function(t,e){var n=Sd(r.fe,e);i=i.Ie(n.key,n),o=e.readTime})).next((function(){return{tr:i,readTime:Ad(o)}}))}(e.Qa,t,e.Ua)})).then((function(t){var n=t.tr;return e.Ua=t.readTime,n}))}function kp(t){return Object(gu.b)(this,void 0,void 0,(function(){var e;return Object(gu.d)(this,(function(n){return[2,(e=Tu(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=ap(t),n=ac.min();return e.Fs({index:pd.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Ad(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.Ua=t}))]}))}))}function Rp(t,e,n,r){return Object(gu.b)(this,void 0,void 0,(function(){var i,o,s,a,u,c,l,h,f,d;return Object(gu.d)(this,(function(p){switch(p.label){case 0:for(i=Tu(t),o=bh(),s=fh(),a=vh(),u=0,c=n;u<c.length;u++)h=e.Ha((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.Ie(h,e.Ja(l)),a=a.Ie(h,e.Ya(l.metadata.readTime));return f=i.Qa.lc({yc:!0}),[4,Sp(i,function(t){return vl(ll(cc.xt("__bundle__/docs/"+t)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return Tp(t,f,s,ac.min(),a).next((function(e){return f.apply(t),e})).next((function(e){return i.Qc.Zo(t,d.targetId).next((function(){return i.Qc.nc(t,o,d.targetId)})).next((function(){return i.Ka.pa(t,e)}))}))}))]}}))}))}function Pp(t,e,n){return void 0===n&&(n=bh()),Object(gu.b)(this,void 0,void 0,(function(){var r,i;return Object(gu.d)(this,(function(o){switch(o.label){case 0:return[4,Sp(t,vl(Ld(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Tu(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=Vh(e.readTime);if(r.oe.u(o)>=0)return i.Wc.lo(t,e);var s=r.ae(Nu.h,o);return i.Ba=i.Ba.Ie(s.targetId,s),i.Qc.Yo(t,s).next((function(){return i.Qc.Zo(t,r.targetId)})).next((function(){return i.Qc.nc(t,n,r.targetId)})).next((function(){return i.Wc.lo(t,e)}))}))]}}))}))}var Dp=function(){function t(t){this.fe=t,this.Xa=new Map,this.Za=new Map}return t.prototype.ao=function(t,e){return pf.resolve(this.Xa.get(e))},t.prototype.uo=function(t,e){var n;return this.Xa.set(e.id,{id:(n=e).id,version:n.version,createTime:Vh(n.createTime)}),pf.resolve()},t.prototype.ho=function(t,e){return pf.resolve(this.Za.get(e))},t.prototype.lo=function(t,e){return this.Za.set(e.name,function(t){return{name:t.name,query:Ld(t.bundledQuery),readTime:Vh(t.readTime)}}(e)),pf.resolve()},t}(),Lp=function(){function t(){this.tu=new ch(Fp.eu),this.nu=new ch(Fp.su)}return t.prototype.bt=function(){return this.tu.bt()},t.prototype.sc=function(t,e){var n=new Fp(t,e);this.tu=this.tu.add(n),this.nu=this.nu.add(n)},t.prototype.iu=function(t,e){var n=this;t.forEach((function(t){return n.sc(t,e)}))},t.prototype.rc=function(t,e){this.ru(new Fp(t,e))},t.prototype.ou=function(t,e){var n=this;t.forEach((function(t){return n.rc(t,e)}))},t.prototype.cu=function(t){var e=this,n=new fc(new cc([])),r=new Fp(n,t),i=new Fp(n,t+1),o=[];return this.nu.Qe([r,i],(function(t){e.ru(t),o.push(t.key)})),o},t.prototype.au=function(){var t=this;this.tu.forEach((function(e){return t.ru(e)}))},t.prototype.ru=function(t){this.tu=this.tu.delete(t),this.nu=this.nu.delete(t)},t.prototype.uu=function(t){var e=new fc(new cc([])),n=new Fp(e,t),r=new Fp(e,t+1),i=bh();return this.nu.Qe([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.Mo=function(t){var e=new Fp(t,0),n=this.tu.We(e);return null!==n&&t.isEqual(n.key)},t}(),Fp=function(){function t(t,e){this.key=t,this.hu=e}return t.eu=function(t,e){return fc.At(t.key,e.key)||xu(t.hu,e.hu)},t.su=function(t,e){return xu(t.hu,e.hu)||fc.At(t.key,e.key)},t}(),Mp=function(){function t(t,e){this.To=t,this.Io=e,this.Ra=[],this.lu=1,this._u=new ch(Fp.eu)}return t.prototype.Ro=function(t){return pf.resolve(0===this.Ra.length)},t.prototype.Po=function(t,e,n,r){var i=this.lu;this.lu++;var o=new Mf(i,e,n,r);this.Ra.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this._u=this._u.add(new Fp(u.key,i)),this.To.fo(t,u.key.path.yt())}return pf.resolve(o)},t.prototype.yo=function(t,e){return pf.resolve(this.fu(e))},t.prototype.po=function(t,e){var n=this.du(e+1),r=n<0?0:n;return pf.resolve(this.Ra.length>r?this.Ra[r]:null)},t.prototype.bo=function(){return pf.resolve(0===this.Ra.length?-1:this.lu-1)},t.prototype.vo=function(t){return pf.resolve(this.Ra.slice())},t.prototype.So=function(t,e){var n=this,r=new Fp(e,0),i=new Fp(e,Number.POSITIVE_INFINITY),o=[];return this._u.Qe([r,i],(function(t){var e=n.fu(t.hu);o.push(e)})),pf.resolve(o)},t.prototype.Do=function(t,e){var n=this,r=new ch(xu);return e.forEach((function(t){var e=new Fp(t,0),i=new Fp(t,Number.POSITIVE_INFINITY);n._u.Qe([e,i],(function(t){r=r.add(t.hu)}))})),pf.resolve(this.wu(r))},t.prototype.xo=function(t,e){var n=e.path,r=n.length+1,i=n;fc.qt(i)||(i=i.child(""));var o=new Fp(new fc(i),0),s=new ch(xu);return this._u.Ke((function(t){var e=t.key.path;return!!n.vt(e)&&(e.length===r&&(s=s.add(t.hu)),!0)}),o),pf.resolve(this.wu(s))},t.prototype.wu=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.fu(t);null!==r&&n.push(r)})),n},t.prototype.No=function(t,e){var n=this;Ou(0===this.Eu(e.batchId,"removed")),this.Ra.shift();var r=this._u;return pf.forEach(e.mutations,(function(i){var o=new Fp(i.key,e.batchId);return r=r.delete(o),n.Io.Oo(t,i.key)})).next((function(){n._u=r}))},t.prototype.Fo=function(t){},t.prototype.Mo=function(t,e){var n=new Fp(e,0),r=this._u.We(n);return pf.resolve(e.isEqual(r&&r.key))},t.prototype.ko=function(t){return pf.resolve()},t.prototype.Eu=function(t,e){return this.du(t)},t.prototype.du=function(t){return 0===this.Ra.length?0:t-this.Ra[0].batchId},t.prototype.fu=function(t){var e=this.du(t);return e<0||e>=this.Ra.length?null:this.Ra[e]},t}(),Up=function(){function t(t,e){this.To=t,this.Tu=e,this.docs=new sh(fc.At),this.size=0}return t.prototype.Er=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.Tu(e);return this.docs=this.docs.Ie(r,{Ir:e,size:s,readTime:n}),this.size+=s-o,this.To.fo(t,r.path.yt())},t.prototype.mr=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.Ar=function(t,e){var n=this.docs.get(e);return pf.resolve(n?n.Ir:null)},t.prototype.getEntries=function(t,e){var n=this,r=dh();return e.forEach((function(t){var e=n.docs.get(t);r=r.Ie(t,e?e.Ir:null)})),pf.resolve(r)},t.prototype.Pc=function(t,e,n){for(var r=yh(),i=new fc(e.path.child("")),o=this.docs.Ve(i);o.Ce();){var s=o.De(),a=s.value,u=a.Ir,c=a.readTime;if(!e.path.vt(s.key.path))break;c.u(n)<=0||u instanceof Uc&&El(e,u)&&(r=r.Ie(u.key,u))}return pf.resolve(r)},t.prototype.Iu=function(t,e){return pf.forEach(this.docs,(function(t){return e(t)}))},t.prototype.lc=function(t){return new Vp(this)},t.prototype.dc=function(t){return pf.resolve(this.size)},t}(),Vp=function(t){function e(e){var n=this;return(n=t.call(this)||this).gc=e,n}return Object(gu.c)(e,t),e.prototype.yr=function(t){var e=this,n=[];return this._r.forEach((function(r,i){i&&i.Ir?n.push(e.gc.Er(t,i.Ir,e.wr(r))):e.gc.mr(r)})),pf.hs(n)},e.prototype.Rr=function(t,e){return this.gc.Ar(t,e)},e.prototype.Pr=function(t,e){return this.gc.getEntries(t,e)},e}(qf),qp=function(){function t(t){this.persistence=t,this.mu=new Vf((function(t){return zc(t)}),Wc),this.lastRemoteSnapshotVersion=ac.min(),this.highestTargetId=0,this.Au=0,this.Ru=new Lp,this.targetCount=0,this.Pu=Jd.Bo()}return t.prototype.Un=function(t,e){return this.mu.forEach((function(t,n){return e(n)})),pf.resolve()},t.prototype.Wo=function(t){return pf.resolve(this.lastRemoteSnapshotVersion)},t.prototype.jo=function(t){return pf.resolve(this.Au)},t.prototype.Uo=function(t){return this.highestTargetId=this.Pu.next(),pf.resolve(this.highestTargetId)},t.prototype.Go=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Au&&(this.Au=e),pf.resolve()},t.prototype.Ho=function(t){this.mu.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Pu=new Jd(e),this.highestTargetId=e),t.sequenceNumber>this.Au&&(this.Au=t.sequenceNumber)},t.prototype.zo=function(t,e){return this.Ho(e),this.targetCount+=1,pf.resolve()},t.prototype.Yo=function(t,e){return this.Ho(e),pf.resolve()},t.prototype.Xo=function(t,e){return this.mu.delete(e.target),this.Ru.cu(e.targetId),this.targetCount-=1,pf.resolve()},t.prototype.Br=function(t,e,n){var r=this,i=0,o=[];return this.mu.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.mu.delete(s),o.push(r.Zo(t,a.targetId)),i++)})),pf.hs(o).next((function(){return i}))},t.prototype.tc=function(t){return pf.resolve(this.targetCount)},t.prototype.ec=function(t,e){var n=this.mu.get(e)||null;return pf.resolve(n)},t.prototype.nc=function(t,e,n){return this.Ru.iu(e,n),pf.resolve()},t.prototype.ic=function(t,e,n){this.Ru.ou(e,n);var r=this.persistence.Io,i=[];return r&&e.forEach((function(e){i.push(r.Oo(t,e))})),pf.hs(i)},t.prototype.Zo=function(t,e){return this.Ru.cu(e),pf.resolve()},t.prototype.oc=function(t,e){var n=this.Ru.uu(e);return pf.resolve(n)},t.prototype.Mo=function(t,e){return pf.resolve(this.Ru.Mo(e))},t}(),Hp=function(){function t(t,e){var n=this;this.yu={},this.Fc=new Df(0),this.Oc=!1,this.Oc=!0,this.Io=t(this),this.Qc=new qp(this),this.To=new Vd,this.Kc=function(t,e){return new Up(t,(function(t){return n.Io.gu(t)}))}(this.To),this.fe=new Id(e),this.Wc=new Dp(this.fe)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.$=function(){return this.Oc=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Nr",{get:function(){return this.Oc},enumerable:!1,configurable:!0}),t.prototype.Xc=function(){},t.prototype.Zc=function(){},t.prototype.Ia=function(){return this.To},t.prototype.Ta=function(t){var e=this.yu[t.I()];return e||(e=new Mp(this.To,this.Io),this.yu[t.I()]=e),e},t.prototype.ac=function(){return this.Qc},t.prototype._c=function(){return this.Kc},t.prototype.ma=function(){return this.Wc},t.prototype.runTransaction=function(t,e,n){var r=this;bu("MemoryPersistence","Starting transaction:",t);var i=new Bp(this.Fc.next());return this.Io.Vu(),n(i).next((function(t){return r.Io.pu(i).next((function(){return t}))})).cs().then((function(t){return i.ki(),t}))},t.prototype.bu=function(t,e){return pf.ls(Object.values(this.yu).map((function(n){return function(){return n.Mo(t,e)}})))},t}(),Bp=function(t){function e(e){var n=this;return(n=t.call(this)||this).oo=e,n}return Object(gu.c)(e,t),e}(kf),zp=function(){function t(t){this.persistence=t,this.vu=new Lp,this.Su=null}return t.Du=function(e){return new t(e)},Object.defineProperty(t.prototype,"Cu",{get:function(){if(this.Su)return this.Su;throw Cu()},enumerable:!1,configurable:!0}),t.prototype.sc=function(t,e,n){return this.vu.sc(n,e),this.Cu.delete(n.toString()),pf.resolve()},t.prototype.rc=function(t,e,n){return this.vu.rc(n,e),this.Cu.add(n.toString()),pf.resolve()},t.prototype.Oo=function(t,e){return this.Cu.add(e.toString()),pf.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.vu.cu(e.targetId).forEach((function(t){return n.Cu.add(t.toString())}));var r=this.persistence.ac();return r.oc(t,e.targetId).next((function(t){t.forEach((function(t){return n.Cu.add(t.toString())}))})).next((function(){return r.Xo(t,e)}))},t.prototype.Vu=function(){this.Su=new Set},t.prototype.pu=function(t){var e=this,n=this.persistence._c().lc();return pf.forEach(this.Cu,(function(r){var i=fc.Lt(r);return e.xu(t,i).next((function(t){t||n.mr(i)}))})).next((function(){return e.Su=null,n.apply(t)}))},t.prototype.fc=function(t,e){var n=this;return this.xu(t,e).next((function(t){t?n.Cu.delete(e.toString()):n.Cu.add(e.toString())}))},t.prototype.gu=function(t){return 0},t.prototype.xu=function(t,e){var n=this;return pf.ls([function(){return pf.resolve(n.vu.Mo(e))},function(){return n.persistence.ac().Mo(t,e)},function(){return n.persistence.bu(t,e)}])},t}();function Wp(t,e){return"firestore_clients_"+t+"_"+e}function Gp(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.T()&&(r+="_"+e.uid),r}function Qp(t,e){return"firestore_targets_"+t+"_"+e}var $p=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Nu=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new Ru(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(_u("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Fu=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Kp=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Nu=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new Ru(r.error.code,r.error.message)),i?new t(e,r.state,o):(_u("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Fu=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Yp=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Nu=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=wh(),s=0;i&&s<r.activeTargetIds.length;++s)i=Ju(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(_u("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Jp=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Nu=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(_u("SharedClientState","Failed to parse online state: "+e),null)},t}(),Xp=function(){function t(){this.activeTargetIds=wh()}return t.prototype.Ou=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.ku=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Fu=function(){var t={activeTargetIds:this.activeTargetIds.Dt(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Zp=function(){function t(t,e,n,r,i){this.window=t,this.js=e,this.persistenceKey=n,this.Mu=r,this.Lu=null,this.$u=null,this.Hi=null,this.Bu=this.qu.bind(this),this.Uu=new sh(xu),this.Nr=!1,this.Qu=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ku=Wp(this.persistenceKey,this.Mu),this.Wu=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Uu=this.Uu.Ie(this.Mu,new Xp),this.ju=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Gu=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.zu=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Hu=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ju=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.Bu)}return t.G=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(gu.b)(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Object(gu.d)(this,(function(h){switch(h.label){case 0:return[4,this.Lu.Ea()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Mu&&(i=this.getItem(Wp(this.persistenceKey,r)))&&(o=Yp.Nu(r,i))&&(this.Uu=this.Uu.Ie(o.clientId,o));for(this.Yu(),(s=this.storage.getItem(this.Hu))&&(a=this.Xu(s))&&this.Zu(a),u=0,c=this.Qu;u<c.length;u++)this.qu(c[u]);return this.Qu=[],this.window.addEventListener("unload",(function(){return l.$()})),this.Nr=!0,[2]}}))}))},t.prototype.Xi=function(t){this.setItem(this.Wu,JSON.stringify(t))},t.prototype.th=function(){return this.eh(this.Uu)},t.prototype.nh=function(t){var e=!1;return this.Uu.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.sh=function(t){this.ih(t,"pending")},t.prototype.rh=function(t,e,n){this.ih(t,e,n),this.oh(t)},t.prototype.ah=function(t){var e="not-current";if(this.nh(t)){var n=this.storage.getItem(Qp(this.persistenceKey,t));if(n){var r=Kp.Nu(t,n);r&&(e=r.state)}}return this.uh.Ou(t),this.Yu(),e},t.prototype.hh=function(t){this.uh.ku(t),this.Yu()},t.prototype.lh=function(t){return this.uh.activeTargetIds.has(t)},t.prototype._h=function(t){this.removeItem(Qp(this.persistenceKey,t))},t.prototype.fh=function(t,e,n){this.dh(t,e,n)},t.prototype.wh=function(t,e,n){var r=this;e.forEach((function(t){r.oh(t)})),this.currentUser=t,n.forEach((function(t){r.sh(t)}))},t.prototype.Eh=function(t){this.Th(t)},t.prototype.Ih=function(){this.mh()},t.prototype.$=function(){this.Nr&&(this.window.removeEventListener("storage",this.Bu),this.removeItem(this.Ku),this.Nr=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return bu("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){bu("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){bu("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.qu=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(bu("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ku)return void _u("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.ea((function(){return Object(gu.b)(e,void 0,void 0,(function(){var t,e,r,i,o,s;return Object(gu.d)(this,(function(a){if(this.Nr){if(null!==n.key)if(this.ju.test(n.key)){if(null==n.newValue)return t=this.Ah(n.key),[2,this.Rh(t,null)];if(e=this.Ph(n.key,n.newValue))return[2,this.Rh(e.clientId,e)]}else if(this.Gu.test(n.key)){if(null!==n.newValue&&(r=this.yh(n.key,n.newValue)))return[2,this.gh(r)]}else if(this.zu.test(n.key)){if(null!==n.newValue&&(i=this.Vh(n.key,n.newValue)))return[2,this.ph(i)]}else if(n.key===this.Hu){if(null!==n.newValue&&(o=this.Xu(n.newValue)))return[2,this.Zu(o)]}else if(n.key===this.Wu)(s=function(t){var e=Df.Zi;if(null!=t)try{var n=JSON.parse(t);Ou("number"==typeof n),e=n}catch(t){_u("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Df.Zi&&this.Hi(s);else if(n.key===this.Ju)return[2,this.Lu.bh()]}else this.Qu.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"uh",{get:function(){return this.Uu.get(this.Mu)},enumerable:!1,configurable:!0}),t.prototype.Yu=function(){this.setItem(this.Ku,this.uh.Fu())},t.prototype.ih=function(t,e,n){var r=new $p(this.currentUser,t,e,n),i=Gp(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Fu())},t.prototype.oh=function(t){var e=Gp(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Th=function(t){this.storage.setItem(this.Hu,JSON.stringify({clientId:this.Mu,onlineState:t}))},t.prototype.dh=function(t,e,n){var r=Qp(this.persistenceKey,t),i=new Kp(t,e,n);this.setItem(r,i.Fu())},t.prototype.mh=function(){this.setItem(this.Ju,"value-not-used")},t.prototype.Ah=function(t){var e=this.ju.exec(t);return e?e[1]:null},t.prototype.Ph=function(t,e){var n=this.Ah(t);return Yp.Nu(n,e)},t.prototype.yh=function(t,e){var n=this.Gu.exec(t),r=Number(n[1]);return $p.Nu(new Uu(void 0!==n[2]?n[2]:null),r,e)},t.prototype.Vh=function(t,e){var n=this.zu.exec(t),r=Number(n[1]);return Kp.Nu(r,e)},t.prototype.Xu=function(t){return Jp.Nu(t)},t.prototype.gh=function(t){return Object(gu.b)(this,void 0,void 0,(function(){return Object(gu.d)(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.Lu.Sh(t.batchId,t.state,t.error)]:(bu("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.ph=function(t){return this.Lu.Dh(t.targetId,t.state,t.error)},t.prototype.Rh=function(t,e){var n=this,r=e?this.Uu.Ie(t,e):this.Uu.remove(t),i=this.eh(this.Uu),o=this.eh(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this.Lu.Ch(s,a).then((function(){n.Uu=r}))},t.prototype.Zu=function(t){this.Uu.get(t.clientId)&&this.$u(t.onlineState)},t.prototype.eh=function(t){var e=wh();return t.forEach((function(t,n){e=e.je(n.activeTargetIds)})),e},t}(),ty=function(){function t(){this.xh=new Xp,this.Nh={},this.$u=null,this.Hi=null}return t.prototype.sh=function(t){},t.prototype.rh=function(t,e,n){},t.prototype.ah=function(t){return this.xh.Ou(t),this.Nh[t]||"not-current"},t.prototype.fh=function(t,e,n){this.Nh[t]=e},t.prototype.hh=function(t){this.xh.ku(t)},t.prototype.lh=function(t){return this.xh.activeTargetIds.has(t)},t.prototype._h=function(t){delete this.Nh[t]},t.prototype.th=function(){return this.xh.activeTargetIds},t.prototype.nh=function(t){return this.xh.activeTargetIds.has(t)},t.prototype.start=function(){return this.xh=new Xp,Promise.resolve()},t.prototype.wh=function(t,e,n){},t.prototype.Eh=function(t){},t.prototype.$=function(){},t.prototype.Xi=function(t){},t.prototype.Ih=function(){},t}();function ey(){return"undefined"!=typeof window?window:null}function ny(){return"undefined"!=typeof document?document:null}var ry=function(){function t(t,e){this.ks=t,this.$u=e,this.state="Unknown",this.Fh=0,this.Oh=null,this.kh=!0}return t.prototype.Mh=function(){var t=this;0===this.Fh&&(this.Lh("Unknown"),this.Oh=this.ks.ni("online_state_timeout",1e4,(function(){return t.Oh=null,t.$h("Backend didn't respond within 10 seconds."),t.Lh("Offline"),Promise.resolve()})))},t.prototype.Bh=function(t){"Online"===this.state?this.Lh("Unknown"):(this.Fh++,this.Fh>=1&&(this.qh(),this.$h("Connection failed 1 times. Most recent error: "+t.toString()),this.Lh("Offline")))},t.prototype.set=function(t){this.qh(),this.Fh=0,"Online"===t&&(this.kh=!1),this.Lh(t)},t.prototype.Lh=function(t){t!==this.state&&(this.state=t,this.$u(t))},t.prototype.$h=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.kh?(_u(e),this.kh=!1):bu("OnlineStateTracker",e)},t.prototype.qh=function(){null!==this.Oh&&(this.Oh.cancel(),this.Oh=null)},t}(),iy=function(t,e,n,r,i){var o=this;this.Uh=t,this.Qh=e,this.ks=n,this.Kh={},this.Wh=[],this.jh=new Map,this.Gh=new Set,this.zh=[],this.Hh=i,this.Hh.L((function(t){n.Ws((function(){return Object(gu.b)(o,void 0,void 0,(function(){return Object(gu.d)(this,(function(t){switch(t.label){case 0:return dy(this)?(bu("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(gu.b)(this,void 0,void 0,(function(){var e;return Object(gu.d)(this,(function(n){switch(n.label){case 0:return(e=Tu(t)).Gh.add(4),[4,sy(e)];case 1:return n.sent(),e.Jh.set("Unknown"),e.Gh.delete(4),[4,oy(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Jh=new ry(n,r)};function oy(t){return Object(gu.b)(this,void 0,void 0,(function(){var e,n;return Object(gu.d)(this,(function(r){switch(r.label){case 0:if(!dy(t))return[3,4];e=0,n=t.zh,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function sy(t){return Object(gu.b)(this,void 0,void 0,(function(){var e,n;return Object(gu.d)(this,(function(r){switch(r.label){case 0:e=0,n=t.zh,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function ay(t,e){var n=Tu(t);n.jh.has(e.targetId)||(n.jh.set(e.targetId,e),fy(n)?hy(n):xy(n).li()&&cy(n,e))}function uy(t,e){var n=Tu(t),r=xy(n);n.jh.delete(e),r.li()&&ly(n,e),0===n.jh.size&&(r.li()?r.di():dy(n)&&n.Jh.set("Unknown"))}function cy(t,e){t.Yh.Dn(e.targetId),xy(t).gi(e)}function ly(t,e){t.Yh.Dn(e),xy(t).Vi(e)}function hy(t){t.Yh=new Nh({Xn:function(e){return t.Kh.Xn(e)},Zn:function(e){return t.jh.get(e)||null}}),xy(t).start(),t.Jh.Mh()}function fy(t){return dy(t)&&!xy(t).hi()&&t.jh.size>0}function dy(t){return 0===Tu(t).Gh.size}function py(t){t.Yh=void 0}function yy(t){return Object(gu.b)(this,void 0,void 0,(function(){return Object(gu.d)(this,(function(e){return t.jh.forEach((function(e,n){cy(t,e)})),[2]}))}))}function gy(t,e){return Object(gu.b)(this,void 0,void 0,(function(){return Object(gu.d)(this,(function(n){return py(t),fy(t)?(t.Jh.Bh(e),hy(t)):t.Jh.set("Unknown"),[2]}))}))}function vy(t,e,n){return Object(gu.b)(this,void 0,void 0,(function(){var r,i,o;return Object(gu.d)(this,(function(s){switch(s.label){case 0:if(t.Jh.set("Online"),!(e instanceof jh&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(gu.b)(this,void 0,void 0,(function(){var n,r,i,o;return Object(gu.d)(this,(function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.jh.has(o=i[r])?[4,t.Kh.Xh(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.jh.delete(o),t.Yh.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),bu("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,my(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Sh?t.Yh.Ln(e):e instanceof xh?t.Yh.jn(e):t.Yh.qn(e),n.isEqual(ac.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Cp(t.Uh)];case 8:return i=s.sent(),n.u(i)>=0?[4,function(t,e){var n=t.Yh.Hn(e);return n.rn.forEach((function(n,r){if(n.resumeToken.o()>0){var i=t.jh.get(r);i&&t.jh.set(r,i.ae(n.resumeToken,e))}})),n.on.forEach((function(e){var n=t.jh.get(e);if(n){t.jh.set(e,n.ae(Nu.h,n.oe)),ly(t,e);var r=new Tl(n.target,e,1,n.sequenceNumber);cy(t,r)}})),t.Kh.Zh(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return bu("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,my(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function my(t,e,n){return Object(gu.b)(this,void 0,void 0,(function(){var r=this;return Object(gu.d)(this,(function(i){switch(i.label){case 0:if(!bf(e))throw e;return t.Gh.add(1),[4,sy(t)];case 1:return i.sent(),t.Jh.set("Offline"),n||(n=function(){return Cp(t.Uh)}),t.ks.ea((function(){return Object(gu.b)(r,void 0,void 0,(function(){return Object(gu.d)(this,(function(e){switch(e.label){case 0:return bu("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Gh.delete(1),[4,oy(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function by(t,e){return e().catch((function(n){return my(t,n,e)}))}function _y(t){return Object(gu.b)(this,void 0,void 0,(function(){var e,n,r,i,o;return Object(gu.d)(this,(function(s){switch(s.label){case 0:e=Tu(t),n=jy(e),r=e.Wh.length>0?e.Wh[e.Wh.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return dy(t)&&t.Wh.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,Ip(e.Uh,r)];case 3:return null===(i=s.sent())?(0===e.Wh.length&&n.di(),[3,7]):(r=i.batchId,function(t,e){t.Wh.push(e);var n=jy(t);n.li()&&n.bi&&n.vi(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,my(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return wy(e)&&Ey(e),[2]}}))}))}function wy(t){return dy(t)&&!jy(t).hi()&&t.Wh.length>0}function Ey(t){jy(t).start()}function Cy(t){return Object(gu.b)(this,void 0,void 0,(function(){return Object(gu.d)(this,(function(e){return jy(t).Ci(),[2]}))}))}function Oy(t){return Object(gu.b)(this,void 0,void 0,(function(){var e,n,r;return Object(gu.d)(this,(function(i){for(e=jy(t),n=0,r=t.Wh;n<r.length;n++)e.vi(r[n].mutations);return[2]}))}))}function Ty(t,e,n){return Object(gu.b)(this,void 0,void 0,(function(){var r,i;return Object(gu.d)(this,(function(o){switch(o.label){case 0:return r=t.Wh.shift(),i=Uf.from(r,e,n),[4,by(t,(function(){return t.Kh.tl(i)}))];case 1:return o.sent(),[4,_y(t)];case 2:return o.sent(),[2]}}))}))}function Iy(t,e){return Object(gu.b)(this,void 0,void 0,(function(){return Object(gu.d)(this,(function(n){switch(n.label){case 0:return e&&jy(t).bi?[4,function(t,e){return Object(gu.b)(this,void 0,void 0,(function(){var n,r;return Object(gu.d)(this,(function(i){switch(i.label){case 0:return ec(r=e.code)&&r!==ku.ABORTED?(n=t.Wh.shift(),jy(t).fi(),[4,by(t,(function(){return t.Kh.el(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,_y(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return wy(t)&&Ey(t),[2]}}))}))}function Sy(t,e){return Object(gu.b)(this,void 0,void 0,(function(){var n;return Object(gu.d)(this,(function(r){switch(r.label){case 0:return n=Tu(t),e?(n.Gh.delete(2),[4,oy(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Gh.add(2),[4,sy(n)]);case 3:r.sent(),n.Jh.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function xy(t){var e=this;return t.nl||(t.nl=function(t,e,n){var r=Tu(t);return r.Ni(),new xf(e,r.ri,r.credentials,r.fe,n)}(t.Qh,t.ks,{Y:yy.bind(null,t),Z:gy.bind(null,t),yi:vy.bind(null,t)}),t.zh.push((function(n){return Object(gu.b)(e,void 0,void 0,(function(){return Object(gu.d)(this,(function(e){switch(e.label){case 0:return n?(t.nl.fi(),fy(t)?hy(t):t.Jh.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.nl.stop()];case 2:e.sent(),py(t),e.label=3;case 3:return[2]}}))}))}))),t.nl}function jy(t){var e=this;return t.sl||(t.sl=function(t,e,n){var r=Tu(t);return r.Ni(),new jf(e,r.ri,r.credentials,r.fe,n)}(t.Qh,t.ks,{Y:Cy.bind(null,t),Z:Iy.bind(null,t),Di:Oy.bind(null,t),Si:Ty.bind(null,t)}),t.zh.push((function(n){return Object(gu.b)(e,void 0,void 0,(function(){return Object(gu.d)(this,(function(e){switch(e.label){case 0:return n?(t.sl.fi(),[4,_y(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.sl.stop()];case 3:e.sent(),t.Wh.length>0&&(bu("RemoteStore","Stopping write stream with "+t.Wh.length+" pending writes"),t.Wh=[]),e.label=4;case 4:return[2]}}))}))}))),t.sl}var Ay=function(){this.il=void 0,this.listeners=[]},Ny=function(){this.queries=new Vf((function(t){return _l(t)}),bl),this.onlineState="Unknown",this.rl=new Set};function ky(t,e){return Object(gu.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return Object(gu.d)(this,(function(c){switch(c.label){case 0:if(n=Tu(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new Ay),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.ol(r)];case 2:return s.il=c.sent(),[3,4];case 3:return a=c.sent(),u=Tf(a,"Initialization of query '"+wl(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.cl(n.onlineState),o.il&&e.al(o.il)&&Ly(n),[2]}}))}))}function Ry(t,e){return Object(gu.b)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(gu.d)(this,(function(a){return n=Tu(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.ul(r))]:[2]}))}))}function Py(t,e){for(var n=Tu(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].al(s)&&(r=!0);a.il=s}}r&&Ly(n)}function Dy(t,e,n){var r=Tu(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Ly(t){t.rl.forEach((function(t){t.next()}))}var Fy=function(){function t(t,e,n){this.query=t,this.hl=e,this.ll=!1,this._l=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.al=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Oh(t.query,t.docs,t.Ze,e,t.tn,t.fromCache,t.en,!0)}var o=!1;return this.ll?this.fl(t)&&(this.hl.next(t),o=!0):this.dl(t,this.onlineState)&&(this.wl(t),o=!0),this._l=t,o},t.prototype.onError=function(t){this.hl.error(t)},t.prototype.cl=function(t){this.onlineState=t;var e=!1;return this._l&&!this.ll&&this.dl(this._l,t)&&(this.wl(this._l),e=!0),e},t.prototype.dl=function(t,e){return!t.fromCache||!(this.options.El&&"Offline"!==e||t.docs.bt()&&"Offline"!==e)},t.prototype.fl=function(t){return t.docChanges.length>0||!!(t.en||this._l&&this._l.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.wl=function(t){t=Oh.sn(t.query,t.docs,t.tn,t.fromCache),this.ll=!0,this.hl.next(t)},t}(),My=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.Tl=function(){return"metadata"in this.payload},t}(),Uy=function(){function t(t){this.fe=t}return t.prototype.Ha=function(t){return zh(this.fe,t)},t.prototype.Ja=function(t){return t.metadata.exists?Yh(this.fe,t.document,!1):new Vc(this.Ha(t.metadata.name),this.Ya(t.metadata.readTime))},t.prototype.Ya=function(t){return Vh(t)},t}();!function(){function t(t,e,n){this.Il=t,this.Uh=e,this.fe=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.ml=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.Al=function(t){for(var e=new Map,n=new Uy(this.fe),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.Ha(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||bh()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(gu.b)(this,void 0,void 0,(function(){var t,e,n,r,i;return Object(gu.d)(this,(function(o){switch(o.label){case 0:return[4,Rp(this.Uh,new Uy(this.fe),this.documents,this.Il.id)];case 1:t=o.sent(),e=this.Al(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,Pp(this.Uh,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Ff(Object.assign({},this.progress),t))]}}))}))}}();var Vy=function(t){this.key=t},qy=function(t){this.key=t},Hy=function(){function t(t,e){this.query=t,this.Rl=e,this.Pl=null,this.ln=!1,this.yl=bh(),this.tn=bh(),this.gl=Cl(t),this.Vl=new Eh(this.gl)}return Object.defineProperty(t.prototype,"pl",{get:function(){return this.Rl},enumerable:!1,configurable:!0}),t.prototype.bl=function(t,e){var n=this,r=e?e.vl:new Ch,i=e?e.Vl:this.Vl,o=e?e.tn:this.tn,s=i,a=!1,u=hl(this.query)&&i.size===this.query.limit?i.last():null,c=fl(this.query)&&i.size===this.query.limit?i.first():null;if(t.Pe((function(t,e){var l=i.get(t),h=e instanceof Uc?e:null;h&&(h=El(n.query,h)?h:null);var f=!!l&&n.tn.has(l.key),d=!!h&&(h.Jt||n.tn.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data().isEqual(h.data())?f!==d&&(r.track({type:3,doc:h}),p=!0):n.Sl(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.gl(h,u)>0||c&&n.gl(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),hl(this.query)||fl(this.query))for(;s.size>this.query.limit;){var l=hl(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{Vl:s,vl:r,La:a,tn:o}},t.prototype.Sl=function(t,e){return t.Jt&&e.hasCommittedMutations&&!e.Jt},t.prototype.yr=function(t,e,n){var r=this,i=this.Vl;this.Vl=t.Vl,this.tn=t.tn;var o=t.vl.Xe();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Cu()}};return n(t)-n(e)}(t.type,e.type)||r.gl(t.doc,e.doc)})),this.Dl(n);var s=e?this.Cl():[],a=0===this.yl.size&&this.ln?1:0,u=a!==this.Pl;return this.Pl=a,0!==o.length||u?{snapshot:new Oh(this.query,t.Vl,i,o,t.tn,0===a,u,!1),xl:s}:{xl:s}},t.prototype.cl=function(t){return this.ln&&"Offline"===t?(this.ln=!1,this.yr({Vl:this.Vl,vl:new Ch,tn:this.tn,La:!1},!1)):{xl:[]}},t.prototype.Nl=function(t){return!this.Rl.has(t)&&!!this.Vl.has(t)&&!this.Vl.get(t).Jt},t.prototype.Dl=function(t){var e=this;t&&(t._n.forEach((function(t){return e.Rl=e.Rl.add(t)})),t.fn.forEach((function(t){})),t.dn.forEach((function(t){return e.Rl=e.Rl.delete(t)})),this.ln=t.ln)},t.prototype.Cl=function(){var t=this;if(!this.ln)return[];var e=this.yl;this.yl=bh(),this.Vl.forEach((function(e){t.Nl(e.key)&&(t.yl=t.yl.add(e.key))}));var n=[];return e.forEach((function(e){t.yl.has(e)||n.push(new qy(e))})),this.yl.forEach((function(t){e.has(t)||n.push(new Vy(t))})),n},t.prototype.Fl=function(t){this.Rl=t.za,this.yl=bh();var e=this.bl(t.documents);return this.yr(e,!0)},t.prototype.Ol=function(){return Oh.sn(this.query,this.Vl,this.tn,0===this.Pl)},t}(),By=function(t,e,n){this.query=t,this.targetId=e,this.view=n},zy=function(t){this.key=t,this.kl=!1},Wy=function(){function t(t,e,n,r,i,o){this.Uh=t,this.Ml=e,this.Ll=n,this.$l=r,this.currentUser=i,this.Bl=o,this.ql={},this.Ul=new Vf((function(t){return _l(t)}),bl),this.Ql=new Map,this.Kl=[],this.Wl=new sh(fc.At),this.jl=new Map,this.Gl=new Lp,this.zl={},this.Hl=new Map,this.Jl=Jd.qo(),this.onlineState="Unknown",this.Yl=void 0}return Object.defineProperty(t.prototype,"Xl",{get:function(){return!0===this.Yl},enumerable:!1,configurable:!0}),t}();function Gy(t,e){return Object(gu.b)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(gu.d)(this,(function(a){switch(a.label){case 0:return n=wg(t),(i=n.Ul.get(e))?(n.$l.ah(i.targetId),r=i.view.Ol(),[3,4]):[3,1];case 1:return[4,Sp(n.Uh,vl(e))];case 2:return o=a.sent(),s=n.$l.ah(o.targetId),[4,Qy(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.Xl&&ay(n.Ml,o),a.label=4;case 4:return[2,r]}}))}))}function Qy(t,e,n,r){return Object(gu.b)(this,void 0,void 0,(function(){var i,o,s,a,u,c;return Object(gu.d)(this,(function(l){switch(l.label){case 0:return t.Zl=function(e,n,r){return function(t,e,n,r){return Object(gu.b)(this,void 0,void 0,(function(){var i,o,s;return Object(gu.d)(this,(function(a){switch(a.label){case 0:return(i=e.view.bl(n)).La?[4,jp(t.Uh,e.query,!1).then((function(t){return e.view.bl(t.documents,i)}))]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.rn.get(e.targetId),s=e.view.yr(i,t.Xl,o),[2,(sg(t,e.targetId,s.xl),s.snapshot)]}}))}))}(t,e,n,r)},[4,jp(t.Uh,e,!0)];case 1:return i=l.sent(),o=new Hy(e,i.za),s=o.bl(i.documents),a=Ih.hn(n,r&&"Offline"!==t.onlineState),u=o.yr(s,t.Xl,a),sg(t,n,u.xl),c=new By(e,n,o),[2,(t.Ul.set(e,c),t.Ql.has(n)?t.Ql.get(n).push(e):t.Ql.set(n,[e]),u.snapshot)]}}))}))}function $y(t,e){return Object(gu.b)(this,void 0,void 0,(function(){var n,r,i;return Object(gu.d)(this,(function(o){switch(o.label){case 0:return n=Tu(t),r=n.Ul.get(e),(i=n.Ql.get(r.targetId)).length>1?[2,(n.Ql.set(r.targetId,i.filter((function(t){return!bl(t,e)}))),void n.Ul.delete(e))]:n.Xl?(n.$l.hh(r.targetId),n.$l.nh(r.targetId)?[3,2]:[4,xp(n.Uh,r.targetId,!1).then((function(){n.$l._h(r.targetId),uy(n.Ml,r.targetId),ig(n,r.targetId)})).catch(Lf)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return ig(n,r.targetId),[4,xp(n.Uh,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function Ky(t,e,n){return Object(gu.b)(this,void 0,void 0,(function(){var r,i,o,s;return Object(gu.d)(this,(function(a){switch(a.label){case 0:r=Eg(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=Tu(t),i=sc.now(),o=e.reduce((function(t,e){return t.add(e.key)}),bh());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Ka.Va(t,o).next((function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=$l(c,n.get(c.key));null!=l&&s.push(new Xl(c.key,l,Fc(l.proto.mapValue),Bl.exists(!0)))}return r.Ra.Po(t,i,s,e)}))})).then((function(t){var e=t.rr(n);return{batchId:t.batchId,_r:e}}))}(r.Uh,e)];case 2:return i=a.sent(),r.$l.sh(i.batchId),function(t,e,n){var r=t.zl[t.currentUser.I()];r||(r=new sh(xu)),r=r.Ie(e,n),t.zl[t.currentUser.I()]=r}(r,i.batchId,n),[4,cg(r,i._r)];case 3:return a.sent(),[4,_y(r.Ml)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=Tf(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}function Yy(t,e){return Object(gu.b)(this,void 0,void 0,(function(){var n,r;return Object(gu.d)(this,(function(i){switch(i.label){case 0:n=Tu(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Op(n.Uh,e)];case 2:return r=i.sent(),e.rn.forEach((function(t,e){var r=n.jl.get(e);r&&(Ou(t._n.size+t.fn.size+t.dn.size<=1),t._n.size>0?r.kl=!0:t.fn.size>0?Ou(r.kl):t.dn.size>0&&(Ou(r.kl),r.kl=!1))})),[4,cg(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Lf(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Jy(t,e,n){var r=Tu(t);if(r.Xl&&0===n||!r.Xl&&1===n){var i=[];r.Ul.forEach((function(t,n){var r=n.view.cl(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=Tu(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].cl(e)&&(r=!0)})),r&&Ly(n)}(r.Ll,e),i.length&&r.ql.yi(i),r.onlineState=e,r.Xl&&r.$l.Eh(e)}}function Xy(t,e,n){return Object(gu.b)(this,void 0,void 0,(function(){var r,i,o,s,a,u;return Object(gu.d)(this,(function(c){switch(c.label){case 0:return(r=Tu(t)).$l.fh(e,"rejected",n),i=r.jl.get(e),(o=i&&i.key)?(s=(s=new sh(fc.At)).Ie(o,new Vc(o,ac.min())),a=bh().add(o),u=new Th(ac.min(),new Map,new ch(xu),s,a),[4,Yy(r,u)]):[3,2];case 1:return c.sent(),r.Wl=r.Wl.remove(o),r.jl.delete(e),ug(r),[3,4];case 2:return[4,xp(r.Uh,e,!1).then((function(){return ig(r,e,n)})).catch(Lf)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function Zy(t,e){return Object(gu.b)(this,void 0,void 0,(function(){var n,r,i;return Object(gu.d)(this,(function(o){switch(o.label){case 0:n=Tu(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Ep(n.Uh,e)];case 2:return i=o.sent(),rg(n,r,null),ng(n,r),n.$l.rh(r,"acknowledged"),[4,cg(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Lf(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function tg(t,e,n){return Object(gu.b)(this,void 0,void 0,(function(){var r,i;return Object(gu.d)(this,(function(o){switch(o.label){case 0:r=Tu(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Tu(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n.Ra.yo(t,e).next((function(e){return Ou(null!==e),r=e.keys(),n.Ra.No(t,e)})).next((function(){return n.Ra.ko(t)})).next((function(){return n.Ka.Va(t,r)}))}))}(r.Uh,e)];case 2:return i=o.sent(),rg(r,e,n),ng(r,e),r.$l.rh(e,"rejected",n),[4,cg(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Lf(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function eg(t,e){return Object(gu.b)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(gu.d)(this,(function(a){switch(a.label){case 0:dy((n=Tu(t)).Ml)||bu("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=Tu(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e.Ra.bo(t)}))}(n.Uh)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Hl.get(r)||[]).push(e),n.Hl.set(r,i),[3,4]);case 3:return o=a.sent(),s=Tf(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}}))}))}function ng(t,e){(t.Hl.get(e)||[]).forEach((function(t){t.resolve()})),t.Hl.delete(e)}function rg(t,e,n){var r=Tu(t),i=r.zl[r.currentUser.I()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.zl[r.currentUser.I()]=i}}function ig(t,e,n){void 0===n&&(n=null),t.$l.hh(e);for(var r=0,i=t.Ql.get(e);r<i.length;r++){var o=i[r];t.Ul.delete(o),n&&t.ql.t_(o,n)}t.Ql.delete(e),t.Xl&&t.Gl.cu(e).forEach((function(e){t.Gl.Mo(e)||og(t,e)}))}function og(t,e){var n=t.Wl.get(e);null!==n&&(uy(t.Ml,n),t.Wl=t.Wl.remove(e),t.jl.delete(n),ug(t))}function sg(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Vy?(t.Gl.sc(o.key,e),ag(t,o)):o instanceof qy?(bu("SyncEngine","Document no longer in limbo: "+o.key),t.Gl.rc(o.key,e),t.Gl.Mo(o.key)||og(t,o.key)):Cu()}}function ag(t,e){var n=e.key;t.Wl.get(n)||(bu("SyncEngine","New document in limbo: "+n),t.Kl.push(n),ug(t))}function ug(t){for(;t.Kl.length>0&&t.Wl.size<t.Bl;){var e=t.Kl.shift(),n=t.Jl.next();t.jl.set(n,new zy(e)),t.Wl=t.Wl.Ie(e,n),ay(t.Ml,new Tl(vl(ll(e.path)),n,2,Df.Zi))}}function cg(t,e,n){return Object(gu.b)(this,void 0,void 0,(function(){var r,i,o,s;return Object(gu.d)(this,(function(a){switch(a.label){case 0:return r=Tu(t),i=[],o=[],s=[],r.Ul.bt()?[3,3]:(r.Ul.forEach((function(t,a){s.push(r.Zl(a,e,n).then((function(t){if(t){r.Xl&&r.$l.fh(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=vp.Na(a.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return a.sent(),r.ql.yi(i),[4,function(t,e){return Object(gu.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c;return Object(gu.d)(this,(function(l){switch(l.label){case 0:n=Tu(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return pf.forEach(e,(function(e){return pf.forEach(e.Ca,(function(r){return n.persistence.Io.sc(t,e.targetId,r)})).next((function(){return pf.forEach(e.xa,(function(r){return n.persistence.Io.rc(t,e.targetId,r)}))}))}))}))];case 2:return l.sent(),[3,4];case 3:if(!bf(r=l.sent()))throw r;return bu("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Ba.get(a),c=u.ue(u.oe),n.Ba=n.Ba.Ie(a,c));return[2]}}))}))}(r.Uh,o)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function lg(t,e){return Object(gu.b)(this,void 0,void 0,(function(){var n,r;return Object(gu.d)(this,(function(i){switch(i.label){case 0:return(n=Tu(t)).currentUser.isEqual(e)?[3,3]:(bu("SyncEngine","User change. New user:",e.I()),[4,wp(n.Uh,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Hl.forEach((function(t){t.forEach((function(t){t.reject(new Ru(ku.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Hl.clear()}(n),n.$l.wh(e,r.ja,r.Ga),[4,cg(n,r.Wa)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function hg(t,e){var n=Tu(t),r=n.jl.get(e);if(r&&r.kl)return bh().add(r.key);var i=bh(),o=n.Ql.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Ul.get(a[s]);i=i.je(u.view.pl)}return i}function fg(t,e){return Object(gu.b)(this,void 0,void 0,(function(){var n,r,i;return Object(gu.d)(this,(function(o){switch(o.label){case 0:return[4,jp((n=Tu(t)).Uh,e.query,!0)];case 1:return r=o.sent(),i=e.view.Fl(r),[2,(n.Xl&&sg(n,e.targetId,i.xl),i)]}}))}))}function dg(t){return Object(gu.b)(this,void 0,void 0,(function(){var e;return Object(gu.d)(this,(function(n){return[2,Np((e=Tu(t)).Uh).then((function(t){return cg(e,t)}))]}))}))}function pg(t,e,n,r){return Object(gu.b)(this,void 0,void 0,(function(){var i,o;return Object(gu.d)(this,(function(s){switch(s.label){case 0:return[4,function(t,e){var n=Tu(t),r=Tu(n.Ra);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.Vo(t,e).next((function(e){return e?n.Ka.Va(t,e):pf.resolve(null)}))}))}((i=Tu(t)).Uh,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,_y(i.Ml)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(rg(i,e,r||null),ng(i,e),function(t,e){Tu(Tu(t).Ra).Fo(e)}(i.Uh,e)):Cu(),s.label=4;case 4:return[4,cg(i,o)];case 5:return s.sent(),[3,7];case 6:bu("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}}))}))}function yg(t,e){return Object(gu.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return Object(gu.d)(this,(function(c){switch(c.label){case 0:return wg(n=Tu(t)),Eg(n),!0!==e||!0===n.Yl?[3,3]:(r=n.$l.th(),[4,gg(n,r.Dt())]);case 1:return i=c.sent(),n.Yl=!0,[4,Sy(n.Ml,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)ay(n.Ml,s[o]);return[3,7];case 3:return!1!==e||!1===n.Yl?[3,7]:(a=[],u=Promise.resolve(),n.Ql.forEach((function(t,e){n.$l.lh(e)?a.push(e):u=u.then((function(){return ig(n,e),xp(n.Uh,e,!0)})),uy(n.Ml,e)})),[4,u]);case 4:return c.sent(),[4,gg(n,a)];case 5:return c.sent(),function(t){var e=Tu(t);e.jl.forEach((function(t,n){uy(e.Ml,n)})),e.Gl.au(),e.jl=new Map,e.Wl=new sh(fc.At)}(n),n.Yl=!1,[4,Sy(n.Ml,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}}))}))}function gg(t,e,n){return Object(gu.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,h,f,d,p;return Object(gu.d)(this,(function(y){switch(y.label){case 0:n=Tu(t),r=[],i=[],o=0,s=e,y.label=1;case 1:return o<s.length?(u=void 0,(c=n.Ql.get(a=s[o]))&&0!==c.length?[4,Sp(n.Uh,vl(c[0]))]:[3,7]):[3,13];case 2:u=y.sent(),l=0,h=c,y.label=3;case 3:return l<h.length?(f=n.Ul.get(h[l]),[4,fg(n,f)]):[3,6];case 4:(d=y.sent()).snapshot&&i.push(d.snapshot),y.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,Ap(n.Uh,a)];case 8:return p=y.sent(),[4,Sp(n.Uh,p)];case 9:return u=y.sent(),[4,Qy(n,vg(p),a,!1)];case 10:y.sent(),y.label=11;case 11:r.push(u),y.label=12;case 12:return o++,[3,1];case 13:return[2,(n.ql.yi(i),r)]}}))}))}function vg(t){return cl(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function mg(t){var e=Tu(t);return Tu(Tu(e.Uh).persistence).Ea()}function bg(t,e,n,r){return Object(gu.b)(this,void 0,void 0,(function(){var i,o,s;return Object(gu.d)(this,(function(a){switch(a.label){case 0:return(i=Tu(t)).Yl?(bu("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Ql.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Np(i.Uh)];case 3:return o=a.sent(),s=Th.un(e,"current"===n),[4,cg(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,xp(i.Uh,e,!0)];case 6:return a.sent(),ig(i,e,r),[3,8];case 7:Cu(),a.label=8;case 8:return[2]}}))}))}function _g(t,e,n){return Object(gu.b)(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,l,h;return Object(gu.d)(this,(function(f){switch(f.label){case 0:if(!(r=wg(t)).Yl)return[3,10];i=0,o=e,f.label=1;case 1:return i<o.length?r.Ql.has(s=o[i])?(bu("SyncEngine","Adding an already active target "+s),[3,5]):[4,Ap(r.Uh,s)]:[3,6];case 2:return a=f.sent(),[4,Sp(r.Uh,a)];case 3:return u=f.sent(),[4,Qy(r,vg(a),u.targetId,!1)];case 4:f.sent(),ay(r.Ml,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(gu.d)(this,(function(e){switch(e.label){case 0:return r.Ql.has(t)?[4,xp(r.Uh,t,!1).then((function(){uy(r.Ml,t),ig(r,t)})).catch(Lf)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))}function wg(t){var e=Tu(t);return e.Ml.Kh.Zh=Yy.bind(null,e),e.Ml.Kh.Xn=hg.bind(null,e),e.Ml.Kh.Xh=Xy.bind(null,e),e.ql.yi=Py.bind(null,e.Ll),e.ql.t_=Dy.bind(null,e.Ll),e}function Eg(t){var e=Tu(t);return e.Ml.Kh.tl=Zy.bind(null,e),e.Ml.Kh.el=tg.bind(null,e),e}var Cg=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(gu.b)(this,void 0,void 0,(function(){return Object(gu.d)(this,(function(e){switch(e.label){case 0:return this.fe=df(t.rt.O),this.$l=this.r_(t),this.persistence=this.o_(t),[4,this.persistence.start()];case 1:return e.sent(),this.c_=this.a_(t),this.Uh=this.u_(t),[2]}}))}))},t.prototype.a_=function(t){return null},t.prototype.u_=function(t){return _p(this.persistence,new mp,t.h_,this.fe)},t.prototype.o_=function(t){return new Hp(zp.Du,this.fe)},t.prototype.r_=function(t){return new ty},t.prototype.terminate=function(){return Object(gu.b)(this,void 0,void 0,(function(){return Object(gu.d)(this,(function(t){switch(t.label){case 0:return this.c_&&this.c_.stop(),[4,this.$l.$()];case 1:return t.sent(),[4,this.persistence.$()];case 2:return t.sent(),[2]}}))}))},t}(),Og=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).l_=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(gu.c)(e,t),e.prototype.initialize=function(e){return Object(gu.b)(this,void 0,void 0,(function(){return Object(gu.d)(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,kp(this.Uh)];case 2:return n.sent(),[4,this.l_.initialize(this,e)];case 3:return n.sent(),[4,Eg(this.l_.Lu)];case 4:return n.sent(),[4,_y(this.l_.Ml)];case 5:return n.sent(),[2]}}))}))},e.prototype.u_=function(t){return _p(this.persistence,new mp,t.h_,this.fe)},e.prototype.a_=function(t){return new zf(this.persistence.Io.vr,t.ks)},e.prototype.o_=function(t){var e=yp(t.rt.O,t.rt.persistenceKey),n=void 0!==this.cacheSizeBytes?Pf.Ki(this.cacheSizeBytes):Pf.Gi;return new fp(this.synchronizeTabs,e,t.clientId,n,t.ks,ey(),ny(),this.fe,this.$l,!!this.forceOwnership)},e.prototype.r_=function(t){return new ty},e}(Cg),Tg=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).l_=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(gu.c)(e,t),e.prototype.initialize=function(e){return Object(gu.b)(this,void 0,void 0,(function(){var n,r=this;return Object(gu.d)(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.l_.Lu,this.$l instanceof Zp?(this.$l.Lu={Sh:pg.bind(null,n),Dh:bg.bind(null,n),Ch:_g.bind(null,n),Ea:mg.bind(null,n),bh:dg.bind(null,n)},[4,this.$l.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.Yc((function(t){return Object(gu.b)(r,void 0,void 0,(function(){return Object(gu.d)(this,(function(e){switch(e.label){case 0:return[4,yg(this.l_.Lu,t)];case 1:return e.sent(),this.c_&&(t&&!this.c_.Nr?this.c_.start(this.Uh):t||this.c_.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.r_=function(t){var e=ey();if(!Zp.G(e))throw new Ru(ku.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=yp(t.rt.O,t.rt.persistenceKey);return new Zp(e,t.ks,n,t.clientId,t.h_)},e}(Og),Ig=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(gu.b)(this,void 0,void 0,(function(){var n=this;return Object(gu.d)(this,(function(r){switch(r.label){case 0:return this.Uh?[3,2]:(this.Uh=t.Uh,this.$l=t.$l,this.Qh=this.__(e),this.Ml=this.f_(e),this.Ll=this.d_(e),this.Lu=this.w_(e,!t.synchronizeTabs),this.$l.$u=function(t){return Jy(n.Lu,t,1)},this.Ml.Kh.E_=lg.bind(null,this.Lu),[4,Sy(this.Ml,this.Lu.Xl)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.d_=function(t){return new Ny},t.prototype.__=function(t){var e=df(t.rt.O),n=new oc(t.rt);return function(t,e,n){return new Af(t,e,n)}(t.credentials,n,e)},t.prototype.f_=function(t){var e,n,r,i,o,s=this;return e=this.Uh,n=this.Qh,r=t.ks,i=function(t){return Jy(s.Lu,t,0)},o=$u.G()?new $u:new Qu,new iy(e,n,r,i,o)},t.prototype.w_=function(t,e){return function(t,e,n,r,i,o,s){var a=new Wy(t,e,n,r,i,o);return s&&(a.Yl=!0),a}(this.Uh,this.Ml,this.Ll,this.$l,t.h_,t.Bl,e)},t.prototype.terminate=function(){return function(t){return Object(gu.b)(this,void 0,void 0,(function(){var e;return Object(gu.d)(this,(function(n){switch(n.label){case 0:return e=Tu(t),bu("RemoteStore","RemoteStore shutting down."),e.Gh.add(5),[4,sy(e)];case 1:return n.sent(),e.Hh.$(),e.Jh.set("Unknown"),[2]}}))}))}(this.Ml)},t}(),Sg=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.T_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.T_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.I_=function(){this.muted=!0},t.prototype.T_=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),xg=(function(){function t(t,e){var n=this;this.m_=t,this.fe=e,this.metadata=new ic,this.buffer=new Uint8Array,this.A_=new TextDecoder("utf-8"),this.R_().then((function(t){t&&t.Tl()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}t.prototype.close=function(){return this.m_.cancel()},t.prototype.getMetadata=function(){return Object(gu.b)(this,void 0,void 0,(function(){return Object(gu.d)(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.s_=function(){return Object(gu.b)(this,void 0,void 0,(function(){return Object(gu.d)(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.R_())]}}))}))},t.prototype.R_=function(){return Object(gu.b)(this,void 0,void 0,(function(){var t,e,n,r;return Object(gu.d)(this,(function(i){switch(i.label){case 0:return[4,this.P_()];case 1:return null===(t=i.sent())?[2,null]:(e=this.A_.decode(t),n=Number(e),isNaN(n)&&this.y_("length string ("+e+") is not valid number"),[4,this.g_(n)]);case 2:return r=i.sent(),[2,new My(JSON.parse(r),t.length+n)]}}))}))},t.prototype.V_=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.P_=function(){return Object(gu.b)(this,void 0,void 0,(function(){var t,e;return Object(gu.d)(this,(function(n){switch(n.label){case 0:return this.V_()<0?[4,this.p_()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.V_())<0&&this.y_("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.g_=function(t){return Object(gu.b)(this,void 0,void 0,(function(){var e;return Object(gu.d)(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.p_()]:[3,3];case 1:n.sent()&&this.y_("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.A_.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.y_=function(t){throw this.m_.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.p_=function(){return Object(gu.b)(this,void 0,void 0,(function(){var t,e;return Object(gu.d)(this,(function(n){switch(n.label){case 0:return[4,this.m_.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))}}(),function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Ru(ku.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.b_=new hc(t)}return t.prototype.isEqual=function(t){return this.b_.isEqual(t.b_)},t}()),jg=function(t){this._methodName=t},Ag=function(){function t(t,e,n){this.v_=e,this.S_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"D_",{get:function(){return this.S_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.Vt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.S_.path.Ct()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new kg(this.firestore,this.v_,this.S_.path.yt())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.S_)},t}(),Ng=function(){function t(t,e,n){this.v_=e,this.C_=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.C_)},t}(),kg=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,ll(r))||this).firestore=e,i.D_=r,i.type="collection",i}return Object(gu.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.C_.path.Vt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.C_.path.Ct()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.D_.yt();return t.bt()?null:new Ag(this.firestore,null,new fc(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this.D_)},e}(Ng);function Rg(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof Du&&(t=t._),Gf("collection","path",e),t instanceof nd)return Yf(n=cc.xt.apply(cc,Object(gu.g)([e],r))),new kg(t,null,n);if(!(t instanceof Ag||t instanceof kg))throw new Ru(ku.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Yf(n=cc.xt.apply(cc,Object(gu.g)([t.path],r)).child(cc.xt(e))),new kg(t.firestore,null,n)}function Pg(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof Du&&(t=t._),1===arguments.length&&(e=Su.t()),Gf("doc","path",e),t instanceof nd)return Kf(n=cc.xt.apply(cc,Object(gu.g)([e],r))),new Ag(t,null,new fc(n));if(!(t instanceof Ag||t instanceof kg))throw new Ru(ku.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Kf(n=t.D_.child(cc.xt.apply(cc,Object(gu.g)([e],r)))),new Ag(t.firestore,t instanceof kg?t.v_:null,new fc(n))}function Dg(t,e){return t instanceof Du&&(t=t._),e instanceof Du&&(e=e._),(t instanceof Ag||t instanceof kg)&&(e instanceof Ag||e instanceof kg)&&t.firestore===e.firestore&&t.path===e.path&&t.v_===e.v_}function Lg(t,e){return t instanceof Du&&(t=t._),e instanceof Du&&(e=e._),t instanceof Ng&&e instanceof Ng&&t.firestore===e.firestore&&bl(t.C_,e.C_)&&t.v_===e.v_}var Fg=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Ru(ku.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ru(ku.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.x_=t,this.N_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.x_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.N_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.x_===t.x_&&this.N_===t.N_},t.prototype.toJSON=function(){return{latitude:this.x_,longitude:this.N_}},t.prototype.dt=function(t){return xu(this.x_,t.x_)||xu(this.N_,t.N_)},t}(),Mg=/^__.*__$/,Ug=function(){function t(t,e,n){this.data=t,this.Te=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return null!==this.Te?new Xl(t,this.data,this.Te,e,this.fieldTransforms):new Jl(t,this.data,e,this.fieldTransforms)},t}(),Vg=function(){function t(t,e,n){this.data=t,this.Te=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return new Xl(t,this.data,this.Te,e,this.fieldTransforms)},t}();function qg(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Cu()}}var Hg=function(){function t(t,e,n,r,i,o){this.settings=t,this.O=e,this.fe=n,this.ignoreUndefinedProperties=r,void 0===i&&this.O_(),this.fieldTransforms=i||[],this.Te=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k_",{get:function(){return this.settings.k_},enumerable:!1,configurable:!0}),t.prototype.M_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.O,this.fe,this.ignoreUndefinedProperties,this.fieldTransforms,this.Te)},t.prototype.L_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.q_(t),r},t.prototype.U_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.O_(),r},t.prototype.Q_=function(t){return this.M_({path:void 0,B_:!0})},t.prototype.K_=function(t){return uv(t,this.settings.methodName,this.settings.W_||!1,this.path,this.settings.j_)},t.prototype.contains=function(t){return void 0!==this.Te.find((function(e){return t.vt(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.vt(e.field)}))},t.prototype.O_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.q_(this.path.get(t))},t.prototype.q_=function(t){if(0===t.length)throw this.K_("Document fields must not be empty");if(qg(this.k_)&&Mg.test(t))throw this.K_('Document fields cannot begin and end with "__"')},t}(),Bg=function(){function t(t,e,n){this.O=t,this.ignoreUndefinedProperties=e,this.fe=n||df(t)}return t.prototype.G_=function(t,e,n,r){return void 0===r&&(r=!1),new Hg({k_:t,methodName:e,j_:n,path:hc.Nt(),B_:!1,W_:r},this.O,this.fe,this.ignoreUndefinedProperties)},t}();function zg(t){var e=t.so(),n=df(t.zr);return new Bg(t.zr,!!e.ignoreUndefinedProperties,n)}function Wg(t,e,n,r,i,o){void 0===o&&(o={});var s=t.G_(o.merge||o.mergeFields?2:0,e,n,i);iv("Data must be an object, but it was:",s,r);var a,u,c=nv(r,s);if(o.merge)a=new gc(s.Te),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=ov(e,f[h],n);if(!s.contains(d))throw new Ru(ku.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");cv(l,d)||l.push(d)}a=new gc(l),u=s.fieldTransforms.filter((function(t){return a.Qt(t.field)}))}else a=null,u=s.fieldTransforms;return new Ug(new Dc(c),a,u)}var Gg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(gu.c)(e,t),e.prototype.z_=function(t){if(2!==t.k_)throw t.K_(1===t.k_?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.Te.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(jg);function Qg(t,e,n){return new Hg({k_:3,j_:e.settings.j_,methodName:t._methodName,B_:n},e.O,e.fe,e.ignoreUndefinedProperties)}var $g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(gu.c)(e,t),e.prototype.z_=function(t){return new ql(t.path,new Rl)},e.prototype.isEqual=function(t){return t instanceof e},e}(jg),Kg=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return Object(gu.c)(e,t),e.prototype.z_=function(t){var e=Qg(this,t,!0),n=this.H_.map((function(t){return ev(t,e)})),r=new Pl(n);return new ql(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(jg),Yg=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return Object(gu.c)(e,t),e.prototype.z_=function(t){var e=Qg(this,t,!0),n=this.H_.map((function(t){return ev(t,e)})),r=new Ll(n);return new ql(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(jg),Jg=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).J_=n,r}return Object(gu.c)(e,t),e.prototype.z_=function(t){var e=new Ml(t.fe,xl(t.fe,this.J_));return new ql(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(jg);function Xg(t,e,n,r){var i=t.G_(1,e,n);iv("Data must be an object, but it was:",i,r);var o=[],s=new Lc;pc(r,(function(t,r){var a=av(e,t,n);r instanceof Du&&(r=r._);var u=i.U_(a);if(r instanceof Gg)o.push(a);else{var c=ev(r,u);null!=c&&(o.push(a),s.set(a,c))}}));var a=new gc(o);return new Vg(s.Gt(),a,i.fieldTransforms)}function Zg(t,e,n,r,i,o){var s=t.G_(1,e,n),a=[ov(e,r,n)],u=[i];if(o.length%2!=0)throw new Ru(ku.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(ov(e,o[c])),u.push(o[c+1]);for(var l=[],h=new Lc,f=a.length-1;f>=0;--f)if(!cv(l,a[f])){var d=a[f],p=u[f];p instanceof Du&&(p=p._);var y=s.U_(d);if(p instanceof Gg)l.push(d);else{var g=ev(p,y);null!=g&&(l.push(d),h.set(d,g))}}var v=new gc(l);return new Vg(h.Gt(),v,s.fieldTransforms)}function tv(t,e,n,r){return void 0===r&&(r=!1),ev(n,t.G_(r?4:3,e))}function ev(t,e){if(t instanceof Du&&(t=t._),rv(t))return iv("Unsupported field value:",e,t),nv(t,e);if(t instanceof jg)return function(t,e){if(!qg(e.k_))throw e.K_(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.K_(t._methodName+"() is not currently supported inside arrays");var n=t.z_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.Te.push(e.path),t instanceof Array){if(e.settings.B_&&4!==e.k_)throw e.K_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=ev(o[i],e.Q_(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof Du&&(t=t._),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return xl(e.fe,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=sc.fromDate(t);return{timestampValue:Fh(e.fe,n)}}if(t instanceof sc)return n=new sc(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Fh(e.fe,n)};if(t instanceof Fg)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Pu)return{bytesValue:Mh(e.fe,t.l)};if(t instanceof Ag){var r=t.firestore.zr;if(!r.isEqual(n=e.O))throw e.K_("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:qh(t.firestore.zr||e.O,t.S_.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.K_("Unsupported field value: "+Jf(t))}(t,e)}function nv(t,e){var n={};return yc(t)?e.path&&e.path.length>0&&e.Te.push(e.path):pc(t,(function(t,r){var i=ev(r,e.L_(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function rv(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof sc||t instanceof Fg||t instanceof Pu||t instanceof Ag||t instanceof jg)}function iv(t,e,n){if(!rv(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Jf(n);throw e.K_("an object"===r?t+" a custom object":t+" "+r)}}function ov(t,e,n){if(e instanceof Du&&(e=e._),e instanceof xg)return e.b_;if("string"==typeof e)return av(t,e);throw uv("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var sv=new RegExp("[~\\*/\\[\\]]");function av(t,e,n){if(e.search(sv)>=0)throw uv("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(xg.bind.apply(xg,Object(gu.g)([void 0],e.split("."))))).b_}catch(r){throw uv("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function uv(t,e,n,r,i){var o=r&&!r.bt(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Ru(ku.INVALID_ARGUMENT,(a+=". ")+t+u)}function cv(t,e){return t.some((function(t){return t.isEqual(e)}))}var lv=function(){function t(t){this.Qh=t,this.Y_=new Map,this.mutations=[],this.X_=!1,this.Z_=null,this.tf=new Set}return t.prototype.ef=function(t){return Object(gu.b)(this,void 0,void 0,(function(){var e,n=this;return Object(gu.d)(this,(function(r){switch(r.label){case 0:if(this.nf(),this.mutations.length>0)throw new Ru(ku.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(gu.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a;return Object(gu.d)(this,(function(u){switch(u.label){case 0:return n=Tu(t),r=Qh(n.fe)+"/documents",i={documents:e.map((function(t){return Bh(n.fe,t)}))},[4,n._t("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){Ou(!!e.found);var n=zh(t,e.found.name),r=Vh(e.found.updateTime),i=new Dc({mapValue:{fields:e.found.fields}});return new Uc(n,r,i,{})}(t,e):"missing"in e?function(t,e){Ou(!!e.missing),Ou(!!e.readTime);var n=zh(t,e.missing),r=Vh(e.readTime);return new Vc(n,r)}(t,e):Cu()}(n.fe,t);s.set(e.key.toString(),e)})),a=[],[2,(e.forEach((function(t){var e=s.get(t.toString());Ou(!!e),a.push(e)})),a)]}}))}))}(this.Qh,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof Vc||t instanceof Uc?n.sf(t):Cu()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.F_(t,this.Ee(t))),this.tf.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.F_(t,this.rf(t)))}catch(t){this.Z_=t}this.tf.add(t.toString())},t.prototype.delete=function(t){this.write(new rh(t,this.Ee(t))),this.tf.add(t.toString())},t.prototype.commit=function(){return Object(gu.b)(this,void 0,void 0,(function(){var t,e=this;return Object(gu.d)(this,(function(n){switch(n.label){case 0:if(this.nf(),this.Z_)throw this.Z_;return t=this.Y_,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=fc.Lt(n);e.mutations.push(new ih(r,e.Ee(r)))})),[4,function(t,e){return Object(gu.b)(this,void 0,void 0,(function(){var n,r,i;return Object(gu.d)(this,(function(o){switch(o.label){case 0:return n=Tu(t),r=Qh(n.fe)+"/documents",i={writes:e.map((function(t){return Jh(n.fe,t)}))},[4,n.at("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.Qh,this.mutations)];case 1:return n.sent(),this.X_=!0,[2]}}))}))},t.prototype.sf=function(t){var e;if(t instanceof Uc)e=t.version;else{if(!(t instanceof Vc))throw Cu();e=ac.min()}var n=this.Y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Ru(ku.ABORTED,"Document version changed between two reads.")}else this.Y_.set(t.key.toString(),e)},t.prototype.Ee=function(t){var e=this.Y_.get(t.toString());return!this.tf.has(t.toString())&&e?Bl.updateTime(e):Bl.de()},t.prototype.rf=function(t){var e=this.Y_.get(t.toString());if(!this.tf.has(t.toString())&&e){if(e.isEqual(ac.min()))throw new Ru(ku.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Bl.updateTime(e)}return Bl.exists(!0)},t.prototype.write=function(t){this.nf(),this.mutations.push(t)},t.prototype.nf=function(){},t}(),hv=function(){function t(t,e,n,r){this.ks=t,this.Qh=e,this.updateFunction=n,this.Bs=r,this.cf=5,this.ui=new If(this.ks,"transaction_retry")}return t.prototype.run=function(){this.af()},t.prototype.af=function(){var t=this;this.ui.ti((function(){return Object(gu.b)(t,void 0,void 0,(function(){var t,e,n=this;return Object(gu.d)(this,(function(r){return t=new lv(this.Qh),(e=this.uf(t))&&e.then((function(e){n.ks.Ws((function(){return t.commit().then((function(){n.Bs.resolve(e)})).catch((function(t){n.hf(t)}))}))})).catch((function(t){n.hf(t)})),[2]}))}))}))},t.prototype.uf=function(t){try{var e=this.updateFunction(t);return!Ku(e)&&e.catch&&e.then?e:(this.Bs.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Bs.reject(t),null}},t.prototype.hf=function(t){var e=this;this.cf>0&&this.lf(t)?(this.cf-=1,this.ks.Ws((function(){return e.af(),Promise.resolve()}))):this.Bs.reject(t)},t.prototype.lf=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!ec(e)}return!1},t}(),fv=function(){function t(t,e,n){var r=this;this.credentials=t,this.ks=e,this.rt=n,this.user=Uu.UNAUTHENTICATED,this.clientId=Su.t(),this._f=function(){},this.S=new ic,this.credentials.V((function(t){bu("FirestoreClient","Received user=",t.uid),r.user.isEqual(t)||(r.user=t,r._f(t)),r.S.resolve()}))}return t.prototype.getConfiguration=function(){return Object(gu.b)(this,void 0,void 0,(function(){return Object(gu.d)(this,(function(t){switch(t.label){case 0:return[4,this.S.promise];case 1:return[2,(t.sent(),{ks:this.ks,rt:this.rt,clientId:this.clientId,credentials:this.credentials,h_:this.user,Bl:100})]}}))}))},t.prototype.ff=function(t){var e=this;this._f=t,this.S.promise.then((function(){return e._f(e.user)}))},t.prototype.df=function(){if(this.ks.wf)throw new Ru(ku.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.ks.Ef();var e=new ic;return this.ks.Tf((function(){return Object(gu.b)(t,void 0,void 0,(function(){var t,n;return Object(gu.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.If?[4,this.If.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.mf?[4,this.mf.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.p(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Tf(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();function dv(t,e){return Object(gu.b)(this,void 0,void 0,(function(){var n,r=this;return Object(gu.d)(this,(function(i){switch(i.label){case 0:return t.ks.Af(),bu("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=i.sent(),[4,e.initialize(n)];case 2:return i.sent(),t.ff((function(n){return t.ks.ea((function(){return Object(gu.b)(r,void 0,void 0,(function(){return Object(gu.d)(this,(function(t){switch(t.label){case 0:return[4,wp(e.Uh,n)];case 1:return t.sent(),[2]}}))}))}))})),e.persistence.Xc((function(){return t.terminate()})),t.mf=e,[2]}}))}))}function pv(t,e){return Object(gu.b)(this,void 0,void 0,(function(){var n,r;return Object(gu.d)(this,(function(i){switch(i.label){case 0:return t.ks.Af(),[4,yv(t)];case 1:return n=i.sent(),bu("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.ff((function(n){return t.ks.ea((function(){return function(t,e){return Object(gu.b)(this,void 0,void 0,(function(){var n,r;return Object(gu.d)(this,(function(i){switch(i.label){case 0:return(n=Tu(t)).ks.Af(),bu("RemoteStore","RemoteStore received new credentials"),r=dy(n),n.Gh.add(3),[4,sy(n)];case 1:return i.sent(),r&&n.Jh.set("Unknown"),[4,n.Kh.E_(e)];case 2:return i.sent(),n.Gh.delete(3),[4,oy(n)];case 3:return i.sent(),[2]}}))}))}(e.Ml,n)}))})),t.If=e,[2]}}))}))}function yv(t){return Object(gu.b)(this,void 0,void 0,(function(){return Object(gu.d)(this,(function(e){switch(e.label){case 0:return t.mf?[3,2]:(bu("FirestoreClient","Using default OfflineComponentProvider"),[4,dv(t,new Cg)]);case 1:e.sent(),e.label=2;case 2:return[2,t.mf]}}))}))}function gv(t){return Object(gu.b)(this,void 0,void 0,(function(){return Object(gu.d)(this,(function(e){switch(e.label){case 0:return t.If?[3,2]:(bu("FirestoreClient","Using default OnlineComponentProvider"),[4,pv(t,new Ig)]);case 1:e.sent(),e.label=2;case 2:return[2,t.If]}}))}))}function vv(t){return yv(t).then((function(t){return t.persistence}))}function mv(t){return yv(t).then((function(t){return t.Uh}))}function bv(t){return gv(t).then((function(t){return t.Ml}))}function _v(t){return gv(t).then((function(t){return t.Lu}))}function wv(t){return Object(gu.b)(this,void 0,void 0,(function(){var e,n;return Object(gu.d)(this,(function(r){switch(r.label){case 0:return[4,gv(t)];case 1:return e=r.sent(),[2,((n=e.Ll).ol=Gy.bind(null,e.Lu),n.ul=$y.bind(null,e.Lu),n)]}}))}))}function Ev(t,e,n){var r=this;void 0===n&&(n={});var i=new ic;return t.ks.Ws((function(){return Object(gu.b)(r,void 0,void 0,(function(){var r;return Object(gu.d)(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Sg({next:function(o){e.Ws((function(){return Ry(t,s)}));var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Ru(ku.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Ru(ku.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Fy(ll(n.path),o,{includeMetadataChanges:!0,El:!0});return ky(t,s)},[4,wv(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.ks,e,n,i])]}}))}))})),i.promise}function Cv(t,e,n){var r=this;void 0===n&&(n={});var i=new ic;return t.ks.Ws((function(){return Object(gu.b)(r,void 0,void 0,(function(){var r;return Object(gu.d)(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Sg({next:function(n){e.Ws((function(){return Ry(t,s)})),n.fromCache&&"server"===r.source?i.reject(new Ru(ku.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Fy(n,o,{includeMetadataChanges:!0,El:!0});return ky(t,s)},[4,wv(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.ks,e,n,i])]}}))}))})),i.promise}var Ov=function(){function t(){var t=this;this.Rf=Promise.resolve(),this.Pf=[],this.yf=!1,this.gf=[],this.Vf=null,this.pf=!1,this.bf=[],this.ui=new If(this,"async_queue_retry"),this.vf=function(){var e=ny();e&&bu("AsyncQueue","Visibility state changed to "+e.visibilityState),t.ui.si()};var e=ny();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.vf)}return Object.defineProperty(t.prototype,"wf",{get:function(){return this.yf},enumerable:!1,configurable:!0}),t.prototype.Ws=function(t){this.enqueue(t)},t.prototype.Tf=function(t){this.Sf(),this.Df(t)},t.prototype.Ef=function(){if(!this.yf){this.yf=!0;var t=ny();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.vf)}},t.prototype.enqueue=function(t){return this.Sf(),this.yf?new Promise((function(t){})):this.Df(t)},t.prototype.ea=function(t){var e=this;this.Ws((function(){return e.Pf.push(t),e.Cf()}))},t.prototype.Cf=function(){return Object(gu.b)(this,void 0,void 0,(function(){var t,e=this;return Object(gu.d)(this,(function(n){switch(n.label){case 0:if(0===this.Pf.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Pf[0]()];case 2:return n.sent(),this.Pf.shift(),this.ui.reset(),[3,4];case 3:if(!bf(t=n.sent()))throw t;return bu("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Pf.length>0&&this.ui.ti((function(){return e.Cf()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Df=function(t){var e=this,n=this.Rf.then((function(){return e.pf=!0,t().catch((function(t){throw e.Vf=t,e.pf=!1,_u("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.pf=!1,t}))}));return this.Rf=n,n},t.prototype.ni=function(t,e,n){var r=this;this.Sf(),this.bf.indexOf(t)>-1&&(e=0);var i=Of.qs(this,t,e,n,(function(t){return r.xf(t)}));return this.gf.push(i),i},t.prototype.Sf=function(){this.Vf&&Cu()},t.prototype.Af=function(){},t.prototype.Nf=function(){return Object(gu.b)(this,void 0,void 0,(function(){var t;return Object(gu.d)(this,(function(e){switch(e.label){case 0:return[4,t=this.Rf];case 1:e.sent(),e.label=2;case 2:if(t!==this.Rf)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Ff=function(t){for(var e=0,n=this.gf;e<n.length;e++)if(n[e].Ms===t)return!0;return!1},t.prototype.Of=function(t){var e=this;return this.Nf().then((function(){e.gf.sort((function(t,e){return t.Ls-e.Ls}));for(var n=0,r=e.gf;n<r.length;n++){var i=r[n];if(i.Ks(),"all"!==t&&i.Ms===t)break}return e.Nf()}))},t.prototype.kf=function(t){this.bf.push(t)},t.prototype.xf=function(t){var e=this.gf.indexOf(t);this.gf.splice(e,1)},t}(),Tv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Mf=new Ov,r.Wr="name"in e?e.name:"[DEFAULT]",r}return Object(gu.c)(e,t),e.prototype.io=function(){return this.Lf||Sv(this),this.Lf.terminate()},e}(nd);function Iv(t){return t.Lf||Sv(t),t.Lf.df(),t.Lf}function Sv(t){var e=t.so(),n=function(t,e,n){return new Wu(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.zr,t.Wr,e);t.Lf=new fv(t.Hr,t.Mf,n)}function xv(t,e,n){var r=this,i=new ic;return t.ks.enqueue((function(){return Object(gu.b)(r,void 0,void 0,(function(){var r;return Object(gu.d)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,dv(t,n)];case 1:return o.sent(),[4,pv(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===ku.FAILED_PRECONDITION||t.code===ku.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function jv(t){if(t.Yr||t.Xr)throw new Ru(ku.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Av=function(){function t(){}return t.prototype.$f=function(t,e){switch(void 0===e&&(e="none"),Cc(t)){case 0:return null;case 1:return t.booleanValue;case 2:return bc(t.integerValue||t.doubleValue);case 3:return this.Bf(t.timestampValue);case 4:return this.qf(t,e);case 5:return t.stringValue;case 6:return this.Uf(_c(t.bytesValue));case 7:return this.Qf(t.referenceValue);case 8:return this.Kf(t.geoPointValue);case 9:return this.Wf(t.arrayValue,e);case 10:return this.jf(t.mapValue,e);default:throw Cu()}},t.prototype.jf=function(t,e){var n=this,r={};return pc(t.fields||{},(function(t,i){r[t]=n.$f(i,e)})),r},t.prototype.Kf=function(t){return new Fg(bc(t.latitude),bc(t.longitude))},t.prototype.Wf=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.$f(t,e)}))},t.prototype.qf=function(t,e){switch(e){case"previous":var n=function t(e){var n=e.mapValue.fields.__previous_value__;return wc(n)?t(n):n}(t);return null==n?null:this.$f(n,e);case"estimate":return this.Bf(Ec(t));default:return null}},t.prototype.Bf=function(t){var e=mc(t);return new sc(e.seconds,e.nanos)},t.prototype.Gf=function(t,e){var n=cc.xt(t);Ou(ff(n));var r=new Gu(n.get(1),n.get(3)),i=new fc(n.Pt(5));return r.isEqual(e)||_u("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),Nv=function(){function t(t,e,n,r,i){this.zf=t,this.Hf=e,this.S_=n,this.Jf=r,this.v_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.Vt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Ag(this.zf,this.v_,this.S_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.Jf},t.prototype.data=function(){if(this.Jf){if(this.v_){var t=new kv(this.zf,this.Hf,this.S_,this.Jf,null);return this.v_.fromFirestore(t)}return this.Hf.$f(this.Jf.Yt())}},t.prototype.get=function(t){if(this.Jf){var e=this.Jf.data().field(Rv("DocumentSnapshot.get",t));if(null!==e)return this.Hf.$f(e)}},t}(),kv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(gu.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Nv);function Rv(t,e){return"string"==typeof e?av(t,e):e instanceof Du?e._.b_:e.b_}function Pv(t){if(fl(t)&&0===t.ne.length)throw new Ru(ku.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Dv=function(){};function Lv(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o.Yf(t)}return t}var Fv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Xf=e,i.Zf=n,i.td=r,i.type="where",i}return Object(gu.c)(e,t),e.prototype.Yf=function(t){var e=zg(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.Ot()){if("array-contains"===o||"array-contains-any"===o)throw new Ru(ku.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){zv(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(Bv(r,t,l[c]));a={arrayValue:{values:u}}}else a=Bv(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||zv(s,o),a=tv(n,"where",s,"in"===o||"not-in"===o);var h=Qc.create(i,o,a);return function(t,e){if(e.ee()){var n=pl(t);if(null!==n&&!n.isEqual(e.field))throw new Ru(ku.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=dl(t);null!==r&&Wv(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new Ru(ku.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t.C_,0,e,t.firestore.zr,this.Xf,this.Zf,this.td);return new Ng(t.firestore,t.v_,function(t,e){var n=t.filters.concat([e]);return new ul(t.path,t.collectionGroup,t.ne.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,n))},e}(Dv),Mv=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Xf=e,r.ed=n,r.type="orderBy",r}return Object(gu.c)(e,t),e.prototype.Yf=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Ru(ku.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Ru(ku.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new il(e,n);return function(t,e){if(null===dl(t)){var n=pl(t);null!==n&&Wv(0,n,e.field)}}(t,r),r}(t.C_,this.Xf,this.ed);return new Ng(t.firestore,t.v_,function(t,e){var n=t.ne.concat([e]);return new ul(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,e))},e}(Dv),Uv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.nd=n,i.sd=r,i}return Object(gu.c)(e,t),e.prototype.Yf=function(t){return new Ng(t.firestore,t.v_,ml(t.C_,this.nd,this.sd))},e}(Dv),Vv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.rd=n,i.od=r,i}return Object(gu.c)(e,t),e.prototype.Yf=function(t){var e=Hv(t,this.type,this.rd,this.od);return new Ng(t.firestore,t.v_,function(t,e){return new ul(t.path,t.collectionGroup,t.ne.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t.C_,e))},e}(Dv),qv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.rd=n,i.od=r,i}return Object(gu.c)(e,t),e.prototype.Yf=function(t){var e=Hv(t,this.type,this.rd,this.od);return new Ng(t.firestore,t.v_,function(t,e){return new ul(t.path,t.collectionGroup,t.ne.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t.C_,e))},e}(Dv);function Hv(t,e,n,r){if(n[0]instanceof Du&&(n[0]=n[0]._),n[0]instanceof Nv)return function(t,e,n,r,i){if(!r)throw new Ru(ku.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=gl(t);s<a.length;s++){var u=a[s];if(u.field.Ot())o.push(jc(e,r.key));else{var c=r.field(u.field);if(wc(c))throw new Ru(ku.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.Ct();throw new Ru(ku.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new nl(o,i)}(t.C_,t.firestore.zr,e,n[0].Jf,r);var i=zg(t.firestore);return function(t,e,n,r,i,o){var s=t.ne;if(i.length>s.length)throw new Ru(ku.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.Ot()){if("string"!=typeof c)throw new Ru(ku.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!yl(t)&&-1!==c.indexOf("/"))throw new Ru(ku.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(cc.xt(c));if(!fc.qt(l))throw new Ru(ku.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new fc(l);a.push(jc(e,h))}else{var f=tv(n,r,c);a.push(f)}}return new nl(a,o)}(t.C_,t.firestore.zr,i,e,n,r)}function Bv(t,e,n){if(n instanceof Du&&(n=n._),"string"==typeof n){if(""===n)throw new Ru(ku.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!yl(e)&&-1!==n.indexOf("/"))throw new Ru(ku.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(cc.xt(n));if(!fc.qt(r))throw new Ru(ku.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return jc(t,new fc(r))}if(n instanceof Ag)return jc(t,n.S_);throw new Ru(ku.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Jf(n)+".")}function zv(t,e){if(!Array.isArray(t)||0===t.length)throw new Ru(ku.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Ru(ku.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Wv(t,e,n){if(!n.isEqual(e))throw new Ru(ku.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function Gv(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Qv=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(gu.c)(e,t),e.prototype.Uf=function(t){return new Pu(t)},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.zr);return new Ag(this.firestore,null,e)},e}(Av);function $v(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Kv=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Yv=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this).zf=e,a.ad=e,a.metadata=o,a}return Object(gu.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this.Jf){if(this.v_){var e=new Jv(this.zf,this.Hf,this.S_,this.Jf,this.metadata,null);return this.v_.fromFirestore(e,t)}return this.Hf.$f(this.Jf.Yt(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this.Jf){var n=this.Jf.data().field(Rv("DocumentSnapshot.get",t));if(null!==n)return this.Hf.$f(n,e.serverTimestamps)}},e}(Nv),Jv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(gu.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Yv),Xv=function(){function t(t,e,n,r){this.zf=t,this.Hf=e,this.ud=r,this.metadata=new Kv(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.ud.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this.ud.docs.forEach((function(r){t.call(e,new Jv(n.zf,n.Hf,r.key,r,new Kv(n.ud.tn.has(r.key),n.ud.fromCache),n.query.v_))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this.ud.nn)throw new Ru(ku.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.hd&&this.ld===e||(this.hd=function(t,e){if(t.ud.Ze.bt()){var n=0;return t.ud.docChanges.map((function(e){return{type:"added",doc:new Jv(t.zf,t.Hf,e.doc.key,e.doc,new Kv(t.ud.tn.has(e.doc.key),t.ud.fromCache),t.query.v_),oldIndex:-1,newIndex:n++}}))}var r=t.ud.Ze;return t.ud.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new Jv(t.zf,t.Hf,e.doc.key,e.doc,new Kv(t.ud.tn.has(e.doc.key),t.ud.fromCache),t.query.v_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Zv(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this.ld=e),this.hd},t}();function Zv(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Cu()}}function tm(t,e){return t instanceof Yv&&e instanceof Yv?t.zf===e.zf&&t.S_.isEqual(e.S_)&&(null===t.Jf?null===e.Jf:t.Jf.isEqual(e.Jf))&&t.v_===e.v_:t instanceof Xv&&e instanceof Xv&&t.zf===e.zf&&Lg(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t.ud.isEqual(e.ud)}var em=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(gu.c)(e,t),e.prototype.Uf=function(t){return new Pu(t)},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.zr);return new Ag(this.firestore,null,e)},e}(Av);function nm(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Xf(t,Ag);var o=Xf(t.firestore,Tv),s=zg(o);return e instanceof Du&&(e=e._),im(o,[("string"==typeof e||e instanceof xg?Zg(s,"updateDoc",t.S_,e,n,r):Xg(s,"updateDoc",t.S_,e)).F_(t.S_,Bl.exists(!0))])}function rm(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof Du&&(t=t._);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||$v(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if($v(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof Ag)c=Xf(t.firestore,Tv),l=ll(t.S_.path),u={next:function(e){i[a]&&i[a](om(c,t,e))},error:i[a+1],complete:i[a+2]};else{var d=Xf(t,Ng);c=Xf(d.firestore,Tv),l=d.C_;var p=new em(c);u={next:function(t){i[a]&&i[a](new Xv(c,p,d,t))},error:i[a+1],complete:i[a+2]},Pv(t.C_)}return function(t,e,n,r){var i=this,o=new Sg(r),s=new Fy(e,o,n);return t.ks.Ws((function(){return Object(gu.b)(i,void 0,void 0,(function(){var e;return Object(gu.d)(this,(function(n){switch(n.label){case 0:return e=ky,[4,wv(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){o.I_(),t.ks.Ws((function(){return Object(gu.b)(i,void 0,void 0,(function(){var e;return Object(gu.d)(this,(function(n){switch(n.label){case 0:return e=Ry,[4,wv(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(Iv(c),l,h,u)}function im(t,e){return function(t,e){var n=this,r=new ic;return t.ks.Ws((function(){return Object(gu.b)(n,void 0,void 0,(function(){var n;return Object(gu.d)(this,(function(i){switch(i.label){case 0:return n=Ky,[4,_v(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(Iv(t),e)}function om(t,e,n){var r=n.docs.get(e.S_),i=new em(t);return new Yv(t,i,e.S_,r,new Kv(n.hasPendingWrites,n.fromCache),e.v_)}var sm=function(){function t(t,e){this.zf=t,this._d=e,this.fd=[],this.dd=!1,this.wd=zg(t)}return t.prototype.set=function(t,e,n){this.Ed();var r=am(t,this.zf),i=Gv(r.v_,e,n),o=Wg(this.wd,"WriteBatch.set",r.S_,i,null!==r.v_,n);return this.fd.push(o.F_(r.S_,Bl.de())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.Ed();var o,s=am(t,this.zf);return e instanceof Du&&(e=e._),o="string"==typeof e||e instanceof xg?Zg(this.wd,"WriteBatch.update",s.S_,e,n,r):Xg(this.wd,"WriteBatch.update",s.S_,e),this.fd.push(o.F_(s.S_,Bl.exists(!0))),this},t.prototype.delete=function(t){this.Ed();var e=am(t,this.zf);return this.fd=this.fd.concat(new rh(e.S_,Bl.de())),this},t.prototype.commit=function(){return this.Ed(),this.dd=!0,this.fd.length>0?this._d(this.fd):Promise.resolve()},t.prototype.Ed=function(){if(this.dd)throw new Ru(ku.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function am(t,e){if(t instanceof Du&&(t=t._),t.firestore!==e)throw new Ru(ku.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var um=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).zf=e,r}return Object(gu.c)(e,t),e.prototype.get=function(e){var n=this,r=am(e,this.zf),i=new em(this.zf);return t.prototype.get.call(this,e).then((function(t){return new Yv(n.zf,i,r.S_,t.Jf,new Kv(!1,!1),r.v_)}))},e}(function(){function t(t,e){this.zf=t,this.Td=e,this.wd=zg(t)}return t.prototype.get=function(t){var e=this,n=am(t,this.zf),r=new Qv(this.zf);return this.Td.ef([n.S_]).then((function(t){if(!t||1!==t.length)return Cu();var i=t[0];if(i instanceof Vc)return new Nv(e.zf,r,n.S_,null,n.v_);if(i instanceof Uc)return new Nv(e.zf,r,i.key,i,n.v_);throw Cu()}))},t.prototype.set=function(t,e,n){var r=am(t,this.zf),i=Gv(r.v_,e,n),o=Wg(this.wd,"Transaction.set",r.S_,i,null!==r.v_,n);return this.Td.set(r.S_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=am(t,this.zf);return e instanceof Du&&(e=e._),o="string"==typeof e||e instanceof xg?Zg(this.wd,"Transaction.update",s.S_,e,n,r):Xg(this.wd,"Transaction.update",s.S_,e),this.Td.update(s.S_,o),this},t.prototype.delete=function(t){var e=am(t,this.zf);return this.Td.delete(e.S_),this},t}()),cm=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){jv(t=Xf(t,Tv));var n=Iv(t),r=t.so(),i=new Ig;return xv(n,i,new Og(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){jv(t=Xf(t,Tv));var e=Iv(t),n=t.so(),r=new Ig;return xv(e,r,new Tg(r,n.cacheSizeBytes))}(t._)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t.Yr&&!t.Xr)throw new Ru(ku.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new ic;return t.Mf.Tf((function(){return Object(gu.b)(e,void 0,void 0,(function(){var e;return Object(gu.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(gu.b)(this,void 0,void 0,(function(){return Object(gu.d)(this,(function(e){switch(e.label){case 0:return gf.G()?[4,gf.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}}))}))}(yp(t.zr,t.Wr))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._)},t}(),lm=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).Id=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof Gu||(i.md=e),i}return Object(gu.c)(e,t),Object.defineProperty(e.prototype,"zr",{get:function(){return this._.zr},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._.no()),t)).merge,this._.eo(t)},e.prototype.useEmulator=function(t,e){"firestore.googleapis.com"!==this._.no().host&&wu("Host has been set in both settings() and useEmulator(), emulator host will be used"),this.settings({host:t+":"+e,ssl:!1,merge:!0})},e.prototype.enableNetwork=function(){return function(t){var e=this;return t.ks.enqueue((function(){return Object(gu.b)(e,void 0,void 0,(function(){var e,n;return Object(gu.d)(this,(function(r){switch(r.label){case 0:return[4,vv(t)];case 1:return e=r.sent(),[4,bv(t)];case 2:return n=r.sent(),[2,(e.Zc(!0),function(t){var e=Tu(t);return e.Gh.delete(0),oy(e)}(n))]}}))}))}))}(Iv(Xf(this._,Tv)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t.ks.enqueue((function(){return Object(gu.b)(e,void 0,void 0,(function(){var e,n;return Object(gu.d)(this,(function(r){switch(r.label){case 0:return[4,vv(t)];case 1:return e=r.sent(),[4,bv(t)];case 2:return n=r.sent(),[2,(e.Zc(!1),function(t){return Object(gu.b)(this,void 0,void 0,(function(){var e;return Object(gu.d)(this,(function(n){switch(n.label){case 0:return(e=Tu(t)).Gh.add(0),[4,sy(e)];case 1:return n.sent(),e.Jh.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(Iv(Xf(this._,Tv)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&$f("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Id.enableMultiTabIndexedDbPersistence(this):this.Id.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Id.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.app._removeServiceInstance("firestore-exp"),this._._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new ic;return t.ks.Ws((function(){return Object(gu.b)(e,void 0,void 0,(function(){var e;return Object(gu.d)(this,(function(r){switch(r.label){case 0:return e=eg,[4,_v(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(Iv(Xf(this._,Tv)))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Sg(e);return t.ks.Ws((function(){return Object(gu.b)(n,void 0,void 0,(function(){var e;return Object(gu.d)(this,(function(n){switch(n.label){case 0:return e=function(t,e){Tu(t).rl.add(e),e.next()},[4,wv(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.I_(),t.ks.Ws((function(){return Object(gu.b)(n,void 0,void 0,(function(){var e;return Object(gu.d)(this,(function(n){switch(n.label){case 0:return e=function(t,e){Tu(t).rl.delete(e)},[4,wv(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(Iv(t=Xf(t,Tv)),$v(e)?e:{next:e})}(this._,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.md)throw new Ru(ku.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.md},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Cm(this,Rg(this._,t))}catch(t){throw ym(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new pm(this,Pg(this._,t))}catch(t){throw ym(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new _m(this,function(t,e){if(t=Xf(t,nd),Gf("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ru(ku.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Ng(t,null,function(t){return new ul(cc.Nt(),t)}(e))}(this._,t))}catch(t){throw ym(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new ic;return t.ks.Ws((function(){return Object(gu.b)(n,void 0,void 0,(function(){var n;return Object(gu.d)(this,(function(i){switch(i.label){case 0:return[4,function(t){return gv(t).then((function(t){return t.Qh}))}(t)];case 1:return n=i.sent(),new hv(t.ks,n,e,r).run(),[2]}}))}))})),r.promise}(Iv(t),(function(n){return e(new um(t,n))}))}(this._,(function(n){return t(new fm(e,n))}))},e.prototype.batch=function(){var t=this;return Iv(this._),new dm(new sm(this._,(function(e){return im(t._,e)})))},e.prototype.loadBundle=function(t){throw new Ru(ku.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new Ru(ku.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(Du),hm=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(gu.c)(e,t),e.prototype.Uf=function(t){return new Mu(new Pu(t))},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.zr);return pm.Ad(e,this.firestore,null)},e}(Av),fm=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return Object(gu.c)(e,t),e.prototype.get=function(t){var e=this,n=Om(t);return this._.get(n).then((function(t){return new mm(e.zf,t)}))},e.prototype.set=function(t,e,n){var r=Om(t);return n?(Qf("Transaction.set",n),this._.set(r,e,n)):this._.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Om(t);return 2===arguments.length?this._.update(s,e):(r=this._).update.apply(r,Object(gu.g)([s,e,n],i)),this},e.prototype.delete=function(t){var e=Om(t);return this._.delete(e),this},e}(Du),dm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(gu.c)(e,t),e.prototype.set=function(t,e,n){var r=Om(t);return n?(Qf("WriteBatch.set",n),this._.set(r,e,n)):this._.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Om(t);return 2===arguments.length?this._.update(s,e):(r=this._).update.apply(r,Object(gu.g)([s,e,n],i)),this},e.prototype.delete=function(t){var e=Om(t);return this._.delete(e),this},e.prototype.commit=function(){return this._.commit()},e}(Du),pm=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Hf=new hm(e),r}return Object(gu.c)(e,t),e.Rd=function(t,n,r){if(t.length%2!=0)throw new Ru(ku.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.Ct()+" has "+t.length);return new e(n,new Ag(n._,r,new fc(t)))},e.Ad=function(t,n,r){return new e(n,new Ag(n._,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Cm(this.firestore,this._.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Cm(this.firestore,Rg(this._,t))}catch(t){throw ym(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof Du&&(t=t._),t instanceof Ag&&Dg(this._,t)},e.prototype.set=function(t,e){e=Qf("DocumentReference.set",e);try{return function(t,e,n){t=Xf(t,Ag);var r=Xf(t.firestore,Tv),i=Gv(t.v_,e,n);return im(r,[Wg(zg(r),"setDoc",t.S_,i,null!==t.v_,n).F_(t.S_,Bl.de())])}(this._,t,e)}catch(t){throw ym(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?nm(this._,t):nm.apply(void 0,Object(gu.g)([this._,t,e],n))}catch(t){throw ym(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return im(Xf((t=this._).firestore,Tv),[new rh(t.S_,Bl.de())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=gm(e),i=vm(e,(function(e){return new mm(t.firestore,new Yv(t.firestore._,t.Hf,e.S_,e.Jf,e.metadata,t._.v_))}));return rm(this._,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Xf(t,Ag);var e=Xf(t.firestore,Tv),n=Iv(e),r=new em(e);return function(t,e){var n=this,r=new ic;return t.ks.Ws((function(){return Object(gu.b)(n,void 0,void 0,(function(){var n;return Object(gu.d)(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(gu.b)(this,void 0,void 0,(function(){var r,i;return Object(gu.d)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Tu(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Ka.Pa(t,e)}))}(t,e)];case 1:return(i=o.sent())instanceof Uc?n.resolve(i):i instanceof Vc?n.resolve(null):n.reject(new Ru(ku.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Tf(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,mv(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t.S_).then((function(n){return new Yv(e,r,t.S_,n,new Kv(n instanceof Uc&&n.Jt,!0),t.v_)}))}(this._):"server"===(null==t?void 0:t.source)?function(t){t=Xf(t,Ag);var e=Xf(t.firestore,Tv);return Ev(Iv(e),t.S_,{source:"server"}).then((function(n){return om(e,t,n)}))}(this._):function(t){t=Xf(t,Ag);var e=Xf(t.firestore,Tv);return Ev(Iv(e),t.S_).then((function(n){return om(e,t,n)}))}(this._)).then((function(t){return new mm(e.firestore,new Yv(e.firestore._,e.Hf,t.S_,t.Jf,t.metadata,e._.v_))}))},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(t))},e}(Du);function ym(t,e,n){return t.message=t.message.replace(e,n),t}function gm(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!$v(r))return r}return{}}function vm(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=$v(t[0])?t[0]:$v(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var mm=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return Object(gu.c)(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new pm(this.zf,this._.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this._.data(t)},e.prototype.get=function(t,e){return this._.get(t,e)},e.prototype.isEqual=function(t){return tm(this._,t._)},e}(Du),bm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(gu.c)(e,t),e.prototype.data=function(t){return this._.data(t)},e}(mm),_m=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Hf=new hm(e),r}return Object(gu.c)(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,Lv(this._,function(t,e,n){var r=e,i=Rv("where",t);return new Fv(i,r,n)}(t,n,r)))}catch(t){throw ym(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,Lv(this._,function(t,e){void 0===e&&(e="asc");var n=e,r=Rv("orderBy",t);return new Mv(r,n)}(t,n)))}catch(t){throw ym(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,Lv(this._,function(t){return Zf("limit",t),new Uv("limit",t,"F")}(t)))}catch(t){throw ym(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,Lv(this._,function(t){return Zf("limitToLast",t),new Uv("limitToLast",t,"L")}(t)))}catch(t){throw ym(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Lv(this._,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Vv("startAt",t,!0)}).apply(void 0,t)))}catch(t){throw ym(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Lv(this._,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Vv("startAfter",t,!1)}).apply(void 0,t)))}catch(t){throw ym(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Lv(this._,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new qv("endBefore",t,!0)}).apply(void 0,t)))}catch(t){throw ym(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Lv(this._,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new qv("endAt",t,!1)}).apply(void 0,t)))}catch(t){throw ym(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return Lg(this._,t._)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Xf(t,Ng);var e=Xf(t.firestore,Tv),n=Iv(e),r=new em(e);return function(t,e){var n=this,r=new ic;return t.ks.Ws((function(){return Object(gu.b)(n,void 0,void 0,(function(){var n;return Object(gu.d)(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(gu.b)(this,void 0,void 0,(function(){var r,i,o,s,a;return Object(gu.d)(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,jp(t,e,!0)];case 1:return a=u.sent(),r=new Hy(e,a.za),i=r.bl(a.documents),o=r.yr(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=Tf(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}}))}))},[4,mv(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t.C_).then((function(n){return new Xv(e,r,t,n)}))}(this._):"server"===(null==t?void 0:t.source)?function(t){t=Xf(t,Ng);var e=Xf(t.firestore,Tv),n=Iv(e),r=new em(e);return Cv(n,t.C_,{source:"server"}).then((function(n){return new Xv(e,r,t,n)}))}(this._):function(t){t=Xf(t,Ng);var e=Xf(t.firestore,Tv),n=Iv(e),r=new em(e);return Pv(t.C_),Cv(n,t.C_).then((function(n){return new Xv(e,r,t,n)}))}(this._)).then((function(t){return new Em(e.firestore,new Xv(e.firestore._,e.Hf,e._,t.ud))}))},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=gm(e),i=vm(e,(function(e){return new Em(t.firestore,new Xv(t.firestore._,t.Hf,t._,e.ud))}));return rm(this._,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(t))},e}(Du),wm=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return Object(gu.c)(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new bm(this.zf,this._.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._.newIndex},enumerable:!1,configurable:!0}),e}(Du),Em=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return Object(gu.c)(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new _m(this.zf,this._.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this._.docs.map((function(e){return new bm(t.zf,e)}))},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this._.docChanges(t).map((function(t){return new wm(e.zf,t)}))},e.prototype.forEach=function(t,e){var n=this;this._.forEach((function(r){t.call(e,new bm(n.zf,r))}))},e.prototype.isEqual=function(t){return tm(this._,t._)},e}(Du),Cm=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._=n,r}return Object(gu.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._.parent;return t?new pm(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new pm(this.firestore,void 0===t?Pg(this._):Pg(this._,t))}catch(t){throw ym(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Xf(t.firestore,Tv),r=Pg(t),i=Gv(t.v_,e);return im(n,[Wg(zg(t.firestore),"addDoc",r.S_,i,null!==t.v_,{}).F_(r.S_,Bl.exists(!1))]).then((function(){return r}))}(this._,t).then((function(t){return new pm(e.firestore,t)}))},e.prototype.isEqual=function(t){return Dg(this._,t._)},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(t))},e}(_m);function Om(t){return t instanceof Du&&(t=t._),Xf(t,Ag)}var Tm=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(xg.bind.apply(xg,Object(gu.g)([void 0],e))))||this}return Object(gu.c)(e,t),e.documentId=function(){return new e(hc.kt().Ct())},e.prototype.isEqual=function(t){return t instanceof Du&&(t=t._),t instanceof xg&&this._.b_.isEqual(t.b_)},e}(Du),Im=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(gu.c)(e,t),e.serverTimestamp=function(){var t=new $g("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new Gg("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Kg("arrayUnion",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Yg("arrayRemove",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new Jg("increment",t)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this._.isEqual(t._)},e}(Du);!function(){function t(){this.Pd={},this.yd=new ic,this.gd={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this.Pd={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this.yd.promise.catch(t)},t.prototype.then=function(t,e){return this.yd.promise.then(t,e)},t.prototype.e_=function(t){this.n_(t),this.Pd.complete&&this.Pd.complete(),this.yd.resolve(t)},t.prototype.i_=function(t){this.gd.taskState="Error",this.Pd.next&&this.Pd.next(this.gd),this.Pd.error&&this.Pd.error(t),this.yd.reject(t)},t.prototype.n_=function(t){this.gd=t,this.Pd.next&&this.Pd.next(t)}}();var Sm,xm=n("/6Yf"),jm={Firestore:lm,GeoPoint:Fg,Timestamp:sc,Blob:Mu,Transaction:fm,WriteBatch:dm,DocumentReference:pm,DocumentSnapshot:mm,Query:_m,QueryDocumentSnapshot:bm,QuerySnapshot:Em,CollectionReference:Cm,FieldPath:Tm,FieldValue:Im,setLogLevel:function(t){vu.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new xm.a("firestore",(function(t){return function(t,e){return new lm(t,new Tv(t,e),new cm)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},jm)))})(Sm=di.a),Sm.registerVersion("@firebase/firestore","2.1.0");var Am=n("VRyK");n("qgXg"),n("Ylt2"),n("tf+s");const Nm=new r.q("angularfire2.auth.use-emulator");function km(t,e){return function(t,e=ii.a){return new _t.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function Rm(t,e){return km(t,e).pipe(Object(jt.a)(t=>({payload:t,type:"query"})))}function Pm(t,e){return Rm(t,e).pipe(ee(void 0),oi(),Object(jt.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function Dm(t,e,n){return Pm(t,n).pipe(ne((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return Lm(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return Lm(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Lm(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),ui(),Object(jt.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function Lm(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function Fm(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}class Mm{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=Pm(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(jt.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(ee(void 0),oi(),kt(([t,e])=>e.length>0||!t),Object(jt.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(ne((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Fm(t);return Dm(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Rm(this.query,this.afs.schedulers.outsideAngular).pipe(Object(jt.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(lt.a)(this.query.get(t)).pipe(Object(hi.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new Um(this.ref.doc(t),this.afs)}}class Um{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=Wm(n,e);return new Mm(r,i,this.afs)}snapshotChanges(){return km(this.ref,this.afs.schedulers.outsideAngular).pipe(ee(void 0),oi(),Object(jt.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(jt.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(lt.a)(this.ref.get(t)).pipe(Object(hi.b)(this.afs.schedulers.insideAngular))}}class Vm{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?Pm(this.query,this.afs.schedulers.outsideAngular).pipe(Object(jt.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),kt(t=>t.length>0),this.afs.keepUnstableUntilFirst):Pm(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(ne((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Fm(t);return Dm(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Rm(this.query,this.afs.schedulers.outsideAngular).pipe(Object(jt.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(lt.a)(this.query.get(t)).pipe(Object(hi.b)(this.afs.schedulers.insideAngular))}}const qm=new r.q("angularfire2.enableFirestorePersistence"),Hm=new r.q("angularfire2.firestore.persistenceSettings"),Bm=new r.q("angularfire2.firestore.settings"),zm=new r.q("angularfire2.firestore.use-emulator");function Wm(t,e=(t=>t)){return{query:e(t),ref:t}}let Gm=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new ri.d(o),this.keepUnstableUntilFirst=Object(ri.h)(this.schedulers);const c=Object(ri.g)(t,o,e);!fi.a.auth&&u&&Object(ri.j)();const l=a;[this.firestore,this.persistenceEnabled$]=Object(ri.f)(c.name+".firestore","AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!function(t){return"server"===t}(i)){const e=()=>{try{return Object(lt.a)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(Sm){return"undefined"!=typeof console&&console.warn(Sm),Object(ct.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(ct.a)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=Wm(n,e),o=this.schedulers.ngZone.run(()=>r);return new Mm(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new Vm(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new Um(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(ri.c),r.Jb(ri.b,8),r.Jb(qm,8),r.Jb(Bm,8),r.Jb(r.B),r.Jb(r.z),r.Jb(Hm,8),r.Jb(zm,8),r.Jb(Nm,8))},t.\u0275prov=Object(r.Ab)({factory:function(){return new t(Object(r.Jb)(ri.c),Object(r.Jb)(ri.b,8),Object(r.Jb)(qm,8),Object(r.Jb)(Bm,8),Object(r.Jb)(r.B),Object(r.Jb)(r.z),Object(r.Jb)(Hm,8),Object(r.Jb)(zm,8),Object(r.Jb)(Nm,8))},token:t,providedIn:"any"}),t})(),Qm=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:qm,useValue:!0},{provide:Hm,useValue:e}]}}}return t.\u0275mod=r.Cb({type:t}),t.\u0275inj=r.Bb({factory:function(e){return new(e||t)},providers:[Gm]}),t})();var $m=n("w1tV");class Km{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new Ym(t,this.observables,this.project))}}class Ym extends vt{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++)this.add(wt(this,e[i],void 0,i))}notifyNext(t,e,n){this.values[n]=e;const r=this.toRespond;if(r.length>0){const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class Jm{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new Xm(t,this.predicate))}}class Xm extends gt.a{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}function Zm(t){return null==t}function tb(t){return"function"==typeof t.set}function eb(t,e){return tb(e)?e:t.ref(e)}function nb(t,e){if("string"==typeof t)return e.stringCase();if(tb(t))return e.firebaseCase();if("function"==typeof t.exportVal)return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof t)}function rb(t,e,n="on",r=ii.a){return new _t.a(i=>{let o=null;return o=t[n](e,(t,e)=>{r.schedule(()=>{i.next({snapshot:t,prevKey:e})}),"once"===n&&r.schedule(()=>i.complete())},t=>{r.schedule(()=>i.error(t))}),"on"===n?{unsubscribe(){null!=o&&t.off(e,o)}}:{unsubscribe(){}}}).pipe(Object(jt.a)(t=>{const{snapshot:n,prevKey:r}=t;let i=null;return n.exists()&&(i=n.key),{type:e,payload:n,prevKey:r,key:i}}),Object($m.a)())}function ib(t,e){const n=t.length;for(let r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function ob(t,e){const{payload:n,prevKey:r,key:i}=e,o=ib(t,i),s=function(t,e){if(Zm(e))return 0;{const n=ib(t,e);return-1===n?t.length:n+1}}(t,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let n=null;e.payload.forEach(e=>{const r={payload:e,type:"value",prevKey:n,key:e.key};return n=e.key,t=[...t,r],!1})}return t;case"child_added":if(o>-1){const i=t[o-1];(i&&i.key||null)!==r&&(t=t.filter(t=>t.payload.key!==n.key)).splice(s,0,e)}else{if(null==r)return[e,...t];(t=t.slice()).splice(s,0,e)}return t;case"child_removed":return t.filter(t=>t.payload.key!==n.key);case"child_changed":return t.map(t=>t.payload.key===i?e:t);case"child_moved":if(o>-1){const e=t.splice(o,1)[0];return(t=t.slice()).splice(s,0,e),t}return t;default:return t}}function sb(t){return(Zm(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function ab(t,e,n){return function(t,e,n){return rb(t,"value","once",n).pipe($t(r=>{const i=[Object(ct.a)(r)];return e.forEach(e=>i.push(rb(t,e,"on",n))),Object(Am.a)(...i).pipe(ne(ob,[]))}),ui())}(t,e=sb(e),n)}function ub(t,e,n){const r=(e=sb(e)).map(e=>rb(t,e,"on",n));return Object(Am.a)(...r)}function cb(t,e){return function(n,r){return nb(n,{stringCase:()=>t.child(n)[e](r),firebaseCase:()=>n[e](r),snapshotCase:()=>n.ref[e](r)})}}function lb(t,e){return function(){return rb(t,"value","on",e)}}n("6Uf2");const hb=new r.q("angularfire2.realtimeDatabaseURL"),fb=new r.q("angularfire2.database.use-emulator");let db=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new ri.d(i),this.keepUnstableUntilFirst=Object(ri.h)(this.schedulers);const a=o,u=Object(ri.g)(t,i,e);!fi.a.auth&&s&&Object(ri.j)(),this.database=Object(ri.f)(`${u.name}.database.${n}`,"AngularFireDatabase",u,()=>{const t=i.runOutsideAngular(()=>u.database(n||void 0));return a&&t.useEmulator(...a),t},[a])}list(t,e){const n=this.schedulers.ngZone.runOutsideAngular(()=>eb(this.database,t));let r=n;return e&&(r=e(n)),function(t,e){const n=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:cb(r,"update"),set:cb(r,"set"),push:t=>r.push(t),remove:(i=r,function(t){return t?nb(t,{stringCase:()=>i.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):i.remove()}),snapshotChanges:r=>ab(t,r,n).pipe(e.keepUnstableUntilFirst),stateChanges:r=>ub(t,r,n).pipe(e.keepUnstableUntilFirst),auditTrail:r=>function(t,e,n){return function(t,e,n){return function(t,e){return rb(t,"value","on",e).pipe(Object(jt.a)(t=>{let e;return t.payload.forEach(t=>(e=t.key,!1)),{data:t,lastKeyToLoad:e}}))}(t,n).pipe(function(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new Km(t,n))}}(e),Object(jt.a)(([t,e])=>{const n=t.lastKeyToLoad,r=e.map(t=>t.key);return{actions:e,lastKeyToLoad:n,loadedKeys:r}}),(r=t=>-1===t.loadedKeys.indexOf(t.lastKeyToLoad),t=>t.lift(new Jm(r))),Object(jt.a)(t=>t.actions));var r}(t,ub(t,e).pipe(ne((t,e)=>[...t,e],[])),n)}(t,r,n).pipe(e.keepUnstableUntilFirst),valueChanges:(r,i)=>ab(t,r,n).pipe(Object(jt.a)(t=>t.map(t=>i&&i.idField?Object.assign(Object.assign({},t.payload.val()),{[i.idField]:t.key}):t.payload.val())),e.keepUnstableUntilFirst)};var i}(r,this)}object(t){const e=this.schedulers.ngZone.runOutsideAngular(()=>eb(this.database,t));return r=this,{query:n=e,snapshotChanges:()=>lb(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>lb(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst,Object(jt.a)(t=>t.payload.exists()?t.payload.val():null))};var n,r}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(ri.c),r.Jb(ri.b,8),r.Jb(hb,8),r.Jb(r.B),r.Jb(r.z),r.Jb(fb,8),r.Jb(Nm,8))},t.\u0275prov=Object(r.Ab)({factory:function(){return new t(Object(r.Jb)(ri.c),Object(r.Jb)(ri.b,8),Object(r.Jb)(hb,8),Object(r.Jb)(r.B),Object(r.Jb)(r.z),Object(r.Jb)(fb,8),Object(r.Jb)(Nm,8))},token:t,providedIn:"any"}),t})(),pb=(()=>{class t{}return t.\u0275mod=r.Cb({type:t}),t.\u0275inj=r.Bb({factory:function(e){return new(e||t)},providers:[db]}),t})(),yb=(()=>{class t{}return t.\u0275mod=r.Cb({type:t,bootstrap:[ni]}),t.\u0275inj=r.Bb({factory:function(e){return new(e||t)},providers:[],imports:[[ut,ri.a.initializeApp(i),Qm,pb,ei]]}),t})();Object(r.S)(),st().bootstrapModule(yb).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return u}));var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD");class s extends r.a{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.a{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(!e.closed)return t instanceof i.a?t.subscribe(e):Object(o.a)(t)(e)}}},[[0,0]]]);